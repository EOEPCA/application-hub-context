{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Application-Hub","text":"<p>The Application Hub provides a unified Cloud infrastructure to manage and deliver work environments and tools for a variety of user tasks. These tasks include developing, hosting, executing, and performing exploratory analysis of Earth Observation (EO) applications. The hub simplifies the management of these tasks within a single, cohesive platform. </p>"},{"location":"#configuration-overview","title":"Configuration Overview","text":"<p>There are many approach for deployment and one of them is using python based approach. Indeed, the user can generate, and apply the kubernetes objects using python instead of old-fashion approaches. In this tutorial, the user will configure The Application Hub using a Python script, <code>jupyterhub_config.py</code>. It customizes Application Hub's behavior by defining hooks, authentication, spawner settings, and other configurations.</p> <p>The key features of the python script are: - Read the configuration - Pre-spawn hook - Post-stop hook</p>"},{"location":"#read-the-configuration","title":"Read the configuration","text":"<p>The configuration file for the Application Hub is located at:</p> <p><pre><code>config_path = \"/usr/local/etc/applicationhub/config.yml\"\n</code></pre> This file can be customized and generated by users through this tutorial.</p>"},{"location":"#profile-list","title":"Profile list","text":"<p>This method provides the Application pods spawn options. It is a map with one or more Application pod definitions.</p> <p>A profile is an option shown on the JupyterHub landing page and it defines what container image is used in the pod to spawn.</p> <p>It also includes the CPU and RAM limits to assign to the pod to spawn.</p> <p>The profile slug is the key of the selected profile.</p> <p>Based on the profile slug, the contextualization may include different elements: volumes, config maps or environment variables.</p> <pre><code>from application_hub_context.app_hub_context import DefaultApplicationHubContext\n\nnamespace_prefix = \"jupyter\"\n\ndef custom_options_form(spawner):\n\n    spawner.log.info(\"Configure profile list\")\n\n    namespace = f\"{namespace_prefix}-{spawner.user.name}\"\n\n    workspace = DefaultApplicationHubContext(\n        namespace=namespace,\n        spawner=spawner,\n        config_path=config_path,\n    )\n\n    spawner.profile_list = workspace.get_profile_list()\n\n    return spawner._options_form_default()\n</code></pre>"},{"location":"#pre-spawn-hook","title":"Pre-spawn hook","text":"<p>The <code>pre_spawn_hook</code> is an optional hook function that can be implemented to do bootstrapping work before the spawner starts.</p> <p>This hook contextualises the Application pod to spawn and:</p> <ul> <li>may mount config maps</li> <li>may mount volumes</li> <li>may set pod environment variables</li> </ul> <pre><code>def pre_spawn_hook(spawner):\n    spawner.http_timeout = 600\n\n    profile_slug = spawner.user_options.get(\"profile\", None)\n\n    env = os.environ[\"JUPYTERHUB_ENV\"].lower()\n\n    spawner.environment[\"CALRISSIAN_POD_NAME\"] = f\"jupyter-{spawner.user.name}-{env}\"\n\n    spawner.log.info(f\"Using profile slug {profile_slug}\")\n\n    namespace = f\"{namespace_prefix}-{spawner.user.name}\"\n\n    workspace = DefaultApplicationHubContext(\n        namespace=namespace, spawner=spawner, config_path=config_path, skip_namespace_check=False, \n    )\n\n    workspace.initialise()\n\n    profile_id = workspace.config_parser.get_profile_by_slug(slug=profile_slug).id\n\n    default_url = workspace.config_parser.get_profile_default_url(profile_id=profile_id)\n\n    if default_url:\n        spawner.log.info(f\"Setting default url to {default_url}\")\n        spawner.default_url = default_url\n</code></pre>"},{"location":"#post-stop-hook","title":"Post-stop hook","text":"<p>The <code>post_stop_hook</code> is an optional hook function that can be implemented to do work after the spawner stops.</p> <p>This hook does clean-up tasks:</p> <ul> <li>may delete temporary volumes</li> <li>may delete temporary config maps</li> </ul> <pre><code>def post_stop_hook(spawner):\n\n    namespace = f\"jupyter-{spawner.user.name}\"\n\n    workspace = DefaultApplicationHubContext(\n        namespace=namespace, spawner=spawner, config_path=config_path\n    )\n    spawner.log.info(\"Dispose in post stop hook\")\n    workspace.dispose()\n</code></pre>"},{"location":"config-generator/","title":"Generate App Hub's configuration","text":"In\u00a0[\u00a0]: Copied! <pre>!pip install apphub-configurator\n</pre> !pip install apphub-configurator In\u00a0[1]: Copied! <pre>import yaml\nfrom apphub_configurator.models import *\nfrom pathlib import Path\nimport os\nimport json\nfrom pprint import pprint\ncurrent_dir = Path(os.getcwd())\nparent_dir = current_dir.parent\ncurrent_dir\n</pre> import yaml from apphub_configurator.models import * from pathlib import Path import os import json from pprint import pprint current_dir = Path(os.getcwd()) parent_dir = current_dir.parent current_dir Out[1]: <pre>PosixPath('/home/t2/Desktop/p/EOEPCA/application-hub-context/apphub-configurator/examples')</pre> In\u00a0[2]: Copied! <pre>storage_class_rwo = \"managed-nfs-storage\"\nstorage_class_rwx = \"managed-nfs-storage\"\n\nworkspace_volume_size = \"50Gi\"\ncalrissian_volume_size = \"50Gi\"\n</pre> storage_class_rwo = \"managed-nfs-storage\" storage_class_rwx = \"managed-nfs-storage\"  workspace_volume_size = \"50Gi\" calrissian_volume_size = \"50Gi\" In\u00a0[3]: Copied! <pre>workspace_volume = Volume( # type: ignore\n    name=\"workspace-volume\",\n    size=workspace_volume_size,\n    claim_name=\"workspace-claim\",\n    mount_path=\"/workspace\",\n    storage_class=storage_class_rwo,\n    access_modes=[\"ReadWriteOnce\"],\n    volume_mount=VolumeMount(name=\"workspace-volume\", mount_path=\"/workspace\"), # type: ignore\n    persist=True,\n)\nworkspace_volume\n</pre> workspace_volume = Volume( # type: ignore     name=\"workspace-volume\",     size=workspace_volume_size,     claim_name=\"workspace-claim\",     mount_path=\"/workspace\",     storage_class=storage_class_rwo,     access_modes=[\"ReadWriteOnce\"],     volume_mount=VolumeMount(name=\"workspace-volume\", mount_path=\"/workspace\"), # type: ignore     persist=True, ) workspace_volume Out[3]: <pre>Volume(name='workspace-volume', claim_name='workspace-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteOnce'], volume_mount=VolumeMount(name='workspace-volume', mount_path='/workspace'), persist=True)</pre> In\u00a0[4]: Copied! <pre>calrissian_volume = Volume( # type: ignore\n    name=\"calrissian-volume\",\n    claim_name=\"calrissian-claim\",\n    size=calrissian_volume_size,\n    storage_class=storage_class_rwx,\n    access_modes=[\"ReadWriteMany\"],\n    volume_mount=VolumeMount(name=\"calrissian-volume\", mount_path=\"/calrissian\"), # type: ignore\n    persist=False,\n)\ncalrissian_volume\n</pre> calrissian_volume = Volume( # type: ignore     name=\"calrissian-volume\",     claim_name=\"calrissian-claim\",     size=calrissian_volume_size,     storage_class=storage_class_rwx,     access_modes=[\"ReadWriteMany\"],     volume_mount=VolumeMount(name=\"calrissian-volume\", mount_path=\"/calrissian\"), # type: ignore     persist=False, ) calrissian_volume Out[4]: <pre>Volume(name='calrissian-volume', claim_name='calrissian-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteMany'], volume_mount=VolumeMount(name='calrissian-volume', mount_path='/calrissian'), persist=False)</pre> In\u00a0[5]: Copied! <pre>bash_login_file_path = os.path.join(parent_dir, \"config-maps/bash-login\") \nwith open(bash_login_file_path, \"r\") as f:\n    content = f.read()\n\nbash_login_cm = ConfigMap( # type: ignore\n    name=\"bash-login\",\n    key=\"bash-login\",\n    content=content,\n    readonly=True,\n    persist=False,\n    mount_path=\"/workspace/.bash_login\",\n)\nbash_login_cm\n</pre> bash_login_file_path = os.path.join(parent_dir, \"config-maps/bash-login\")  with open(bash_login_file_path, \"r\") as f:     content = f.read()  bash_login_cm = ConfigMap( # type: ignore     name=\"bash-login\",     key=\"bash-login\",     content=content,     readonly=True,     persist=False,     mount_path=\"/workspace/.bash_login\", ) bash_login_cm Out[5]: <pre>ConfigMap(name='bash-login', key='bash-login', mount_path='/workspace/.bash_login', default_mode=None, readonly=True, content='source /workspace/.bashrc\\n', persist=False)</pre> In\u00a0[6]: Copied! <pre>bash_rc_cm_file_path = os.path.join(parent_dir, \"config-maps/bash-rc\") \nwith open(bash_rc_cm_file_path, \"r\") as f:\n    content = f.read()\nbash_rc_cm = ConfigMap( # type: ignore\n    name=\"bash-rc\",\n    key=\"bash-rc\",\n    content=content,\n    readonly=True,\n    persist=False,\n    mount_path=\"/workspace/.bashrc\",\n)\nbash_rc_cm\n</pre> bash_rc_cm_file_path = os.path.join(parent_dir, \"config-maps/bash-rc\")  with open(bash_rc_cm_file_path, \"r\") as f:     content = f.read() bash_rc_cm = ConfigMap( # type: ignore     name=\"bash-rc\",     key=\"bash-rc\",     content=content,     readonly=True,     persist=False,     mount_path=\"/workspace/.bashrc\", ) bash_rc_cm Out[6]: <pre>ConfigMap(name='bash-rc', key='bash-rc', mount_path='/workspace/.bashrc', default_mode=None, readonly=True, content='alias ll=\"ls -l\"\\nalias calrissian=\"/opt/conda/bin/calrissian --pod-nodeselectors /etc/calrissian/pod-node-selector.yml --stdout /calrissian/results.json --max-ram 16G --max-cores \"8\" --tmp-outdir-prefix /calrissian/tmp/ --outdir /calrissian/\"\\nalias cwltool=\"/opt/conda/bin/cwltool --podman\"\\n. /home/jovyan/.bashrc\\n\\n#alias aws=\"aws --endpoint-url=http://localstack:4566\"\\n\\n# &gt;&gt;&gt; conda initialize &gt;&gt;&gt;\\n# !! Contents within this block are managed by \\'conda init\\' !!\\n__conda_setup=\"$(\\'/opt/conda/bin/conda\\' \\'shell.bash\\' \\'hook\\' 2&gt; /dev/null)\"\\nif [ $? -eq 0 ]; then\\n    eval \"$__conda_setup\"\\nelse\\n    if [ -f \"/opt/conda/etc/profile.d/conda.sh\" ]; then\\n        . \"/opt/conda/etc/profile.d/conda.sh\"\\n    else\\n        export PATH=\"/srv/conda/bin:$PATH\"\\n    fi\\nfi\\nunset __conda_setup\\n\\nif [ -f \"/opt/conda/etc/profile.d/mamba.sh\" ]; then\\n    . \"/opt/conda/etc/profile.d/mamba.sh\"\\nfi\\n# &lt;&lt;&lt; conda initialize &lt;&lt;&lt;\\n\\na={{spawner.user.name}}\\n\\nalias aws=\"aws --endpoint-url=http://localstack-jupyter-{{spawner.user.name}}:4566\"', persist=False)</pre> In\u00a0[7]: Copied! <pre>init_qgis_file_path = os.path.join(parent_dir, \"config-maps/init-qgis.sh\") \nwith open(init_qgis_file_path, \"r\") as f:\n    content = f.read()\n\ninit_qgis_cm = ConfigMap( # type: ignore\n    name=\"init\",\n    key=\"init\",\n    content=content,\n    readonly=True,\n    persist=False,\n    mount_path=\"/opt/init/.init.sh\",\n)\ninit_qgis_cm\n</pre> init_qgis_file_path = os.path.join(parent_dir, \"config-maps/init-qgis.sh\")  with open(init_qgis_file_path, \"r\") as f:     content = f.read()  init_qgis_cm = ConfigMap( # type: ignore     name=\"init\",     key=\"init\",     content=content,     readonly=True,     persist=False,     mount_path=\"/opt/init/.init.sh\", ) init_qgis_cm Out[7]: <pre>ConfigMap(name='init', key='init', mount_path='/opt/init/.init.sh', default_mode=None, readonly=True, content='mkdir -p /workspace/.config/autostart\\n\\n\\ncat &lt;&lt;EOF &gt; /workspace/.config/autostart/qgis.desktop \\n[Desktop Entry]\\nEncoding=UTF-8\\nVersion=0.9.4\\nType=Application\\nName=qgis\\nComment=qgis\\nExec=qgis\\nOnlyShowIn=XFCE;\\nRunHook=0\\nStartupNotify=false\\nTerminal=false\\nHidden=false\\nEOF', persist=False)</pre> In\u00a0[8]: Copied! <pre>init_stac_file_path = os.path.join(parent_dir, \"config-maps/init-stac.sh\")\nwith open(init_stac_file_path, \"r\") as f:\n    content = f.read()\n\ninit_stac_cm = ConfigMap( # type: ignore\n    name=\"init\",\n    key=\"init\",\n    content=content,\n    readonly=True,\n    persist=False,\n    mount_path=\"/opt/init/.init.sh\",\n)\ninit_stac_cm\n</pre> init_stac_file_path = os.path.join(parent_dir, \"config-maps/init-stac.sh\") with open(init_stac_file_path, \"r\") as f:     content = f.read()  init_stac_cm = ConfigMap( # type: ignore     name=\"init\",     key=\"init\",     content=content,     readonly=True,     persist=False,     mount_path=\"/opt/init/.init.sh\", ) init_stac_cm Out[8]: <pre>ConfigMap(name='init', key='init', mount_path='/opt/init/.init.sh', default_mode=None, readonly=True, content='set -x \\n\\ncd /workspace\\n\\ngit clone \\'https://github.com/eoap/stac-eoap.git\\'\\n\\ncode-server --install-extension ms-python.python \\ncode-server --install-extension redhat.vscode-yaml\\ncode-server --install-extension sbg-rabix.benten-cwl\\ncode-server --install-extension ms-toolsai.jupyter\\n\\nln -s /workspace/.local/share/code-server/extensions /workspace/extensions\\n\\nmkdir -p /workspace/User/\\n\\necho \\'{\"workbench.colorTheme\": \"Visual Studio Dark\"}\\' &gt; /workspace/User/settings.json\\n\\npython -m venv /workspace/.venv\\nsource /workspace/.venv/bin/activate\\n/workspace/.venv/bin/python -m pip install --no-cache-dir stactools rasterio requests stac-asset click-logging tabulate tqdm pystac-client ipykernel loguru scikit-image rio_stac boto3==1.35.23\\n\\n/workspace/.venv/bin/python -m pip install --index-url https://test.pypi.org/simple cwl-wrapper\\n\\n/workspace/.venv/bin/python -m ipykernel install --user --name stac_env --display-name \"Python (STAC)\"\\n\\nexport AWS_DEFAULT_REGION=\"us-east-1\"\\nexport AWS_ACCESS_KEY_ID=\"test\"\\nexport AWS_SECRET_ACCESS_KEY=\"test\"\\naws s3 mb s3://results --endpoint-url=http://localstack:4566\\n\\nexit 0', persist=False)</pre> In\u00a0[9]: Copied! <pre>init_cm_file_path = os.path.join(parent_dir, \"config-maps/init.sh\") \nwith open(init_cm_file_path, \"r\") as f:\n    content = f.read()\n\ninit_coder_cm = ConfigMap(\n    name=\"init\",\n    key=\"init\",\n    content=content,\n    readonly=True,\n    persist=False,\n    mount_path=\"/opt/init/.init.sh\",\n    default_mode=\"0660\",\n)\ninit_coder_cm\n</pre> init_cm_file_path = os.path.join(parent_dir, \"config-maps/init.sh\")  with open(init_cm_file_path, \"r\") as f:     content = f.read()  init_coder_cm = ConfigMap(     name=\"init\",     key=\"init\",     content=content,     readonly=True,     persist=False,     mount_path=\"/opt/init/.init.sh\",     default_mode=\"0660\", ) init_coder_cm Out[9]: <pre>ConfigMap(name='init', key='init', mount_path='/opt/init/.init.sh', default_mode='0660', readonly=True, content=\"set -x\\n\\ncd /workspace\\n\\ngit clone 'https://github.com/eoap/mastering-app-package.git'\\n\\ncode-server --install-extension ms-python.python\\ncode-server --install-extension redhat.vscode-yaml\\ncode-server --install-extension sbg-rabix.benten-cwl\\ncode-server --install-extension ms-toolsai.jupyter\\n\\nln -s /workspace/.local/share/code-server/extensions /workspace/extensions\\n\\nexit 0\\n\", persist=False)</pre> In\u00a0[10]: Copied! <pre>profiles = []\n</pre> profiles = [] In\u00a0[11]: Copied! <pre>coders = {\n    \"coder1\": {\n        \"display_name\": \"Code Server Small\",\n        \"slug\": \"ellip_studio_coder_slug_s\",\n        \"cpu_limit\": 2,\n        \"mem_limit\": \"8G\",\n    },\n    \"coder2\": {\n        \"display_name\": \"Code Server Medium\",\n        \"slug\": \"ellip_studio_coder_slug_m\",\n        \"cpu_limit\": 4,\n        \"mem_limit\": \"12G\",\n    },\n}\n\nfor key, value in coders.items():\n    coder_definition = ProfileDefinition( # type: ignore\n        display_name=value[\"display_name\"],\n        slug=value[\"slug\"],\n        default=False,\n        kubespawner_override=KubespawnerOverride( # type: ignore\n            cpu_limit=value[\"cpu_limit\"],\n            mem_limit=value[\"mem_limit\"],\n            image=\"eoepca/pde-code-server:develop\",\n        ),\n    )\n\n    coder_profile = Profile( # type: ignore\n        id=f\"profile_studio_{key}\",\n        groups=[\"group-a\", \"group-b\"],\n        definition=coder_definition,\n        node_selector={},\n        volumes=[calrissian_volume, workspace_volume],\n        config_maps=[\n            bash_rc_cm,\n        ],\n        pod_env_vars={\n            \"HOME\": \"/workspace\",\n            \"CONDA_ENVS_PATH\": \"/workspace/.envs\",\n        },\n    )\n\n    profiles.append(coder_profile)\nprofiles\n</pre> coders = {     \"coder1\": {         \"display_name\": \"Code Server Small\",         \"slug\": \"ellip_studio_coder_slug_s\",         \"cpu_limit\": 2,         \"mem_limit\": \"8G\",     },     \"coder2\": {         \"display_name\": \"Code Server Medium\",         \"slug\": \"ellip_studio_coder_slug_m\",         \"cpu_limit\": 4,         \"mem_limit\": \"12G\",     }, }  for key, value in coders.items():     coder_definition = ProfileDefinition( # type: ignore         display_name=value[\"display_name\"],         slug=value[\"slug\"],         default=False,         kubespawner_override=KubespawnerOverride( # type: ignore             cpu_limit=value[\"cpu_limit\"],             mem_limit=value[\"mem_limit\"],             image=\"eoepca/pde-code-server:develop\",         ),     )      coder_profile = Profile( # type: ignore         id=f\"profile_studio_{key}\",         groups=[\"group-a\", \"group-b\"],         definition=coder_definition,         node_selector={},         volumes=[calrissian_volume, workspace_volume],         config_maps=[             bash_rc_cm,         ],         pod_env_vars={             \"HOME\": \"/workspace\",             \"CONDA_ENVS_PATH\": \"/workspace/.envs\",         },     )      profiles.append(coder_profile) profiles Out[11]: <pre>[Profile(id='profile_studio_coder1', groups=['group-a', 'group-b'], definition=ProfileDefinition(display_name='Code Server Small', description=None, slug='ellip_studio_coder_slug_s', default=False, kubespawner_override=KubespawnerOverride(cpu_limit=2, cpu_guarantee=None, mem_limit='8G', mem_guarantee=None, image='eoepca/pde-code-server:develop', extra_resource_limits={}, extra_resource_guarantees={})), config_maps=[ConfigMap(name='bash-rc', key='bash-rc', mount_path='/workspace/.bashrc', default_mode=None, readonly=True, content='alias ll=\"ls -l\"\\nalias calrissian=\"/opt/conda/bin/calrissian --pod-nodeselectors /etc/calrissian/pod-node-selector.yml --stdout /calrissian/results.json --max-ram 16G --max-cores \"8\" --tmp-outdir-prefix /calrissian/tmp/ --outdir /calrissian/\"\\nalias cwltool=\"/opt/conda/bin/cwltool --podman\"\\n. /home/jovyan/.bashrc\\n\\n#alias aws=\"aws --endpoint-url=http://localstack:4566\"\\n\\n# &gt;&gt;&gt; conda initialize &gt;&gt;&gt;\\n# !! Contents within this block are managed by \\'conda init\\' !!\\n__conda_setup=\"$(\\'/opt/conda/bin/conda\\' \\'shell.bash\\' \\'hook\\' 2&gt; /dev/null)\"\\nif [ $? -eq 0 ]; then\\n    eval \"$__conda_setup\"\\nelse\\n    if [ -f \"/opt/conda/etc/profile.d/conda.sh\" ]; then\\n        . \"/opt/conda/etc/profile.d/conda.sh\"\\n    else\\n        export PATH=\"/srv/conda/bin:$PATH\"\\n    fi\\nfi\\nunset __conda_setup\\n\\nif [ -f \"/opt/conda/etc/profile.d/mamba.sh\" ]; then\\n    . \"/opt/conda/etc/profile.d/mamba.sh\"\\nfi\\n# &lt;&lt;&lt; conda initialize &lt;&lt;&lt;\\n\\na={{spawner.user.name}}\\n\\nalias aws=\"aws --endpoint-url=http://localstack-jupyter-{{spawner.user.name}}:4566\"', persist=False)], volumes=[Volume(name='calrissian-volume', claim_name='calrissian-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteMany'], volume_mount=VolumeMount(name='calrissian-volume', mount_path='/calrissian'), persist=False), Volume(name='workspace-volume', claim_name='workspace-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteOnce'], volume_mount=VolumeMount(name='workspace-volume', mount_path='/workspace'), persist=True)], pod_env_vars={'HOME': '/workspace', 'CONDA_ENVS_PATH': '/workspace/.envs'}, default_url=None, node_selector={}, role_bindings=None, image_pull_secrets=[], init_containers=[], manifests=None, env_from_config_maps=None, env_from_secrets=None, secret_mounts=None),\n Profile(id='profile_studio_coder2', groups=['group-a', 'group-b'], definition=ProfileDefinition(display_name='Code Server Medium', description=None, slug='ellip_studio_coder_slug_m', default=False, kubespawner_override=KubespawnerOverride(cpu_limit=4, cpu_guarantee=None, mem_limit='12G', mem_guarantee=None, image='eoepca/pde-code-server:develop', extra_resource_limits={}, extra_resource_guarantees={})), config_maps=[ConfigMap(name='bash-rc', key='bash-rc', mount_path='/workspace/.bashrc', default_mode=None, readonly=True, content='alias ll=\"ls -l\"\\nalias calrissian=\"/opt/conda/bin/calrissian --pod-nodeselectors /etc/calrissian/pod-node-selector.yml --stdout /calrissian/results.json --max-ram 16G --max-cores \"8\" --tmp-outdir-prefix /calrissian/tmp/ --outdir /calrissian/\"\\nalias cwltool=\"/opt/conda/bin/cwltool --podman\"\\n. /home/jovyan/.bashrc\\n\\n#alias aws=\"aws --endpoint-url=http://localstack:4566\"\\n\\n# &gt;&gt;&gt; conda initialize &gt;&gt;&gt;\\n# !! Contents within this block are managed by \\'conda init\\' !!\\n__conda_setup=\"$(\\'/opt/conda/bin/conda\\' \\'shell.bash\\' \\'hook\\' 2&gt; /dev/null)\"\\nif [ $? -eq 0 ]; then\\n    eval \"$__conda_setup\"\\nelse\\n    if [ -f \"/opt/conda/etc/profile.d/conda.sh\" ]; then\\n        . \"/opt/conda/etc/profile.d/conda.sh\"\\n    else\\n        export PATH=\"/srv/conda/bin:$PATH\"\\n    fi\\nfi\\nunset __conda_setup\\n\\nif [ -f \"/opt/conda/etc/profile.d/mamba.sh\" ]; then\\n    . \"/opt/conda/etc/profile.d/mamba.sh\"\\nfi\\n# &lt;&lt;&lt; conda initialize &lt;&lt;&lt;\\n\\na={{spawner.user.name}}\\n\\nalias aws=\"aws --endpoint-url=http://localstack-jupyter-{{spawner.user.name}}:4566\"', persist=False)], volumes=[Volume(name='calrissian-volume', claim_name='calrissian-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteMany'], volume_mount=VolumeMount(name='calrissian-volume', mount_path='/calrissian'), persist=False), Volume(name='workspace-volume', claim_name='workspace-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteOnce'], volume_mount=VolumeMount(name='workspace-volume', mount_path='/workspace'), persist=True)], pod_env_vars={'HOME': '/workspace', 'CONDA_ENVS_PATH': '/workspace/.envs'}, default_url=None, node_selector={}, role_bindings=None, image_pull_secrets=[], init_containers=[], manifests=None, env_from_config_maps=None, env_from_secrets=None, secret_mounts=None)]</pre> In\u00a0[12]: Copied! <pre>init_context_volume_mount = InitContainerVolumeMount( # type: ignore\n    mount_path=\"/opt/init/.init.sh\", name=\"init\", sub_path=\"init\"\n)\ninit_container = InitContainer( # type: ignore\n    name=\"init-file-on-volume\",\n    image=\"eoepca/pde-code-server:develop\",\n    command=[\"sh\", \"-c\", \"sh /opt/init/.init.sh\"],\n    volume_mounts=[\n        VolumeMount(name=\"workspace-volume\", mount_path=\"/workspace\"), # type: ignore\n        init_context_volume_mount,\n    ],\n)\n\neoepca_demo_init_script_profile = Profile( # type: ignore\n    id=f\"profile_demo_init_script\",\n    groups=[\"group-a\", \"group-b\"],\n    definition=ProfileDefinition( # type: ignore\n        display_name=\"Coder demo init script\",\n        description=\"This profile is used to demonstrate the use of an init script\",\n        slug=\"eoepca_demo_init_script\",\n        default=False,\n        kubespawner_override=KubespawnerOverride( # type: ignore\n            cpu_guarantee=1,\n            cpu_limit=2,\n            mem_guarantee=\"4G\",\n            mem_limit=\"6G\",\n            image=\"eoepca/pde-code-server:develop\",\n        ),\n    ),\n    node_selector={},\n    volumes=[calrissian_volume, workspace_volume],\n    config_maps=[init_coder_cm],\n    pod_env_vars={\n        \"HOME\": \"/workspace\",\n        \"CONDA_ENVS_PATH\": \"/workspace/.envs\",\n        \"CONDARC\": \"/workspace/.condarc\",\n        \"XDG_RUNTIME_DIR\": \"/workspace/.local\",\n        \"CODE_SERVER_WS\": \"/workspace/mastering-app-package\",\n    },\n    init_containers=[init_container],\n)\nprofiles.append(eoepca_demo_init_script_profile)\nprofiles\n</pre>   init_context_volume_mount = InitContainerVolumeMount( # type: ignore     mount_path=\"/opt/init/.init.sh\", name=\"init\", sub_path=\"init\" ) init_container = InitContainer( # type: ignore     name=\"init-file-on-volume\",     image=\"eoepca/pde-code-server:develop\",     command=[\"sh\", \"-c\", \"sh /opt/init/.init.sh\"],     volume_mounts=[         VolumeMount(name=\"workspace-volume\", mount_path=\"/workspace\"), # type: ignore         init_context_volume_mount,     ], )  eoepca_demo_init_script_profile = Profile( # type: ignore     id=f\"profile_demo_init_script\",     groups=[\"group-a\", \"group-b\"],     definition=ProfileDefinition( # type: ignore         display_name=\"Coder demo init script\",         description=\"This profile is used to demonstrate the use of an init script\",         slug=\"eoepca_demo_init_script\",         default=False,         kubespawner_override=KubespawnerOverride( # type: ignore             cpu_guarantee=1,             cpu_limit=2,             mem_guarantee=\"4G\",             mem_limit=\"6G\",             image=\"eoepca/pde-code-server:develop\",         ),     ),     node_selector={},     volumes=[calrissian_volume, workspace_volume],     config_maps=[init_coder_cm],     pod_env_vars={         \"HOME\": \"/workspace\",         \"CONDA_ENVS_PATH\": \"/workspace/.envs\",         \"CONDARC\": \"/workspace/.condarc\",         \"XDG_RUNTIME_DIR\": \"/workspace/.local\",         \"CODE_SERVER_WS\": \"/workspace/mastering-app-package\",     },     init_containers=[init_container], ) profiles.append(eoepca_demo_init_script_profile) profiles Out[12]: <pre>[Profile(id='profile_studio_coder1', groups=['group-a', 'group-b'], definition=ProfileDefinition(display_name='Code Server Small', description=None, slug='ellip_studio_coder_slug_s', default=False, kubespawner_override=KubespawnerOverride(cpu_limit=2, cpu_guarantee=None, mem_limit='8G', mem_guarantee=None, image='eoepca/pde-code-server:develop', extra_resource_limits={}, extra_resource_guarantees={})), config_maps=[ConfigMap(name='bash-rc', key='bash-rc', mount_path='/workspace/.bashrc', default_mode=None, readonly=True, content='alias ll=\"ls -l\"\\nalias calrissian=\"/opt/conda/bin/calrissian --pod-nodeselectors /etc/calrissian/pod-node-selector.yml --stdout /calrissian/results.json --max-ram 16G --max-cores \"8\" --tmp-outdir-prefix /calrissian/tmp/ --outdir /calrissian/\"\\nalias cwltool=\"/opt/conda/bin/cwltool --podman\"\\n. /home/jovyan/.bashrc\\n\\n#alias aws=\"aws --endpoint-url=http://localstack:4566\"\\n\\n# &gt;&gt;&gt; conda initialize &gt;&gt;&gt;\\n# !! Contents within this block are managed by \\'conda init\\' !!\\n__conda_setup=\"$(\\'/opt/conda/bin/conda\\' \\'shell.bash\\' \\'hook\\' 2&gt; /dev/null)\"\\nif [ $? -eq 0 ]; then\\n    eval \"$__conda_setup\"\\nelse\\n    if [ -f \"/opt/conda/etc/profile.d/conda.sh\" ]; then\\n        . \"/opt/conda/etc/profile.d/conda.sh\"\\n    else\\n        export PATH=\"/srv/conda/bin:$PATH\"\\n    fi\\nfi\\nunset __conda_setup\\n\\nif [ -f \"/opt/conda/etc/profile.d/mamba.sh\" ]; then\\n    . \"/opt/conda/etc/profile.d/mamba.sh\"\\nfi\\n# &lt;&lt;&lt; conda initialize &lt;&lt;&lt;\\n\\na={{spawner.user.name}}\\n\\nalias aws=\"aws --endpoint-url=http://localstack-jupyter-{{spawner.user.name}}:4566\"', persist=False)], volumes=[Volume(name='calrissian-volume', claim_name='calrissian-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteMany'], volume_mount=VolumeMount(name='calrissian-volume', mount_path='/calrissian'), persist=False), Volume(name='workspace-volume', claim_name='workspace-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteOnce'], volume_mount=VolumeMount(name='workspace-volume', mount_path='/workspace'), persist=True)], pod_env_vars={'HOME': '/workspace', 'CONDA_ENVS_PATH': '/workspace/.envs'}, default_url=None, node_selector={}, role_bindings=None, image_pull_secrets=[], init_containers=[], manifests=None, env_from_config_maps=None, env_from_secrets=None, secret_mounts=None),\n Profile(id='profile_studio_coder2', groups=['group-a', 'group-b'], definition=ProfileDefinition(display_name='Code Server Medium', description=None, slug='ellip_studio_coder_slug_m', default=False, kubespawner_override=KubespawnerOverride(cpu_limit=4, cpu_guarantee=None, mem_limit='12G', mem_guarantee=None, image='eoepca/pde-code-server:develop', extra_resource_limits={}, extra_resource_guarantees={})), config_maps=[ConfigMap(name='bash-rc', key='bash-rc', mount_path='/workspace/.bashrc', default_mode=None, readonly=True, content='alias ll=\"ls -l\"\\nalias calrissian=\"/opt/conda/bin/calrissian --pod-nodeselectors /etc/calrissian/pod-node-selector.yml --stdout /calrissian/results.json --max-ram 16G --max-cores \"8\" --tmp-outdir-prefix /calrissian/tmp/ --outdir /calrissian/\"\\nalias cwltool=\"/opt/conda/bin/cwltool --podman\"\\n. /home/jovyan/.bashrc\\n\\n#alias aws=\"aws --endpoint-url=http://localstack:4566\"\\n\\n# &gt;&gt;&gt; conda initialize &gt;&gt;&gt;\\n# !! Contents within this block are managed by \\'conda init\\' !!\\n__conda_setup=\"$(\\'/opt/conda/bin/conda\\' \\'shell.bash\\' \\'hook\\' 2&gt; /dev/null)\"\\nif [ $? -eq 0 ]; then\\n    eval \"$__conda_setup\"\\nelse\\n    if [ -f \"/opt/conda/etc/profile.d/conda.sh\" ]; then\\n        . \"/opt/conda/etc/profile.d/conda.sh\"\\n    else\\n        export PATH=\"/srv/conda/bin:$PATH\"\\n    fi\\nfi\\nunset __conda_setup\\n\\nif [ -f \"/opt/conda/etc/profile.d/mamba.sh\" ]; then\\n    . \"/opt/conda/etc/profile.d/mamba.sh\"\\nfi\\n# &lt;&lt;&lt; conda initialize &lt;&lt;&lt;\\n\\na={{spawner.user.name}}\\n\\nalias aws=\"aws --endpoint-url=http://localstack-jupyter-{{spawner.user.name}}:4566\"', persist=False)], volumes=[Volume(name='calrissian-volume', claim_name='calrissian-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteMany'], volume_mount=VolumeMount(name='calrissian-volume', mount_path='/calrissian'), persist=False), Volume(name='workspace-volume', claim_name='workspace-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteOnce'], volume_mount=VolumeMount(name='workspace-volume', mount_path='/workspace'), persist=True)], pod_env_vars={'HOME': '/workspace', 'CONDA_ENVS_PATH': '/workspace/.envs'}, default_url=None, node_selector={}, role_bindings=None, image_pull_secrets=[], init_containers=[], manifests=None, env_from_config_maps=None, env_from_secrets=None, secret_mounts=None),\n Profile(id='profile_demo_init_script', groups=['group-a', 'group-b'], definition=ProfileDefinition(display_name='Coder demo init script', description='This profile is used to demonstrate the use of an init script', slug='eoepca_demo_init_script', default=False, kubespawner_override=KubespawnerOverride(cpu_limit=2, cpu_guarantee=1, mem_limit='6G', mem_guarantee='4G', image='eoepca/pde-code-server:develop', extra_resource_limits={}, extra_resource_guarantees={})), config_maps=[ConfigMap(name='init', key='init', mount_path='/opt/init/.init.sh', default_mode='0660', readonly=True, content=\"set -x\\n\\ncd /workspace\\n\\ngit clone 'https://github.com/eoap/mastering-app-package.git'\\n\\ncode-server --install-extension ms-python.python\\ncode-server --install-extension redhat.vscode-yaml\\ncode-server --install-extension sbg-rabix.benten-cwl\\ncode-server --install-extension ms-toolsai.jupyter\\n\\nln -s /workspace/.local/share/code-server/extensions /workspace/extensions\\n\\nexit 0\\n\", persist=False)], volumes=[Volume(name='calrissian-volume', claim_name='calrissian-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteMany'], volume_mount=VolumeMount(name='calrissian-volume', mount_path='/calrissian'), persist=False), Volume(name='workspace-volume', claim_name='workspace-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteOnce'], volume_mount=VolumeMount(name='workspace-volume', mount_path='/workspace'), persist=True)], pod_env_vars={'HOME': '/workspace', 'CONDA_ENVS_PATH': '/workspace/.envs', 'CONDARC': '/workspace/.condarc', 'XDG_RUNTIME_DIR': '/workspace/.local', 'CODE_SERVER_WS': '/workspace/mastering-app-package'}, default_url=None, node_selector={}, role_bindings=None, image_pull_secrets=[], init_containers=[InitContainer(name='init-file-on-volume', image='eoepca/pde-code-server:develop', command=['sh', '-c', 'sh /opt/init/.init.sh'], volume_mounts=[VolumeMount(name='workspace-volume', mount_path='/workspace'), InitContainerVolumeMount(name='init', mount_path='/opt/init/.init.sh', sub_path='init')])], manifests=None, env_from_config_maps=None, env_from_secrets=None, secret_mounts=None)]</pre> In\u00a0[13]: Copied! <pre>image = \"jupyter/scipy-notebook\"\n\n\neoepca_jupyter_lab_profile = Profile( # type: ignore\n    id=\"profile_jupyter_lab\",\n    groups=[\"group-c\"],\n    definition=ProfileDefinition( # type: ignore\n        display_name=\"Jupyter Lab\",\n        description=\"Jupyter Lab with Python 3.11\",\n        slug=\"eoepca_jupyter_lab\",\n        default=False,\n        kubespawner_override=KubespawnerOverride( # type: ignore\n            cpu_guarantee=1,\n            cpu_limit=2,\n            mem_guarantee=\"4G\",\n            mem_limit=\"6G\",\n            image=image,\n        ),\n    ),\n    node_selector={},\n    volumes=[workspace_volume],\n    config_maps=[],\n    pod_env_vars={\n        \"HOME\": \"/workspace\",\n        \"XDG_RUNTIME_DIR\": \"/workspace/.local\",\n        \"XDG_CONFIG_HOME\": \"/workspace/.config\",\n    },\n)\n\nprofiles.append(eoepca_jupyter_lab_profile)\nprofiles\n</pre> image = \"jupyter/scipy-notebook\"   eoepca_jupyter_lab_profile = Profile( # type: ignore     id=\"profile_jupyter_lab\",     groups=[\"group-c\"],     definition=ProfileDefinition( # type: ignore         display_name=\"Jupyter Lab\",         description=\"Jupyter Lab with Python 3.11\",         slug=\"eoepca_jupyter_lab\",         default=False,         kubespawner_override=KubespawnerOverride( # type: ignore             cpu_guarantee=1,             cpu_limit=2,             mem_guarantee=\"4G\",             mem_limit=\"6G\",             image=image,         ),     ),     node_selector={},     volumes=[workspace_volume],     config_maps=[],     pod_env_vars={         \"HOME\": \"/workspace\",         \"XDG_RUNTIME_DIR\": \"/workspace/.local\",         \"XDG_CONFIG_HOME\": \"/workspace/.config\",     }, )  profiles.append(eoepca_jupyter_lab_profile) profiles Out[13]: <pre>[Profile(id='profile_studio_coder1', groups=['group-a', 'group-b'], definition=ProfileDefinition(display_name='Code Server Small', description=None, slug='ellip_studio_coder_slug_s', default=False, kubespawner_override=KubespawnerOverride(cpu_limit=2, cpu_guarantee=None, mem_limit='8G', mem_guarantee=None, image='eoepca/pde-code-server:develop', extra_resource_limits={}, extra_resource_guarantees={})), config_maps=[ConfigMap(name='bash-rc', key='bash-rc', mount_path='/workspace/.bashrc', default_mode=None, readonly=True, content='alias ll=\"ls -l\"\\nalias calrissian=\"/opt/conda/bin/calrissian --pod-nodeselectors /etc/calrissian/pod-node-selector.yml --stdout /calrissian/results.json --max-ram 16G --max-cores \"8\" --tmp-outdir-prefix /calrissian/tmp/ --outdir /calrissian/\"\\nalias cwltool=\"/opt/conda/bin/cwltool --podman\"\\n. /home/jovyan/.bashrc\\n\\n#alias aws=\"aws --endpoint-url=http://localstack:4566\"\\n\\n# &gt;&gt;&gt; conda initialize &gt;&gt;&gt;\\n# !! Contents within this block are managed by \\'conda init\\' !!\\n__conda_setup=\"$(\\'/opt/conda/bin/conda\\' \\'shell.bash\\' \\'hook\\' 2&gt; /dev/null)\"\\nif [ $? -eq 0 ]; then\\n    eval \"$__conda_setup\"\\nelse\\n    if [ -f \"/opt/conda/etc/profile.d/conda.sh\" ]; then\\n        . \"/opt/conda/etc/profile.d/conda.sh\"\\n    else\\n        export PATH=\"/srv/conda/bin:$PATH\"\\n    fi\\nfi\\nunset __conda_setup\\n\\nif [ -f \"/opt/conda/etc/profile.d/mamba.sh\" ]; then\\n    . \"/opt/conda/etc/profile.d/mamba.sh\"\\nfi\\n# &lt;&lt;&lt; conda initialize &lt;&lt;&lt;\\n\\na={{spawner.user.name}}\\n\\nalias aws=\"aws --endpoint-url=http://localstack-jupyter-{{spawner.user.name}}:4566\"', persist=False)], volumes=[Volume(name='calrissian-volume', claim_name='calrissian-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteMany'], volume_mount=VolumeMount(name='calrissian-volume', mount_path='/calrissian'), persist=False), Volume(name='workspace-volume', claim_name='workspace-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteOnce'], volume_mount=VolumeMount(name='workspace-volume', mount_path='/workspace'), persist=True)], pod_env_vars={'HOME': '/workspace', 'CONDA_ENVS_PATH': '/workspace/.envs'}, default_url=None, node_selector={}, role_bindings=None, image_pull_secrets=[], init_containers=[], manifests=None, env_from_config_maps=None, env_from_secrets=None, secret_mounts=None),\n Profile(id='profile_studio_coder2', groups=['group-a', 'group-b'], definition=ProfileDefinition(display_name='Code Server Medium', description=None, slug='ellip_studio_coder_slug_m', default=False, kubespawner_override=KubespawnerOverride(cpu_limit=4, cpu_guarantee=None, mem_limit='12G', mem_guarantee=None, image='eoepca/pde-code-server:develop', extra_resource_limits={}, extra_resource_guarantees={})), config_maps=[ConfigMap(name='bash-rc', key='bash-rc', mount_path='/workspace/.bashrc', default_mode=None, readonly=True, content='alias ll=\"ls -l\"\\nalias calrissian=\"/opt/conda/bin/calrissian --pod-nodeselectors /etc/calrissian/pod-node-selector.yml --stdout /calrissian/results.json --max-ram 16G --max-cores \"8\" --tmp-outdir-prefix /calrissian/tmp/ --outdir /calrissian/\"\\nalias cwltool=\"/opt/conda/bin/cwltool --podman\"\\n. /home/jovyan/.bashrc\\n\\n#alias aws=\"aws --endpoint-url=http://localstack:4566\"\\n\\n# &gt;&gt;&gt; conda initialize &gt;&gt;&gt;\\n# !! Contents within this block are managed by \\'conda init\\' !!\\n__conda_setup=\"$(\\'/opt/conda/bin/conda\\' \\'shell.bash\\' \\'hook\\' 2&gt; /dev/null)\"\\nif [ $? -eq 0 ]; then\\n    eval \"$__conda_setup\"\\nelse\\n    if [ -f \"/opt/conda/etc/profile.d/conda.sh\" ]; then\\n        . \"/opt/conda/etc/profile.d/conda.sh\"\\n    else\\n        export PATH=\"/srv/conda/bin:$PATH\"\\n    fi\\nfi\\nunset __conda_setup\\n\\nif [ -f \"/opt/conda/etc/profile.d/mamba.sh\" ]; then\\n    . \"/opt/conda/etc/profile.d/mamba.sh\"\\nfi\\n# &lt;&lt;&lt; conda initialize &lt;&lt;&lt;\\n\\na={{spawner.user.name}}\\n\\nalias aws=\"aws --endpoint-url=http://localstack-jupyter-{{spawner.user.name}}:4566\"', persist=False)], volumes=[Volume(name='calrissian-volume', claim_name='calrissian-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteMany'], volume_mount=VolumeMount(name='calrissian-volume', mount_path='/calrissian'), persist=False), Volume(name='workspace-volume', claim_name='workspace-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteOnce'], volume_mount=VolumeMount(name='workspace-volume', mount_path='/workspace'), persist=True)], pod_env_vars={'HOME': '/workspace', 'CONDA_ENVS_PATH': '/workspace/.envs'}, default_url=None, node_selector={}, role_bindings=None, image_pull_secrets=[], init_containers=[], manifests=None, env_from_config_maps=None, env_from_secrets=None, secret_mounts=None),\n Profile(id='profile_demo_init_script', groups=['group-a', 'group-b'], definition=ProfileDefinition(display_name='Coder demo init script', description='This profile is used to demonstrate the use of an init script', slug='eoepca_demo_init_script', default=False, kubespawner_override=KubespawnerOverride(cpu_limit=2, cpu_guarantee=1, mem_limit='6G', mem_guarantee='4G', image='eoepca/pde-code-server:develop', extra_resource_limits={}, extra_resource_guarantees={})), config_maps=[ConfigMap(name='init', key='init', mount_path='/opt/init/.init.sh', default_mode='0660', readonly=True, content=\"set -x\\n\\ncd /workspace\\n\\ngit clone 'https://github.com/eoap/mastering-app-package.git'\\n\\ncode-server --install-extension ms-python.python\\ncode-server --install-extension redhat.vscode-yaml\\ncode-server --install-extension sbg-rabix.benten-cwl\\ncode-server --install-extension ms-toolsai.jupyter\\n\\nln -s /workspace/.local/share/code-server/extensions /workspace/extensions\\n\\nexit 0\\n\", persist=False)], volumes=[Volume(name='calrissian-volume', claim_name='calrissian-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteMany'], volume_mount=VolumeMount(name='calrissian-volume', mount_path='/calrissian'), persist=False), Volume(name='workspace-volume', claim_name='workspace-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteOnce'], volume_mount=VolumeMount(name='workspace-volume', mount_path='/workspace'), persist=True)], pod_env_vars={'HOME': '/workspace', 'CONDA_ENVS_PATH': '/workspace/.envs', 'CONDARC': '/workspace/.condarc', 'XDG_RUNTIME_DIR': '/workspace/.local', 'CODE_SERVER_WS': '/workspace/mastering-app-package'}, default_url=None, node_selector={}, role_bindings=None, image_pull_secrets=[], init_containers=[InitContainer(name='init-file-on-volume', image='eoepca/pde-code-server:develop', command=['sh', '-c', 'sh /opt/init/.init.sh'], volume_mounts=[VolumeMount(name='workspace-volume', mount_path='/workspace'), InitContainerVolumeMount(name='init', mount_path='/opt/init/.init.sh', sub_path='init')])], manifests=None, env_from_config_maps=None, env_from_secrets=None, secret_mounts=None),\n Profile(id='profile_jupyter_lab', groups=['group-c'], definition=ProfileDefinition(display_name='Jupyter Lab', description='Jupyter Lab with Python 3.11', slug='eoepca_jupyter_lab', default=False, kubespawner_override=KubespawnerOverride(cpu_limit=2, cpu_guarantee=1, mem_limit='6G', mem_guarantee='4G', image='jupyter/scipy-notebook', extra_resource_limits={}, extra_resource_guarantees={})), config_maps=[], volumes=[Volume(name='workspace-volume', claim_name='workspace-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteOnce'], volume_mount=VolumeMount(name='workspace-volume', mount_path='/workspace'), persist=True)], pod_env_vars={'HOME': '/workspace', 'XDG_RUNTIME_DIR': '/workspace/.local', 'XDG_CONFIG_HOME': '/workspace/.config'}, default_url=None, node_selector={}, role_bindings=None, image_pull_secrets=[], init_containers=[], manifests=None, env_from_config_maps=None, env_from_secrets=None, secret_mounts=None)]</pre> In\u00a0[14]: Copied! <pre>image_pull_secret = ImagePullSecret( # type: ignore\n    name=\"cr-config\",\n    persist=False,\n    data=\"ewogICAgImF1dGhzIjogewogICAgICAgICJjci50ZXJyYWR1ZS5jb20iOiB7CiAgICAgICAgICAgICJ1c2VybmFtZSI6ICJyb2JvdCRlb2VwY2EtcGx1cy1ybyIsCiAgICAgICAgICAgICJwYXNzd29yZCI6ICJQMlE4TnkyZ0lHODhkZkxveXlLN05QVUZVbHJOekFZSiIsCiAgICAgICAgICAgICJlbWFpbCI6ICJlb2VwY2EtcGx1c0B0ZXJyYWR1ZS5jb20iLAogICAgICAgICAgICAiYXV0aCI6ICJjbTlpYjNRa1pXOWxjR05oTFhCc2RYTXRjbTg2VURKUk9FNTVNbWRKUnpnNFpHWk1iM2w1U3pkT1VGVkdWV3h5VG5wQldVbz0iCiAgICAgICAgfQogICAgfQp9\",\n)\nimage = \"cr.terradue.com/eoepca-plus/scipy-notebook@sha256:f339a9fa98d3d0c1fa8d7cc850e7f5a46845781f49bee86aacba059669d02d54\"\nimage = \"eoepca/iat-jupyterlab:develop\"\n\neoepca_jupyter_lab_profile_2 = Profile( # type: ignore\n    id=\"profile_jupyter_lab_2\",\n    groups=[\"group-c\"],\n    definition=ProfileDefinition( # type: ignore\n        display_name=\"Jupyter Lab - profile 2\",\n        description=\"Jupyter Lab with Python 3.11 private image - demoes the use of an image pull secret\",\n        slug=\"eoepca_jupyter_lab_2\",\n        default=False,\n        kubespawner_override=KubespawnerOverride( # type: ignore\n            cpu_guarantee=1,\n            cpu_limit=2,\n            mem_guarantee=\"4G\",\n            mem_limit=\"6G\",\n            image=image,\n        ),\n    ),\n    node_selector={},\n    volumes=[workspace_volume],\n    config_maps=[],\n    pod_env_vars={\n        \"HOME\": \"/workspace\",\n        \"XDG_RUNTIME_DIR\": \"/workspace/.local\",\n        \"XDG_CONFIG_HOME\": \"/workspace/.config\",\n    },\n    image_pull_secrets=[image_pull_secret],\n)\n\nprofiles.append(eoepca_jupyter_lab_profile_2)\nprofiles\n</pre> image_pull_secret = ImagePullSecret( # type: ignore     name=\"cr-config\",     persist=False,     data=\"ewogICAgImF1dGhzIjogewogICAgICAgICJjci50ZXJyYWR1ZS5jb20iOiB7CiAgICAgICAgICAgICJ1c2VybmFtZSI6ICJyb2JvdCRlb2VwY2EtcGx1cy1ybyIsCiAgICAgICAgICAgICJwYXNzd29yZCI6ICJQMlE4TnkyZ0lHODhkZkxveXlLN05QVUZVbHJOekFZSiIsCiAgICAgICAgICAgICJlbWFpbCI6ICJlb2VwY2EtcGx1c0B0ZXJyYWR1ZS5jb20iLAogICAgICAgICAgICAiYXV0aCI6ICJjbTlpYjNRa1pXOWxjR05oTFhCc2RYTXRjbTg2VURKUk9FNTVNbWRKUnpnNFpHWk1iM2w1U3pkT1VGVkdWV3h5VG5wQldVbz0iCiAgICAgICAgfQogICAgfQp9\", ) image = \"cr.terradue.com/eoepca-plus/scipy-notebook@sha256:f339a9fa98d3d0c1fa8d7cc850e7f5a46845781f49bee86aacba059669d02d54\" image = \"eoepca/iat-jupyterlab:develop\"  eoepca_jupyter_lab_profile_2 = Profile( # type: ignore     id=\"profile_jupyter_lab_2\",     groups=[\"group-c\"],     definition=ProfileDefinition( # type: ignore         display_name=\"Jupyter Lab - profile 2\",         description=\"Jupyter Lab with Python 3.11 private image - demoes the use of an image pull secret\",         slug=\"eoepca_jupyter_lab_2\",         default=False,         kubespawner_override=KubespawnerOverride( # type: ignore             cpu_guarantee=1,             cpu_limit=2,             mem_guarantee=\"4G\",             mem_limit=\"6G\",             image=image,         ),     ),     node_selector={},     volumes=[workspace_volume],     config_maps=[],     pod_env_vars={         \"HOME\": \"/workspace\",         \"XDG_RUNTIME_DIR\": \"/workspace/.local\",         \"XDG_CONFIG_HOME\": \"/workspace/.config\",     },     image_pull_secrets=[image_pull_secret], )  profiles.append(eoepca_jupyter_lab_profile_2) profiles Out[14]: <pre>[Profile(id='profile_studio_coder1', groups=['group-a', 'group-b'], definition=ProfileDefinition(display_name='Code Server Small', description=None, slug='ellip_studio_coder_slug_s', default=False, kubespawner_override=KubespawnerOverride(cpu_limit=2, cpu_guarantee=None, mem_limit='8G', mem_guarantee=None, image='eoepca/pde-code-server:develop', extra_resource_limits={}, extra_resource_guarantees={})), config_maps=[ConfigMap(name='bash-rc', key='bash-rc', mount_path='/workspace/.bashrc', default_mode=None, readonly=True, content='alias ll=\"ls -l\"\\nalias calrissian=\"/opt/conda/bin/calrissian --pod-nodeselectors /etc/calrissian/pod-node-selector.yml --stdout /calrissian/results.json --max-ram 16G --max-cores \"8\" --tmp-outdir-prefix /calrissian/tmp/ --outdir /calrissian/\"\\nalias cwltool=\"/opt/conda/bin/cwltool --podman\"\\n. /home/jovyan/.bashrc\\n\\n#alias aws=\"aws --endpoint-url=http://localstack:4566\"\\n\\n# &gt;&gt;&gt; conda initialize &gt;&gt;&gt;\\n# !! Contents within this block are managed by \\'conda init\\' !!\\n__conda_setup=\"$(\\'/opt/conda/bin/conda\\' \\'shell.bash\\' \\'hook\\' 2&gt; /dev/null)\"\\nif [ $? -eq 0 ]; then\\n    eval \"$__conda_setup\"\\nelse\\n    if [ -f \"/opt/conda/etc/profile.d/conda.sh\" ]; then\\n        . \"/opt/conda/etc/profile.d/conda.sh\"\\n    else\\n        export PATH=\"/srv/conda/bin:$PATH\"\\n    fi\\nfi\\nunset __conda_setup\\n\\nif [ -f \"/opt/conda/etc/profile.d/mamba.sh\" ]; then\\n    . \"/opt/conda/etc/profile.d/mamba.sh\"\\nfi\\n# &lt;&lt;&lt; conda initialize &lt;&lt;&lt;\\n\\na={{spawner.user.name}}\\n\\nalias aws=\"aws --endpoint-url=http://localstack-jupyter-{{spawner.user.name}}:4566\"', persist=False)], volumes=[Volume(name='calrissian-volume', claim_name='calrissian-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteMany'], volume_mount=VolumeMount(name='calrissian-volume', mount_path='/calrissian'), persist=False), Volume(name='workspace-volume', claim_name='workspace-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteOnce'], volume_mount=VolumeMount(name='workspace-volume', mount_path='/workspace'), persist=True)], pod_env_vars={'HOME': '/workspace', 'CONDA_ENVS_PATH': '/workspace/.envs'}, default_url=None, node_selector={}, role_bindings=None, image_pull_secrets=[], init_containers=[], manifests=None, env_from_config_maps=None, env_from_secrets=None, secret_mounts=None),\n Profile(id='profile_studio_coder2', groups=['group-a', 'group-b'], definition=ProfileDefinition(display_name='Code Server Medium', description=None, slug='ellip_studio_coder_slug_m', default=False, kubespawner_override=KubespawnerOverride(cpu_limit=4, cpu_guarantee=None, mem_limit='12G', mem_guarantee=None, image='eoepca/pde-code-server:develop', extra_resource_limits={}, extra_resource_guarantees={})), config_maps=[ConfigMap(name='bash-rc', key='bash-rc', mount_path='/workspace/.bashrc', default_mode=None, readonly=True, content='alias ll=\"ls -l\"\\nalias calrissian=\"/opt/conda/bin/calrissian --pod-nodeselectors /etc/calrissian/pod-node-selector.yml --stdout /calrissian/results.json --max-ram 16G --max-cores \"8\" --tmp-outdir-prefix /calrissian/tmp/ --outdir /calrissian/\"\\nalias cwltool=\"/opt/conda/bin/cwltool --podman\"\\n. /home/jovyan/.bashrc\\n\\n#alias aws=\"aws --endpoint-url=http://localstack:4566\"\\n\\n# &gt;&gt;&gt; conda initialize &gt;&gt;&gt;\\n# !! Contents within this block are managed by \\'conda init\\' !!\\n__conda_setup=\"$(\\'/opt/conda/bin/conda\\' \\'shell.bash\\' \\'hook\\' 2&gt; /dev/null)\"\\nif [ $? -eq 0 ]; then\\n    eval \"$__conda_setup\"\\nelse\\n    if [ -f \"/opt/conda/etc/profile.d/conda.sh\" ]; then\\n        . \"/opt/conda/etc/profile.d/conda.sh\"\\n    else\\n        export PATH=\"/srv/conda/bin:$PATH\"\\n    fi\\nfi\\nunset __conda_setup\\n\\nif [ -f \"/opt/conda/etc/profile.d/mamba.sh\" ]; then\\n    . \"/opt/conda/etc/profile.d/mamba.sh\"\\nfi\\n# &lt;&lt;&lt; conda initialize &lt;&lt;&lt;\\n\\na={{spawner.user.name}}\\n\\nalias aws=\"aws --endpoint-url=http://localstack-jupyter-{{spawner.user.name}}:4566\"', persist=False)], volumes=[Volume(name='calrissian-volume', claim_name='calrissian-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteMany'], volume_mount=VolumeMount(name='calrissian-volume', mount_path='/calrissian'), persist=False), Volume(name='workspace-volume', claim_name='workspace-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteOnce'], volume_mount=VolumeMount(name='workspace-volume', mount_path='/workspace'), persist=True)], pod_env_vars={'HOME': '/workspace', 'CONDA_ENVS_PATH': '/workspace/.envs'}, default_url=None, node_selector={}, role_bindings=None, image_pull_secrets=[], init_containers=[], manifests=None, env_from_config_maps=None, env_from_secrets=None, secret_mounts=None),\n Profile(id='profile_demo_init_script', groups=['group-a', 'group-b'], definition=ProfileDefinition(display_name='Coder demo init script', description='This profile is used to demonstrate the use of an init script', slug='eoepca_demo_init_script', default=False, kubespawner_override=KubespawnerOverride(cpu_limit=2, cpu_guarantee=1, mem_limit='6G', mem_guarantee='4G', image='eoepca/pde-code-server:develop', extra_resource_limits={}, extra_resource_guarantees={})), config_maps=[ConfigMap(name='init', key='init', mount_path='/opt/init/.init.sh', default_mode='0660', readonly=True, content=\"set -x\\n\\ncd /workspace\\n\\ngit clone 'https://github.com/eoap/mastering-app-package.git'\\n\\ncode-server --install-extension ms-python.python\\ncode-server --install-extension redhat.vscode-yaml\\ncode-server --install-extension sbg-rabix.benten-cwl\\ncode-server --install-extension ms-toolsai.jupyter\\n\\nln -s /workspace/.local/share/code-server/extensions /workspace/extensions\\n\\nexit 0\\n\", persist=False)], volumes=[Volume(name='calrissian-volume', claim_name='calrissian-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteMany'], volume_mount=VolumeMount(name='calrissian-volume', mount_path='/calrissian'), persist=False), Volume(name='workspace-volume', claim_name='workspace-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteOnce'], volume_mount=VolumeMount(name='workspace-volume', mount_path='/workspace'), persist=True)], pod_env_vars={'HOME': '/workspace', 'CONDA_ENVS_PATH': '/workspace/.envs', 'CONDARC': '/workspace/.condarc', 'XDG_RUNTIME_DIR': '/workspace/.local', 'CODE_SERVER_WS': '/workspace/mastering-app-package'}, default_url=None, node_selector={}, role_bindings=None, image_pull_secrets=[], init_containers=[InitContainer(name='init-file-on-volume', image='eoepca/pde-code-server:develop', command=['sh', '-c', 'sh /opt/init/.init.sh'], volume_mounts=[VolumeMount(name='workspace-volume', mount_path='/workspace'), InitContainerVolumeMount(name='init', mount_path='/opt/init/.init.sh', sub_path='init')])], manifests=None, env_from_config_maps=None, env_from_secrets=None, secret_mounts=None),\n Profile(id='profile_jupyter_lab', groups=['group-c'], definition=ProfileDefinition(display_name='Jupyter Lab', description='Jupyter Lab with Python 3.11', slug='eoepca_jupyter_lab', default=False, kubespawner_override=KubespawnerOverride(cpu_limit=2, cpu_guarantee=1, mem_limit='6G', mem_guarantee='4G', image='jupyter/scipy-notebook', extra_resource_limits={}, extra_resource_guarantees={})), config_maps=[], volumes=[Volume(name='workspace-volume', claim_name='workspace-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteOnce'], volume_mount=VolumeMount(name='workspace-volume', mount_path='/workspace'), persist=True)], pod_env_vars={'HOME': '/workspace', 'XDG_RUNTIME_DIR': '/workspace/.local', 'XDG_CONFIG_HOME': '/workspace/.config'}, default_url=None, node_selector={}, role_bindings=None, image_pull_secrets=[], init_containers=[], manifests=None, env_from_config_maps=None, env_from_secrets=None, secret_mounts=None),\n Profile(id='profile_jupyter_lab_2', groups=['group-c'], definition=ProfileDefinition(display_name='Jupyter Lab - profile 2', description='Jupyter Lab with Python 3.11 private image - demoes the use of an image pull secret', slug='eoepca_jupyter_lab_2', default=False, kubespawner_override=KubespawnerOverride(cpu_limit=2, cpu_guarantee=1, mem_limit='6G', mem_guarantee='4G', image='eoepca/iat-jupyterlab:develop', extra_resource_limits={}, extra_resource_guarantees={})), config_maps=[], volumes=[Volume(name='workspace-volume', claim_name='workspace-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteOnce'], volume_mount=VolumeMount(name='workspace-volume', mount_path='/workspace'), persist=True)], pod_env_vars={'HOME': '/workspace', 'XDG_RUNTIME_DIR': '/workspace/.local', 'XDG_CONFIG_HOME': '/workspace/.config'}, default_url=None, node_selector={}, role_bindings=None, image_pull_secrets=[ImagePullSecret(name='cr-config', persist=False, data='ewogICAgImF1dGhzIjogewogICAgICAgICJjci50ZXJyYWR1ZS5jb20iOiB7CiAgICAgICAgICAgICJ1c2VybmFtZSI6ICJyb2JvdCRlb2VwY2EtcGx1cy1ybyIsCiAgICAgICAgICAgICJwYXNzd29yZCI6ICJQMlE4TnkyZ0lHODhkZkxveXlLN05QVUZVbHJOekFZSiIsCiAgICAgICAgICAgICJlbWFpbCI6ICJlb2VwY2EtcGx1c0B0ZXJyYWR1ZS5jb20iLAogICAgICAgICAgICAiYXV0aCI6ICJjbTlpYjNRa1pXOWxjR05oTFhCc2RYTXRjbTg2VURKUk9FNTVNbWRKUnpnNFpHWk1iM2w1U3pkT1VGVkdWV3h5VG5wQldVbz0iCiAgICAgICAgfQogICAgfQp9')], init_containers=[], manifests=None, env_from_config_maps=None, env_from_secrets=None, secret_mounts=None)]</pre> In\u00a0[15]: Copied! <pre>localstack_manifest_path = os.path.join(parent_dir, \"manifests/manifest.yaml\") \nwith open(localstack_manifest_path, \"r\") as f:\n    content = yaml.safe_load_all(f.read())\n\n\nlocalstack_manifest = Manifest( # type: ignore\n    name=\"manifests\",\n    key=\"manifests\",\n    readonly=True,\n    persist=False,\n    content=[e for e in content],\n)\n\nimage = \"docker.io/eoepca/pde-code-server@sha256:f57a3d5eabcae667e0db6e84a57b0c07c692c88f0fb5c8f6900ab8d5e38fcd40\"\n\ncoder_profile_stac = Profile( # type: ignore\n    id=f\"profile_studio_coder_stac\",\n    groups=[\"group-a\", \"group-b\"], \n    definition=ProfileDefinition( # type: ignore\n        display_name=\"Understanding STAC for input/output data modelling\",\n        description=\"Understand the role of STAC in input/output data manifests in EO data processing workflows\",\n        slug=\"eoepca_coder_slug_stac\",\n        default=False,\n        kubespawner_override=KubespawnerOverride( # type: ignore\n            cpu_guarantee=1,\n            cpu_limit=2,\n            mem_guarantee=\"4G\",\n            mem_limit=\"6G\",\n            image=image,\n        ),\n    ),\n    node_selector={},\n    volumes=[workspace_volume],\n    config_maps=[init_stac_cm, bash_rc_cm, bash_login_cm],\n    pod_env_vars={\n        \"HOME\": \"/workspace\",\n        \"CONDA_ENVS_PATH\": \"/workspace/.envs\",\n        \"CONDARC\": \"/workspace/.condarc\",\n        \"XDG_RUNTIME_DIR\": \"/workspace/.local\",\n        \"XDG_RUNTIME_DIR\": \"/workspace/.local\",\n        \"XDG_CONFIG_HOME\": \"/workspace/.local\",\n        \"XDG_DATA_HOME\": \"/workspace/.local/share/\",\n        \"CWLTOOL_OPTIONS\": \"--podman\",\n        \"CODE_SERVER_WS\": \"/workspace/stac-eoap\",\n        \"AWS_DEFAULT_REGION\": \"us-east-1\",\n        \"AWS_ACCESS_KEY_ID\": \"test\",\n        \"AWS_SECRET_ACCESS_KEY\": \"test\",\n    },\n    role_bindings=[],\n    init_containers=[init_container],\n    image_pull_secrets=[image_pull_secret],\n    manifests=[localstack_manifest],\n)\n\nprofiles.append(coder_profile_stac)\nprofiles\n</pre> localstack_manifest_path = os.path.join(parent_dir, \"manifests/manifest.yaml\")  with open(localstack_manifest_path, \"r\") as f:     content = yaml.safe_load_all(f.read())   localstack_manifest = Manifest( # type: ignore     name=\"manifests\",     key=\"manifests\",     readonly=True,     persist=False,     content=[e for e in content], )  image = \"docker.io/eoepca/pde-code-server@sha256:f57a3d5eabcae667e0db6e84a57b0c07c692c88f0fb5c8f6900ab8d5e38fcd40\"  coder_profile_stac = Profile( # type: ignore     id=f\"profile_studio_coder_stac\",     groups=[\"group-a\", \"group-b\"],      definition=ProfileDefinition( # type: ignore         display_name=\"Understanding STAC for input/output data modelling\",         description=\"Understand the role of STAC in input/output data manifests in EO data processing workflows\",         slug=\"eoepca_coder_slug_stac\",         default=False,         kubespawner_override=KubespawnerOverride( # type: ignore             cpu_guarantee=1,             cpu_limit=2,             mem_guarantee=\"4G\",             mem_limit=\"6G\",             image=image,         ),     ),     node_selector={},     volumes=[workspace_volume],     config_maps=[init_stac_cm, bash_rc_cm, bash_login_cm],     pod_env_vars={         \"HOME\": \"/workspace\",         \"CONDA_ENVS_PATH\": \"/workspace/.envs\",         \"CONDARC\": \"/workspace/.condarc\",         \"XDG_RUNTIME_DIR\": \"/workspace/.local\",         \"XDG_RUNTIME_DIR\": \"/workspace/.local\",         \"XDG_CONFIG_HOME\": \"/workspace/.local\",         \"XDG_DATA_HOME\": \"/workspace/.local/share/\",         \"CWLTOOL_OPTIONS\": \"--podman\",         \"CODE_SERVER_WS\": \"/workspace/stac-eoap\",         \"AWS_DEFAULT_REGION\": \"us-east-1\",         \"AWS_ACCESS_KEY_ID\": \"test\",         \"AWS_SECRET_ACCESS_KEY\": \"test\",     },     role_bindings=[],     init_containers=[init_container],     image_pull_secrets=[image_pull_secret],     manifests=[localstack_manifest], )  profiles.append(coder_profile_stac) profiles Out[15]: <pre>[Profile(id='profile_studio_coder1', groups=['group-a', 'group-b'], definition=ProfileDefinition(display_name='Code Server Small', description=None, slug='ellip_studio_coder_slug_s', default=False, kubespawner_override=KubespawnerOverride(cpu_limit=2, cpu_guarantee=None, mem_limit='8G', mem_guarantee=None, image='eoepca/pde-code-server:develop', extra_resource_limits={}, extra_resource_guarantees={})), config_maps=[ConfigMap(name='bash-rc', key='bash-rc', mount_path='/workspace/.bashrc', default_mode=None, readonly=True, content='alias ll=\"ls -l\"\\nalias calrissian=\"/opt/conda/bin/calrissian --pod-nodeselectors /etc/calrissian/pod-node-selector.yml --stdout /calrissian/results.json --max-ram 16G --max-cores \"8\" --tmp-outdir-prefix /calrissian/tmp/ --outdir /calrissian/\"\\nalias cwltool=\"/opt/conda/bin/cwltool --podman\"\\n. /home/jovyan/.bashrc\\n\\n#alias aws=\"aws --endpoint-url=http://localstack:4566\"\\n\\n# &gt;&gt;&gt; conda initialize &gt;&gt;&gt;\\n# !! Contents within this block are managed by \\'conda init\\' !!\\n__conda_setup=\"$(\\'/opt/conda/bin/conda\\' \\'shell.bash\\' \\'hook\\' 2&gt; /dev/null)\"\\nif [ $? -eq 0 ]; then\\n    eval \"$__conda_setup\"\\nelse\\n    if [ -f \"/opt/conda/etc/profile.d/conda.sh\" ]; then\\n        . \"/opt/conda/etc/profile.d/conda.sh\"\\n    else\\n        export PATH=\"/srv/conda/bin:$PATH\"\\n    fi\\nfi\\nunset __conda_setup\\n\\nif [ -f \"/opt/conda/etc/profile.d/mamba.sh\" ]; then\\n    . \"/opt/conda/etc/profile.d/mamba.sh\"\\nfi\\n# &lt;&lt;&lt; conda initialize &lt;&lt;&lt;\\n\\na={{spawner.user.name}}\\n\\nalias aws=\"aws --endpoint-url=http://localstack-jupyter-{{spawner.user.name}}:4566\"', persist=False)], volumes=[Volume(name='calrissian-volume', claim_name='calrissian-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteMany'], volume_mount=VolumeMount(name='calrissian-volume', mount_path='/calrissian'), persist=False), Volume(name='workspace-volume', claim_name='workspace-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteOnce'], volume_mount=VolumeMount(name='workspace-volume', mount_path='/workspace'), persist=True)], pod_env_vars={'HOME': '/workspace', 'CONDA_ENVS_PATH': '/workspace/.envs'}, default_url=None, node_selector={}, role_bindings=None, image_pull_secrets=[], init_containers=[], manifests=None, env_from_config_maps=None, env_from_secrets=None, secret_mounts=None),\n Profile(id='profile_studio_coder2', groups=['group-a', 'group-b'], definition=ProfileDefinition(display_name='Code Server Medium', description=None, slug='ellip_studio_coder_slug_m', default=False, kubespawner_override=KubespawnerOverride(cpu_limit=4, cpu_guarantee=None, mem_limit='12G', mem_guarantee=None, image='eoepca/pde-code-server:develop', extra_resource_limits={}, extra_resource_guarantees={})), config_maps=[ConfigMap(name='bash-rc', key='bash-rc', mount_path='/workspace/.bashrc', default_mode=None, readonly=True, content='alias ll=\"ls -l\"\\nalias calrissian=\"/opt/conda/bin/calrissian --pod-nodeselectors /etc/calrissian/pod-node-selector.yml --stdout /calrissian/results.json --max-ram 16G --max-cores \"8\" --tmp-outdir-prefix /calrissian/tmp/ --outdir /calrissian/\"\\nalias cwltool=\"/opt/conda/bin/cwltool --podman\"\\n. /home/jovyan/.bashrc\\n\\n#alias aws=\"aws --endpoint-url=http://localstack:4566\"\\n\\n# &gt;&gt;&gt; conda initialize &gt;&gt;&gt;\\n# !! Contents within this block are managed by \\'conda init\\' !!\\n__conda_setup=\"$(\\'/opt/conda/bin/conda\\' \\'shell.bash\\' \\'hook\\' 2&gt; /dev/null)\"\\nif [ $? -eq 0 ]; then\\n    eval \"$__conda_setup\"\\nelse\\n    if [ -f \"/opt/conda/etc/profile.d/conda.sh\" ]; then\\n        . \"/opt/conda/etc/profile.d/conda.sh\"\\n    else\\n        export PATH=\"/srv/conda/bin:$PATH\"\\n    fi\\nfi\\nunset __conda_setup\\n\\nif [ -f \"/opt/conda/etc/profile.d/mamba.sh\" ]; then\\n    . \"/opt/conda/etc/profile.d/mamba.sh\"\\nfi\\n# &lt;&lt;&lt; conda initialize &lt;&lt;&lt;\\n\\na={{spawner.user.name}}\\n\\nalias aws=\"aws --endpoint-url=http://localstack-jupyter-{{spawner.user.name}}:4566\"', persist=False)], volumes=[Volume(name='calrissian-volume', claim_name='calrissian-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteMany'], volume_mount=VolumeMount(name='calrissian-volume', mount_path='/calrissian'), persist=False), Volume(name='workspace-volume', claim_name='workspace-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteOnce'], volume_mount=VolumeMount(name='workspace-volume', mount_path='/workspace'), persist=True)], pod_env_vars={'HOME': '/workspace', 'CONDA_ENVS_PATH': '/workspace/.envs'}, default_url=None, node_selector={}, role_bindings=None, image_pull_secrets=[], init_containers=[], manifests=None, env_from_config_maps=None, env_from_secrets=None, secret_mounts=None),\n Profile(id='profile_demo_init_script', groups=['group-a', 'group-b'], definition=ProfileDefinition(display_name='Coder demo init script', description='This profile is used to demonstrate the use of an init script', slug='eoepca_demo_init_script', default=False, kubespawner_override=KubespawnerOverride(cpu_limit=2, cpu_guarantee=1, mem_limit='6G', mem_guarantee='4G', image='eoepca/pde-code-server:develop', extra_resource_limits={}, extra_resource_guarantees={})), config_maps=[ConfigMap(name='init', key='init', mount_path='/opt/init/.init.sh', default_mode='0660', readonly=True, content=\"set -x\\n\\ncd /workspace\\n\\ngit clone 'https://github.com/eoap/mastering-app-package.git'\\n\\ncode-server --install-extension ms-python.python\\ncode-server --install-extension redhat.vscode-yaml\\ncode-server --install-extension sbg-rabix.benten-cwl\\ncode-server --install-extension ms-toolsai.jupyter\\n\\nln -s /workspace/.local/share/code-server/extensions /workspace/extensions\\n\\nexit 0\\n\", persist=False)], volumes=[Volume(name='calrissian-volume', claim_name='calrissian-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteMany'], volume_mount=VolumeMount(name='calrissian-volume', mount_path='/calrissian'), persist=False), Volume(name='workspace-volume', claim_name='workspace-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteOnce'], volume_mount=VolumeMount(name='workspace-volume', mount_path='/workspace'), persist=True)], pod_env_vars={'HOME': '/workspace', 'CONDA_ENVS_PATH': '/workspace/.envs', 'CONDARC': '/workspace/.condarc', 'XDG_RUNTIME_DIR': '/workspace/.local', 'CODE_SERVER_WS': '/workspace/mastering-app-package'}, default_url=None, node_selector={}, role_bindings=None, image_pull_secrets=[], init_containers=[InitContainer(name='init-file-on-volume', image='eoepca/pde-code-server:develop', command=['sh', '-c', 'sh /opt/init/.init.sh'], volume_mounts=[VolumeMount(name='workspace-volume', mount_path='/workspace'), InitContainerVolumeMount(name='init', mount_path='/opt/init/.init.sh', sub_path='init')])], manifests=None, env_from_config_maps=None, env_from_secrets=None, secret_mounts=None),\n Profile(id='profile_jupyter_lab', groups=['group-c'], definition=ProfileDefinition(display_name='Jupyter Lab', description='Jupyter Lab with Python 3.11', slug='eoepca_jupyter_lab', default=False, kubespawner_override=KubespawnerOverride(cpu_limit=2, cpu_guarantee=1, mem_limit='6G', mem_guarantee='4G', image='jupyter/scipy-notebook', extra_resource_limits={}, extra_resource_guarantees={})), config_maps=[], volumes=[Volume(name='workspace-volume', claim_name='workspace-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteOnce'], volume_mount=VolumeMount(name='workspace-volume', mount_path='/workspace'), persist=True)], pod_env_vars={'HOME': '/workspace', 'XDG_RUNTIME_DIR': '/workspace/.local', 'XDG_CONFIG_HOME': '/workspace/.config'}, default_url=None, node_selector={}, role_bindings=None, image_pull_secrets=[], init_containers=[], manifests=None, env_from_config_maps=None, env_from_secrets=None, secret_mounts=None),\n Profile(id='profile_jupyter_lab_2', groups=['group-c'], definition=ProfileDefinition(display_name='Jupyter Lab - profile 2', description='Jupyter Lab with Python 3.11 private image - demoes the use of an image pull secret', slug='eoepca_jupyter_lab_2', default=False, kubespawner_override=KubespawnerOverride(cpu_limit=2, cpu_guarantee=1, mem_limit='6G', mem_guarantee='4G', image='eoepca/iat-jupyterlab:develop', extra_resource_limits={}, extra_resource_guarantees={})), config_maps=[], volumes=[Volume(name='workspace-volume', claim_name='workspace-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteOnce'], volume_mount=VolumeMount(name='workspace-volume', mount_path='/workspace'), persist=True)], pod_env_vars={'HOME': '/workspace', 'XDG_RUNTIME_DIR': '/workspace/.local', 'XDG_CONFIG_HOME': '/workspace/.config'}, default_url=None, node_selector={}, role_bindings=None, image_pull_secrets=[ImagePullSecret(name='cr-config', persist=False, data='ewogICAgImF1dGhzIjogewogICAgICAgICJjci50ZXJyYWR1ZS5jb20iOiB7CiAgICAgICAgICAgICJ1c2VybmFtZSI6ICJyb2JvdCRlb2VwY2EtcGx1cy1ybyIsCiAgICAgICAgICAgICJwYXNzd29yZCI6ICJQMlE4TnkyZ0lHODhkZkxveXlLN05QVUZVbHJOekFZSiIsCiAgICAgICAgICAgICJlbWFpbCI6ICJlb2VwY2EtcGx1c0B0ZXJyYWR1ZS5jb20iLAogICAgICAgICAgICAiYXV0aCI6ICJjbTlpYjNRa1pXOWxjR05oTFhCc2RYTXRjbTg2VURKUk9FNTVNbWRKUnpnNFpHWk1iM2w1U3pkT1VGVkdWV3h5VG5wQldVbz0iCiAgICAgICAgfQogICAgfQp9')], init_containers=[], manifests=None, env_from_config_maps=None, env_from_secrets=None, secret_mounts=None),\n Profile(id='profile_studio_coder_stac', groups=['group-a', 'group-b'], definition=ProfileDefinition(display_name='Understanding STAC for input/output data modelling', description='Understand the role of STAC in input/output data manifests in EO data processing workflows', slug='eoepca_coder_slug_stac', default=False, kubespawner_override=KubespawnerOverride(cpu_limit=2, cpu_guarantee=1, mem_limit='6G', mem_guarantee='4G', image='docker.io/eoepca/pde-code-server@sha256:f57a3d5eabcae667e0db6e84a57b0c07c692c88f0fb5c8f6900ab8d5e38fcd40', extra_resource_limits={}, extra_resource_guarantees={})), config_maps=[ConfigMap(name='init', key='init', mount_path='/opt/init/.init.sh', default_mode=None, readonly=True, content='set -x \\n\\ncd /workspace\\n\\ngit clone \\'https://github.com/eoap/stac-eoap.git\\'\\n\\ncode-server --install-extension ms-python.python \\ncode-server --install-extension redhat.vscode-yaml\\ncode-server --install-extension sbg-rabix.benten-cwl\\ncode-server --install-extension ms-toolsai.jupyter\\n\\nln -s /workspace/.local/share/code-server/extensions /workspace/extensions\\n\\nmkdir -p /workspace/User/\\n\\necho \\'{\"workbench.colorTheme\": \"Visual Studio Dark\"}\\' &gt; /workspace/User/settings.json\\n\\npython -m venv /workspace/.venv\\nsource /workspace/.venv/bin/activate\\n/workspace/.venv/bin/python -m pip install --no-cache-dir stactools rasterio requests stac-asset click-logging tabulate tqdm pystac-client ipykernel loguru scikit-image rio_stac boto3==1.35.23\\n\\n/workspace/.venv/bin/python -m pip install --index-url https://test.pypi.org/simple cwl-wrapper\\n\\n/workspace/.venv/bin/python -m ipykernel install --user --name stac_env --display-name \"Python (STAC)\"\\n\\nexport AWS_DEFAULT_REGION=\"us-east-1\"\\nexport AWS_ACCESS_KEY_ID=\"test\"\\nexport AWS_SECRET_ACCESS_KEY=\"test\"\\naws s3 mb s3://results --endpoint-url=http://localstack:4566\\n\\nexit 0', persist=False), ConfigMap(name='bash-rc', key='bash-rc', mount_path='/workspace/.bashrc', default_mode=None, readonly=True, content='alias ll=\"ls -l\"\\nalias calrissian=\"/opt/conda/bin/calrissian --pod-nodeselectors /etc/calrissian/pod-node-selector.yml --stdout /calrissian/results.json --max-ram 16G --max-cores \"8\" --tmp-outdir-prefix /calrissian/tmp/ --outdir /calrissian/\"\\nalias cwltool=\"/opt/conda/bin/cwltool --podman\"\\n. /home/jovyan/.bashrc\\n\\n#alias aws=\"aws --endpoint-url=http://localstack:4566\"\\n\\n# &gt;&gt;&gt; conda initialize &gt;&gt;&gt;\\n# !! Contents within this block are managed by \\'conda init\\' !!\\n__conda_setup=\"$(\\'/opt/conda/bin/conda\\' \\'shell.bash\\' \\'hook\\' 2&gt; /dev/null)\"\\nif [ $? -eq 0 ]; then\\n    eval \"$__conda_setup\"\\nelse\\n    if [ -f \"/opt/conda/etc/profile.d/conda.sh\" ]; then\\n        . \"/opt/conda/etc/profile.d/conda.sh\"\\n    else\\n        export PATH=\"/srv/conda/bin:$PATH\"\\n    fi\\nfi\\nunset __conda_setup\\n\\nif [ -f \"/opt/conda/etc/profile.d/mamba.sh\" ]; then\\n    . \"/opt/conda/etc/profile.d/mamba.sh\"\\nfi\\n# &lt;&lt;&lt; conda initialize &lt;&lt;&lt;\\n\\na={{spawner.user.name}}\\n\\nalias aws=\"aws --endpoint-url=http://localstack-jupyter-{{spawner.user.name}}:4566\"', persist=False), ConfigMap(name='bash-login', key='bash-login', mount_path='/workspace/.bash_login', default_mode=None, readonly=True, content='source /workspace/.bashrc\\n', persist=False)], volumes=[Volume(name='workspace-volume', claim_name='workspace-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteOnce'], volume_mount=VolumeMount(name='workspace-volume', mount_path='/workspace'), persist=True)], pod_env_vars={'HOME': '/workspace', 'CONDA_ENVS_PATH': '/workspace/.envs', 'CONDARC': '/workspace/.condarc', 'XDG_RUNTIME_DIR': '/workspace/.local', 'XDG_CONFIG_HOME': '/workspace/.local', 'XDG_DATA_HOME': '/workspace/.local/share/', 'CWLTOOL_OPTIONS': '--podman', 'CODE_SERVER_WS': '/workspace/stac-eoap', 'AWS_DEFAULT_REGION': 'us-east-1', 'AWS_ACCESS_KEY_ID': 'test', 'AWS_SECRET_ACCESS_KEY': 'test'}, default_url=None, node_selector={}, role_bindings=[], image_pull_secrets=[ImagePullSecret(name='cr-config', persist=False, data='ewogICAgImF1dGhzIjogewogICAgICAgICJjci50ZXJyYWR1ZS5jb20iOiB7CiAgICAgICAgICAgICJ1c2VybmFtZSI6ICJyb2JvdCRlb2VwY2EtcGx1cy1ybyIsCiAgICAgICAgICAgICJwYXNzd29yZCI6ICJQMlE4TnkyZ0lHODhkZkxveXlLN05QVUZVbHJOekFZSiIsCiAgICAgICAgICAgICJlbWFpbCI6ICJlb2VwY2EtcGx1c0B0ZXJyYWR1ZS5jb20iLAogICAgICAgICAgICAiYXV0aCI6ICJjbTlpYjNRa1pXOWxjR05oTFhCc2RYTXRjbTg2VURKUk9FNTVNbWRKUnpnNFpHWk1iM2w1U3pkT1VGVkdWV3h5VG5wQldVbz0iCiAgICAgICAgfQogICAgfQp9')], init_containers=[InitContainer(name='init-file-on-volume', image='eoepca/pde-code-server:develop', command=['sh', '-c', 'sh /opt/init/.init.sh'], volume_mounts=[VolumeMount(name='workspace-volume', mount_path='/workspace'), InitContainerVolumeMount(name='init', mount_path='/opt/init/.init.sh', sub_path='init')])], manifests=[Manifest(name='manifests', key='manifests', content=[{'apiVersion': 'v1', 'kind': 'ServiceAccount', 'metadata': {'name': 'localstack'}}, {'apiVersion': 'rbac.authorization.k8s.io/v1', 'kind': 'Role', 'metadata': {'name': 'localstack'}, 'rules': [{'apiGroups': [''], 'resources': ['pods'], 'verbs': ['*']}, {'apiGroups': [''], 'resources': ['pods/log'], 'verbs': ['get']}, {'apiGroups': [''], 'resources': ['pods/exec'], 'verbs': ['get', 'create']}, {'apiGroups': [''], 'resources': ['services'], 'verbs': ['get', 'list']}]}, {'apiVersion': 'rbac.authorization.k8s.io/v1', 'kind': 'RoleBinding', 'metadata': {'name': 'localstack'}, 'subjects': [{'kind': 'ServiceAccount', 'name': 'localstack'}], 'roleRef': {'kind': 'Role', 'name': 'localstack', 'apiGroup': 'rbac.authorization.k8s.io'}}, {'apiVersion': 'v1', 'kind': 'Service', 'metadata': {'name': 'localstack'}, 'spec': {'type': 'ClusterIP', 'ports': [{'name': 'edge', 'port': 4566, 'targetPort': 4566}, {'name': 'external-service-port-4510', 'port': 4510, 'targetPort': 'ext-svc-4510'}, {'name': 'external-service-port-4511', 'port': 4511, 'targetPort': 'ext-svc-4511'}, {'name': 'external-service-port-4512', 'port': 4512, 'targetPort': 'ext-svc-4512'}, {'name': 'external-service-port-4513', 'port': 4513, 'targetPort': 'ext-svc-4513'}, {'name': 'external-service-port-4514', 'port': 4514, 'targetPort': 'ext-svc-4514'}, {'name': 'external-service-port-4515', 'port': 4515, 'targetPort': 'ext-svc-4515'}, {'name': 'external-service-port-4516', 'port': 4516, 'targetPort': 'ext-svc-4516'}, {'name': 'external-service-port-4517', 'port': 4517, 'targetPort': 'ext-svc-4517'}, {'name': 'external-service-port-4518', 'port': 4518, 'targetPort': 'ext-svc-4518'}, {'name': 'external-service-port-4519', 'port': 4519, 'targetPort': 'ext-svc-4519'}, {'name': 'external-service-port-4520', 'port': 4520, 'targetPort': 'ext-svc-4520'}, {'name': 'external-service-port-4521', 'port': 4521, 'targetPort': 'ext-svc-4521'}, {'name': 'external-service-port-4522', 'port': 4522, 'targetPort': 'ext-svc-4522'}, {'name': 'external-service-port-4523', 'port': 4523, 'targetPort': 'ext-svc-4523'}, {'name': 'external-service-port-4524', 'port': 4524, 'targetPort': 'ext-svc-4524'}, {'name': 'external-service-port-4525', 'port': 4525, 'targetPort': 'ext-svc-4525'}, {'name': 'external-service-port-4526', 'port': 4526, 'targetPort': 'ext-svc-4526'}, {'name': 'external-service-port-4527', 'port': 4527, 'targetPort': 'ext-svc-4527'}, {'name': 'external-service-port-4528', 'port': 4528, 'targetPort': 'ext-svc-4528'}, {'name': 'external-service-port-4529', 'port': 4529, 'targetPort': 'ext-svc-4529'}, {'name': 'external-service-port-4530', 'port': 4530, 'targetPort': 'ext-svc-4530'}, {'name': 'external-service-port-4531', 'port': 4531, 'targetPort': 'ext-svc-4531'}, {'name': 'external-service-port-4532', 'port': 4532, 'targetPort': 'ext-svc-4532'}, {'name': 'external-service-port-4533', 'port': 4533, 'targetPort': 'ext-svc-4533'}, {'name': 'external-service-port-4534', 'port': 4534, 'targetPort': 'ext-svc-4534'}, {'name': 'external-service-port-4535', 'port': 4535, 'targetPort': 'ext-svc-4535'}, {'name': 'external-service-port-4536', 'port': 4536, 'targetPort': 'ext-svc-4536'}, {'name': 'external-service-port-4537', 'port': 4537, 'targetPort': 'ext-svc-4537'}, {'name': 'external-service-port-4538', 'port': 4538, 'targetPort': 'ext-svc-4538'}, {'name': 'external-service-port-4539', 'port': 4539, 'targetPort': 'ext-svc-4539'}, {'name': 'external-service-port-4540', 'port': 4540, 'targetPort': 'ext-svc-4540'}, {'name': 'external-service-port-4541', 'port': 4541, 'targetPort': 'ext-svc-4541'}, {'name': 'external-service-port-4542', 'port': 4542, 'targetPort': 'ext-svc-4542'}, {'name': 'external-service-port-4543', 'port': 4543, 'targetPort': 'ext-svc-4543'}, {'name': 'external-service-port-4544', 'port': 4544, 'targetPort': 'ext-svc-4544'}, {'name': 'external-service-port-4545', 'port': 4545, 'targetPort': 'ext-svc-4545'}, {'name': 'external-service-port-4546', 'port': 4546, 'targetPort': 'ext-svc-4546'}, {'name': 'external-service-port-4547', 'port': 4547, 'targetPort': 'ext-svc-4547'}, {'name': 'external-service-port-4548', 'port': 4548, 'targetPort': 'ext-svc-4548'}, {'name': 'external-service-port-4549', 'port': 4549, 'targetPort': 'ext-svc-4549'}, {'name': 'external-service-port-4550', 'port': 4550, 'targetPort': 'ext-svc-4550'}, {'name': 'external-service-port-4551', 'port': 4551, 'targetPort': 'ext-svc-4551'}, {'name': 'external-service-port-4552', 'port': 4552, 'targetPort': 'ext-svc-4552'}, {'name': 'external-service-port-4553', 'port': 4553, 'targetPort': 'ext-svc-4553'}, {'name': 'external-service-port-4554', 'port': 4554, 'targetPort': 'ext-svc-4554'}, {'name': 'external-service-port-4555', 'port': 4555, 'targetPort': 'ext-svc-4555'}, {'name': 'external-service-port-4556', 'port': 4556, 'targetPort': 'ext-svc-4556'}, {'name': 'external-service-port-4557', 'port': 4557, 'targetPort': 'ext-svc-4557'}, {'name': 'external-service-port-4558', 'port': 4558, 'targetPort': 'ext-svc-4558'}, {'name': 'external-service-port-4559', 'port': 4559, 'targetPort': 'ext-svc-4559'}], 'selector': {'app.kubernetes.io/name': 'localstack', 'app.kubernetes.io/instance': 'localstack'}}}, {'apiVersion': 'apps/v1', 'kind': 'Deployment', 'metadata': {'name': 'localstack'}, 'spec': {'replicas': 1, 'strategy': {'type': 'RollingUpdate'}, 'selector': {'matchLabels': {'app.kubernetes.io/name': 'localstack', 'app.kubernetes.io/instance': 'localstack'}}, 'template': {'metadata': {'labels': {'app': 'localstack-{{ spawner.user.name }}', 'app.kubernetes.io/name': 'localstack', 'app.kubernetes.io/instance': 'localstack'}}, 'spec': {'serviceAccountName': 'localstack', 'securityContext': {}, 'containers': [{'name': 'localstack', 'securityContext': {}, 'image': 'localstack/localstack:latest', 'imagePullPolicy': 'IfNotPresent', 'ports': [{'name': 'edge', 'containerPort': 4566, 'protocol': 'TCP'}, {'name': 'ext-svc-4510', 'containerPort': 4510, 'protocol': 'TCP'}, {'name': 'ext-svc-4511', 'containerPort': 4511, 'protocol': 'TCP'}, {'name': 'ext-svc-4512', 'containerPort': 4512, 'protocol': 'TCP'}, {'name': 'ext-svc-4513', 'containerPort': 4513, 'protocol': 'TCP'}, {'name': 'ext-svc-4514', 'containerPort': 4514, 'protocol': 'TCP'}, {'name': 'ext-svc-4515', 'containerPort': 4515, 'protocol': 'TCP'}, {'name': 'ext-svc-4516', 'containerPort': 4516, 'protocol': 'TCP'}, {'name': 'ext-svc-4517', 'containerPort': 4517, 'protocol': 'TCP'}, {'name': 'ext-svc-4518', 'containerPort': 4518, 'protocol': 'TCP'}, {'name': 'ext-svc-4519', 'containerPort': 4519, 'protocol': 'TCP'}, {'name': 'ext-svc-4520', 'containerPort': 4520, 'protocol': 'TCP'}, {'name': 'ext-svc-4521', 'containerPort': 4521, 'protocol': 'TCP'}, {'name': 'ext-svc-4522', 'containerPort': 4522, 'protocol': 'TCP'}, {'name': 'ext-svc-4523', 'containerPort': 4523, 'protocol': 'TCP'}, {'name': 'ext-svc-4524', 'containerPort': 4524, 'protocol': 'TCP'}, {'name': 'ext-svc-4525', 'containerPort': 4525, 'protocol': 'TCP'}, {'name': 'ext-svc-4526', 'containerPort': 4526, 'protocol': 'TCP'}, {'name': 'ext-svc-4527', 'containerPort': 4527, 'protocol': 'TCP'}, {'name': 'ext-svc-4528', 'containerPort': 4528, 'protocol': 'TCP'}, {'name': 'ext-svc-4529', 'containerPort': 4529, 'protocol': 'TCP'}, {'name': 'ext-svc-4530', 'containerPort': 4530, 'protocol': 'TCP'}, {'name': 'ext-svc-4531', 'containerPort': 4531, 'protocol': 'TCP'}, {'name': 'ext-svc-4532', 'containerPort': 4532, 'protocol': 'TCP'}, {'name': 'ext-svc-4533', 'containerPort': 4533, 'protocol': 'TCP'}, {'name': 'ext-svc-4534', 'containerPort': 4534, 'protocol': 'TCP'}, {'name': 'ext-svc-4535', 'containerPort': 4535, 'protocol': 'TCP'}, {'name': 'ext-svc-4536', 'containerPort': 4536, 'protocol': 'TCP'}, {'name': 'ext-svc-4537', 'containerPort': 4537, 'protocol': 'TCP'}, {'name': 'ext-svc-4538', 'containerPort': 4538, 'protocol': 'TCP'}, {'name': 'ext-svc-4539', 'containerPort': 4539, 'protocol': 'TCP'}, {'name': 'ext-svc-4540', 'containerPort': 4540, 'protocol': 'TCP'}, {'name': 'ext-svc-4541', 'containerPort': 4541, 'protocol': 'TCP'}, {'name': 'ext-svc-4542', 'containerPort': 4542, 'protocol': 'TCP'}, {'name': 'ext-svc-4543', 'containerPort': 4543, 'protocol': 'TCP'}, {'name': 'ext-svc-4544', 'containerPort': 4544, 'protocol': 'TCP'}, {'name': 'ext-svc-4545', 'containerPort': 4545, 'protocol': 'TCP'}, {'name': 'ext-svc-4546', 'containerPort': 4546, 'protocol': 'TCP'}, {'name': 'ext-svc-4547', 'containerPort': 4547, 'protocol': 'TCP'}, {'name': 'ext-svc-4548', 'containerPort': 4548, 'protocol': 'TCP'}, {'name': 'ext-svc-4549', 'containerPort': 4549, 'protocol': 'TCP'}, {'name': 'ext-svc-4550', 'containerPort': 4550, 'protocol': 'TCP'}, {'name': 'ext-svc-4551', 'containerPort': 4551, 'protocol': 'TCP'}, {'name': 'ext-svc-4552', 'containerPort': 4552, 'protocol': 'TCP'}, {'name': 'ext-svc-4553', 'containerPort': 4553, 'protocol': 'TCP'}, {'name': 'ext-svc-4554', 'containerPort': 4554, 'protocol': 'TCP'}, {'name': 'ext-svc-4555', 'containerPort': 4555, 'protocol': 'TCP'}, {'name': 'ext-svc-4556', 'containerPort': 4556, 'protocol': 'TCP'}, {'name': 'ext-svc-4557', 'containerPort': 4557, 'protocol': 'TCP'}, {'name': 'ext-svc-4558', 'containerPort': 4558, 'protocol': 'TCP'}, {'name': 'ext-svc-4559', 'containerPort': 4559, 'protocol': 'TCP'}], 'livenessProbe': {'failureThreshold': 3, 'initialDelaySeconds': 0, 'periodSeconds': 10, 'successThreshold': 1, 'timeoutSeconds': 1, 'httpGet': {'path': '/_localstack/health', 'port': 'edge'}}, 'readinessProbe': {'failureThreshold': 3, 'initialDelaySeconds': 0, 'periodSeconds': 10, 'successThreshold': 1, 'timeoutSeconds': 1, 'httpGet': {'path': '/_localstack/health', 'port': 'edge'}}, 'resources': {}, 'env': [{'name': 'DEBUG', 'value': '0'}, {'name': 'EXTERNAL_SERVICE_PORTS_START', 'value': '4510'}, {'name': 'EXTERNAL_SERVICE_PORTS_END', 'value': '4560'}, {'name': 'LOCALSTACK_K8S_SERVICE_NAME', 'value': 'localstack'}, {'name': 'LOCALSTACK_K8S_NAMESPACE', 'valueFrom': {'fieldRef': {'fieldPath': 'metadata.namespace'}}}, {'name': 'LAMBDA_RUNTIME_EXECUTOR', 'value': 'docker'}, {'name': 'LAMBDA_K8S_IMAGE_PREFIX', 'value': 'localstack/lambda-'}, {'name': 'LAMBDA_RUNTIME_ENVIRONMENT_TIMEOUT', 'value': '60'}, {'name': 'OVERRIDE_IN_DOCKER', 'value': '1'}]}], 'volumes': []}}}}, {'apiVersion': 'v1', 'kind': 'ConfigMap', 'metadata': {'name': 'my-config'}, 'data': {'ENV_VAR1': 'value1', 'ENV_VAR2': 'value2'}}, {'apiVersion': 'v1', 'kind': 'Secret', 'metadata': {'name': 'my-secret'}, 'type': 'Opaque', 'data': {'SECRET_KEY1': 'dmFsdWUx', 'SECRET_KEY2': 'dmFsdWUy'}}, {'apiVersion': 'v1', 'kind': 'Secret', 'metadata': {'name': 'aws-credentials-{{ spawner.user.name }}'}, 'type': 'Opaque', 'data': {'credentials': 'W2RlZmF1bHRdCmF3c19hY2Nlc3Nfa2V5X2lkPUFTSUFJT1NGT0ROTjdFWEFNUExFCmF3c19zZWNyZXRfYWNjZXNzX2tleT13SmFsclhVdG5GRU1JL0s3TURFTkcvYlB4UmZpQ1lFWEFNUExFS0VZCmF3c19zZXNzaW9uX3Rva2VuPUlRb0piM2pySmdCV05FTE5Hb2xHSkxFT3RTVEFOR1k0TFlPNUk0SzVOUlZFS1pPTkNTTk1HRlNUS1FNSUxXUjJPUzAwRklDRTExSlg='}}, {'apiVersion': 'external-secrets.io/v1beta1', 'kind': 'ExternalSecret', 'metadata': {'name': 'data-by-name', 'namespace': 'jupyter-{{ spawner.user.name }}'}, 'spec': {'refreshInterval': '15s', 'secretStoreRef': {'kind': 'ClusterSecretStore', 'name': 'k8s-secret-store'}, 'target': {'name': 'data-by-name', 'creationPolicy': 'Owner'}, 'data': [{'secretKey': 'secret-value', 'remoteRef': {'key': 'secret-one', 'property': 'the-key'}}]}}, {'apiVersion': 'external-secrets.io/v1beta1', 'kind': 'ExternalSecret', 'metadata': {'name': 'eoepca-plus-secret-ro', 'namespace': 'jupyter-{{ spawner.user.name }}'}, 'spec': {'refreshInterval': '15s', 'secretStoreRef': {'kind': 'ClusterSecretStore', 'name': 'k8s-secret-store'}, 'target': {'name': 'eoepca-plus-secret-ro', 'creationPolicy': 'Owner'}, 'data': [{'secretKey': '.dockerconfigjson', 'remoteRef': {'key': 'eoepca-plus-secret-ro', 'property': '.dockerconfigjson'}}]}}], persist=False)], env_from_config_maps=None, env_from_secrets=None, secret_mounts=None)]</pre> In\u00a0[16]: Copied! <pre>image = \"eoepca/iga-remote-desktop-qgis:1.1.3\"\n\nqgis_profile = Profile( # type: ignore\n    id=\"profile_studio_desktop_qgis\",\n    groups=[\"group-a\", \"group-b\"],\n    definition=ProfileDefinition( # type: ignore\n        display_name=\"QGIS on a Remote Desktop\",\n        description=\"Spatial visualization and decision-making tools for everyone\",\n        slug=\"eoepca_desktop_qgis\",\n        default=False,\n        kubespawner_override=KubespawnerOverride( # type: ignore\n            cpu_limit=2,\n            mem_limit=\"2G\",\n            image=image,\n        ),\n    ),\n    node_selector={},\n    volumes=[workspace_volume],\n    config_maps=[bash_rc_cm, bash_login_cm],\n    pod_env_vars={\"HOME\": \"/workspace\"},\n    default_url=\"desktop\",\n    init_containers=[],\n)\n\nprofiles.append(qgis_profile)\nprofiles\n</pre> image = \"eoepca/iga-remote-desktop-qgis:1.1.3\"  qgis_profile = Profile( # type: ignore     id=\"profile_studio_desktop_qgis\",     groups=[\"group-a\", \"group-b\"],     definition=ProfileDefinition( # type: ignore         display_name=\"QGIS on a Remote Desktop\",         description=\"Spatial visualization and decision-making tools for everyone\",         slug=\"eoepca_desktop_qgis\",         default=False,         kubespawner_override=KubespawnerOverride( # type: ignore             cpu_limit=2,             mem_limit=\"2G\",             image=image,         ),     ),     node_selector={},     volumes=[workspace_volume],     config_maps=[bash_rc_cm, bash_login_cm],     pod_env_vars={\"HOME\": \"/workspace\"},     default_url=\"desktop\",     init_containers=[], )  profiles.append(qgis_profile) profiles Out[16]: <pre>[Profile(id='profile_studio_coder1', groups=['group-a', 'group-b'], definition=ProfileDefinition(display_name='Code Server Small', description=None, slug='ellip_studio_coder_slug_s', default=False, kubespawner_override=KubespawnerOverride(cpu_limit=2, cpu_guarantee=None, mem_limit='8G', mem_guarantee=None, image='eoepca/pde-code-server:develop', extra_resource_limits={}, extra_resource_guarantees={})), config_maps=[ConfigMap(name='bash-rc', key='bash-rc', mount_path='/workspace/.bashrc', default_mode=None, readonly=True, content='alias ll=\"ls -l\"\\nalias calrissian=\"/opt/conda/bin/calrissian --pod-nodeselectors /etc/calrissian/pod-node-selector.yml --stdout /calrissian/results.json --max-ram 16G --max-cores \"8\" --tmp-outdir-prefix /calrissian/tmp/ --outdir /calrissian/\"\\nalias cwltool=\"/opt/conda/bin/cwltool --podman\"\\n. /home/jovyan/.bashrc\\n\\n#alias aws=\"aws --endpoint-url=http://localstack:4566\"\\n\\n# &gt;&gt;&gt; conda initialize &gt;&gt;&gt;\\n# !! Contents within this block are managed by \\'conda init\\' !!\\n__conda_setup=\"$(\\'/opt/conda/bin/conda\\' \\'shell.bash\\' \\'hook\\' 2&gt; /dev/null)\"\\nif [ $? -eq 0 ]; then\\n    eval \"$__conda_setup\"\\nelse\\n    if [ -f \"/opt/conda/etc/profile.d/conda.sh\" ]; then\\n        . \"/opt/conda/etc/profile.d/conda.sh\"\\n    else\\n        export PATH=\"/srv/conda/bin:$PATH\"\\n    fi\\nfi\\nunset __conda_setup\\n\\nif [ -f \"/opt/conda/etc/profile.d/mamba.sh\" ]; then\\n    . \"/opt/conda/etc/profile.d/mamba.sh\"\\nfi\\n# &lt;&lt;&lt; conda initialize &lt;&lt;&lt;\\n\\na={{spawner.user.name}}\\n\\nalias aws=\"aws --endpoint-url=http://localstack-jupyter-{{spawner.user.name}}:4566\"', persist=False)], volumes=[Volume(name='calrissian-volume', claim_name='calrissian-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteMany'], volume_mount=VolumeMount(name='calrissian-volume', mount_path='/calrissian'), persist=False), Volume(name='workspace-volume', claim_name='workspace-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteOnce'], volume_mount=VolumeMount(name='workspace-volume', mount_path='/workspace'), persist=True)], pod_env_vars={'HOME': '/workspace', 'CONDA_ENVS_PATH': '/workspace/.envs'}, default_url=None, node_selector={}, role_bindings=None, image_pull_secrets=[], init_containers=[], manifests=None, env_from_config_maps=None, env_from_secrets=None, secret_mounts=None),\n Profile(id='profile_studio_coder2', groups=['group-a', 'group-b'], definition=ProfileDefinition(display_name='Code Server Medium', description=None, slug='ellip_studio_coder_slug_m', default=False, kubespawner_override=KubespawnerOverride(cpu_limit=4, cpu_guarantee=None, mem_limit='12G', mem_guarantee=None, image='eoepca/pde-code-server:develop', extra_resource_limits={}, extra_resource_guarantees={})), config_maps=[ConfigMap(name='bash-rc', key='bash-rc', mount_path='/workspace/.bashrc', default_mode=None, readonly=True, content='alias ll=\"ls -l\"\\nalias calrissian=\"/opt/conda/bin/calrissian --pod-nodeselectors /etc/calrissian/pod-node-selector.yml --stdout /calrissian/results.json --max-ram 16G --max-cores \"8\" --tmp-outdir-prefix /calrissian/tmp/ --outdir /calrissian/\"\\nalias cwltool=\"/opt/conda/bin/cwltool --podman\"\\n. /home/jovyan/.bashrc\\n\\n#alias aws=\"aws --endpoint-url=http://localstack:4566\"\\n\\n# &gt;&gt;&gt; conda initialize &gt;&gt;&gt;\\n# !! Contents within this block are managed by \\'conda init\\' !!\\n__conda_setup=\"$(\\'/opt/conda/bin/conda\\' \\'shell.bash\\' \\'hook\\' 2&gt; /dev/null)\"\\nif [ $? -eq 0 ]; then\\n    eval \"$__conda_setup\"\\nelse\\n    if [ -f \"/opt/conda/etc/profile.d/conda.sh\" ]; then\\n        . \"/opt/conda/etc/profile.d/conda.sh\"\\n    else\\n        export PATH=\"/srv/conda/bin:$PATH\"\\n    fi\\nfi\\nunset __conda_setup\\n\\nif [ -f \"/opt/conda/etc/profile.d/mamba.sh\" ]; then\\n    . \"/opt/conda/etc/profile.d/mamba.sh\"\\nfi\\n# &lt;&lt;&lt; conda initialize &lt;&lt;&lt;\\n\\na={{spawner.user.name}}\\n\\nalias aws=\"aws --endpoint-url=http://localstack-jupyter-{{spawner.user.name}}:4566\"', persist=False)], volumes=[Volume(name='calrissian-volume', claim_name='calrissian-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteMany'], volume_mount=VolumeMount(name='calrissian-volume', mount_path='/calrissian'), persist=False), Volume(name='workspace-volume', claim_name='workspace-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteOnce'], volume_mount=VolumeMount(name='workspace-volume', mount_path='/workspace'), persist=True)], pod_env_vars={'HOME': '/workspace', 'CONDA_ENVS_PATH': '/workspace/.envs'}, default_url=None, node_selector={}, role_bindings=None, image_pull_secrets=[], init_containers=[], manifests=None, env_from_config_maps=None, env_from_secrets=None, secret_mounts=None),\n Profile(id='profile_demo_init_script', groups=['group-a', 'group-b'], definition=ProfileDefinition(display_name='Coder demo init script', description='This profile is used to demonstrate the use of an init script', slug='eoepca_demo_init_script', default=False, kubespawner_override=KubespawnerOverride(cpu_limit=2, cpu_guarantee=1, mem_limit='6G', mem_guarantee='4G', image='eoepca/pde-code-server:develop', extra_resource_limits={}, extra_resource_guarantees={})), config_maps=[ConfigMap(name='init', key='init', mount_path='/opt/init/.init.sh', default_mode='0660', readonly=True, content=\"set -x\\n\\ncd /workspace\\n\\ngit clone 'https://github.com/eoap/mastering-app-package.git'\\n\\ncode-server --install-extension ms-python.python\\ncode-server --install-extension redhat.vscode-yaml\\ncode-server --install-extension sbg-rabix.benten-cwl\\ncode-server --install-extension ms-toolsai.jupyter\\n\\nln -s /workspace/.local/share/code-server/extensions /workspace/extensions\\n\\nexit 0\\n\", persist=False)], volumes=[Volume(name='calrissian-volume', claim_name='calrissian-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteMany'], volume_mount=VolumeMount(name='calrissian-volume', mount_path='/calrissian'), persist=False), Volume(name='workspace-volume', claim_name='workspace-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteOnce'], volume_mount=VolumeMount(name='workspace-volume', mount_path='/workspace'), persist=True)], pod_env_vars={'HOME': '/workspace', 'CONDA_ENVS_PATH': '/workspace/.envs', 'CONDARC': '/workspace/.condarc', 'XDG_RUNTIME_DIR': '/workspace/.local', 'CODE_SERVER_WS': '/workspace/mastering-app-package'}, default_url=None, node_selector={}, role_bindings=None, image_pull_secrets=[], init_containers=[InitContainer(name='init-file-on-volume', image='eoepca/pde-code-server:develop', command=['sh', '-c', 'sh /opt/init/.init.sh'], volume_mounts=[VolumeMount(name='workspace-volume', mount_path='/workspace'), InitContainerVolumeMount(name='init', mount_path='/opt/init/.init.sh', sub_path='init')])], manifests=None, env_from_config_maps=None, env_from_secrets=None, secret_mounts=None),\n Profile(id='profile_jupyter_lab', groups=['group-c'], definition=ProfileDefinition(display_name='Jupyter Lab', description='Jupyter Lab with Python 3.11', slug='eoepca_jupyter_lab', default=False, kubespawner_override=KubespawnerOverride(cpu_limit=2, cpu_guarantee=1, mem_limit='6G', mem_guarantee='4G', image='jupyter/scipy-notebook', extra_resource_limits={}, extra_resource_guarantees={})), config_maps=[], volumes=[Volume(name='workspace-volume', claim_name='workspace-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteOnce'], volume_mount=VolumeMount(name='workspace-volume', mount_path='/workspace'), persist=True)], pod_env_vars={'HOME': '/workspace', 'XDG_RUNTIME_DIR': '/workspace/.local', 'XDG_CONFIG_HOME': '/workspace/.config'}, default_url=None, node_selector={}, role_bindings=None, image_pull_secrets=[], init_containers=[], manifests=None, env_from_config_maps=None, env_from_secrets=None, secret_mounts=None),\n Profile(id='profile_jupyter_lab_2', groups=['group-c'], definition=ProfileDefinition(display_name='Jupyter Lab - profile 2', description='Jupyter Lab with Python 3.11 private image - demoes the use of an image pull secret', slug='eoepca_jupyter_lab_2', default=False, kubespawner_override=KubespawnerOverride(cpu_limit=2, cpu_guarantee=1, mem_limit='6G', mem_guarantee='4G', image='eoepca/iat-jupyterlab:develop', extra_resource_limits={}, extra_resource_guarantees={})), config_maps=[], volumes=[Volume(name='workspace-volume', claim_name='workspace-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteOnce'], volume_mount=VolumeMount(name='workspace-volume', mount_path='/workspace'), persist=True)], pod_env_vars={'HOME': '/workspace', 'XDG_RUNTIME_DIR': '/workspace/.local', 'XDG_CONFIG_HOME': '/workspace/.config'}, default_url=None, node_selector={}, role_bindings=None, image_pull_secrets=[ImagePullSecret(name='cr-config', persist=False, data='ewogICAgImF1dGhzIjogewogICAgICAgICJjci50ZXJyYWR1ZS5jb20iOiB7CiAgICAgICAgICAgICJ1c2VybmFtZSI6ICJyb2JvdCRlb2VwY2EtcGx1cy1ybyIsCiAgICAgICAgICAgICJwYXNzd29yZCI6ICJQMlE4TnkyZ0lHODhkZkxveXlLN05QVUZVbHJOekFZSiIsCiAgICAgICAgICAgICJlbWFpbCI6ICJlb2VwY2EtcGx1c0B0ZXJyYWR1ZS5jb20iLAogICAgICAgICAgICAiYXV0aCI6ICJjbTlpYjNRa1pXOWxjR05oTFhCc2RYTXRjbTg2VURKUk9FNTVNbWRKUnpnNFpHWk1iM2w1U3pkT1VGVkdWV3h5VG5wQldVbz0iCiAgICAgICAgfQogICAgfQp9')], init_containers=[], manifests=None, env_from_config_maps=None, env_from_secrets=None, secret_mounts=None),\n Profile(id='profile_studio_coder_stac', groups=['group-a', 'group-b'], definition=ProfileDefinition(display_name='Understanding STAC for input/output data modelling', description='Understand the role of STAC in input/output data manifests in EO data processing workflows', slug='eoepca_coder_slug_stac', default=False, kubespawner_override=KubespawnerOverride(cpu_limit=2, cpu_guarantee=1, mem_limit='6G', mem_guarantee='4G', image='docker.io/eoepca/pde-code-server@sha256:f57a3d5eabcae667e0db6e84a57b0c07c692c88f0fb5c8f6900ab8d5e38fcd40', extra_resource_limits={}, extra_resource_guarantees={})), config_maps=[ConfigMap(name='init', key='init', mount_path='/opt/init/.init.sh', default_mode=None, readonly=True, content='set -x \\n\\ncd /workspace\\n\\ngit clone \\'https://github.com/eoap/stac-eoap.git\\'\\n\\ncode-server --install-extension ms-python.python \\ncode-server --install-extension redhat.vscode-yaml\\ncode-server --install-extension sbg-rabix.benten-cwl\\ncode-server --install-extension ms-toolsai.jupyter\\n\\nln -s /workspace/.local/share/code-server/extensions /workspace/extensions\\n\\nmkdir -p /workspace/User/\\n\\necho \\'{\"workbench.colorTheme\": \"Visual Studio Dark\"}\\' &gt; /workspace/User/settings.json\\n\\npython -m venv /workspace/.venv\\nsource /workspace/.venv/bin/activate\\n/workspace/.venv/bin/python -m pip install --no-cache-dir stactools rasterio requests stac-asset click-logging tabulate tqdm pystac-client ipykernel loguru scikit-image rio_stac boto3==1.35.23\\n\\n/workspace/.venv/bin/python -m pip install --index-url https://test.pypi.org/simple cwl-wrapper\\n\\n/workspace/.venv/bin/python -m ipykernel install --user --name stac_env --display-name \"Python (STAC)\"\\n\\nexport AWS_DEFAULT_REGION=\"us-east-1\"\\nexport AWS_ACCESS_KEY_ID=\"test\"\\nexport AWS_SECRET_ACCESS_KEY=\"test\"\\naws s3 mb s3://results --endpoint-url=http://localstack:4566\\n\\nexit 0', persist=False), ConfigMap(name='bash-rc', key='bash-rc', mount_path='/workspace/.bashrc', default_mode=None, readonly=True, content='alias ll=\"ls -l\"\\nalias calrissian=\"/opt/conda/bin/calrissian --pod-nodeselectors /etc/calrissian/pod-node-selector.yml --stdout /calrissian/results.json --max-ram 16G --max-cores \"8\" --tmp-outdir-prefix /calrissian/tmp/ --outdir /calrissian/\"\\nalias cwltool=\"/opt/conda/bin/cwltool --podman\"\\n. /home/jovyan/.bashrc\\n\\n#alias aws=\"aws --endpoint-url=http://localstack:4566\"\\n\\n# &gt;&gt;&gt; conda initialize &gt;&gt;&gt;\\n# !! Contents within this block are managed by \\'conda init\\' !!\\n__conda_setup=\"$(\\'/opt/conda/bin/conda\\' \\'shell.bash\\' \\'hook\\' 2&gt; /dev/null)\"\\nif [ $? -eq 0 ]; then\\n    eval \"$__conda_setup\"\\nelse\\n    if [ -f \"/opt/conda/etc/profile.d/conda.sh\" ]; then\\n        . \"/opt/conda/etc/profile.d/conda.sh\"\\n    else\\n        export PATH=\"/srv/conda/bin:$PATH\"\\n    fi\\nfi\\nunset __conda_setup\\n\\nif [ -f \"/opt/conda/etc/profile.d/mamba.sh\" ]; then\\n    . \"/opt/conda/etc/profile.d/mamba.sh\"\\nfi\\n# &lt;&lt;&lt; conda initialize &lt;&lt;&lt;\\n\\na={{spawner.user.name}}\\n\\nalias aws=\"aws --endpoint-url=http://localstack-jupyter-{{spawner.user.name}}:4566\"', persist=False), ConfigMap(name='bash-login', key='bash-login', mount_path='/workspace/.bash_login', default_mode=None, readonly=True, content='source /workspace/.bashrc\\n', persist=False)], volumes=[Volume(name='workspace-volume', claim_name='workspace-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteOnce'], volume_mount=VolumeMount(name='workspace-volume', mount_path='/workspace'), persist=True)], pod_env_vars={'HOME': '/workspace', 'CONDA_ENVS_PATH': '/workspace/.envs', 'CONDARC': '/workspace/.condarc', 'XDG_RUNTIME_DIR': '/workspace/.local', 'XDG_CONFIG_HOME': '/workspace/.local', 'XDG_DATA_HOME': '/workspace/.local/share/', 'CWLTOOL_OPTIONS': '--podman', 'CODE_SERVER_WS': '/workspace/stac-eoap', 'AWS_DEFAULT_REGION': 'us-east-1', 'AWS_ACCESS_KEY_ID': 'test', 'AWS_SECRET_ACCESS_KEY': 'test'}, default_url=None, node_selector={}, role_bindings=[], image_pull_secrets=[ImagePullSecret(name='cr-config', persist=False, data='ewogICAgImF1dGhzIjogewogICAgICAgICJjci50ZXJyYWR1ZS5jb20iOiB7CiAgICAgICAgICAgICJ1c2VybmFtZSI6ICJyb2JvdCRlb2VwY2EtcGx1cy1ybyIsCiAgICAgICAgICAgICJwYXNzd29yZCI6ICJQMlE4TnkyZ0lHODhkZkxveXlLN05QVUZVbHJOekFZSiIsCiAgICAgICAgICAgICJlbWFpbCI6ICJlb2VwY2EtcGx1c0B0ZXJyYWR1ZS5jb20iLAogICAgICAgICAgICAiYXV0aCI6ICJjbTlpYjNRa1pXOWxjR05oTFhCc2RYTXRjbTg2VURKUk9FNTVNbWRKUnpnNFpHWk1iM2w1U3pkT1VGVkdWV3h5VG5wQldVbz0iCiAgICAgICAgfQogICAgfQp9')], init_containers=[InitContainer(name='init-file-on-volume', image='eoepca/pde-code-server:develop', command=['sh', '-c', 'sh /opt/init/.init.sh'], volume_mounts=[VolumeMount(name='workspace-volume', mount_path='/workspace'), InitContainerVolumeMount(name='init', mount_path='/opt/init/.init.sh', sub_path='init')])], manifests=[Manifest(name='manifests', key='manifests', content=[{'apiVersion': 'v1', 'kind': 'ServiceAccount', 'metadata': {'name': 'localstack'}}, {'apiVersion': 'rbac.authorization.k8s.io/v1', 'kind': 'Role', 'metadata': {'name': 'localstack'}, 'rules': [{'apiGroups': [''], 'resources': ['pods'], 'verbs': ['*']}, {'apiGroups': [''], 'resources': ['pods/log'], 'verbs': ['get']}, {'apiGroups': [''], 'resources': ['pods/exec'], 'verbs': ['get', 'create']}, {'apiGroups': [''], 'resources': ['services'], 'verbs': ['get', 'list']}]}, {'apiVersion': 'rbac.authorization.k8s.io/v1', 'kind': 'RoleBinding', 'metadata': {'name': 'localstack'}, 'subjects': [{'kind': 'ServiceAccount', 'name': 'localstack'}], 'roleRef': {'kind': 'Role', 'name': 'localstack', 'apiGroup': 'rbac.authorization.k8s.io'}}, {'apiVersion': 'v1', 'kind': 'Service', 'metadata': {'name': 'localstack'}, 'spec': {'type': 'ClusterIP', 'ports': [{'name': 'edge', 'port': 4566, 'targetPort': 4566}, {'name': 'external-service-port-4510', 'port': 4510, 'targetPort': 'ext-svc-4510'}, {'name': 'external-service-port-4511', 'port': 4511, 'targetPort': 'ext-svc-4511'}, {'name': 'external-service-port-4512', 'port': 4512, 'targetPort': 'ext-svc-4512'}, {'name': 'external-service-port-4513', 'port': 4513, 'targetPort': 'ext-svc-4513'}, {'name': 'external-service-port-4514', 'port': 4514, 'targetPort': 'ext-svc-4514'}, {'name': 'external-service-port-4515', 'port': 4515, 'targetPort': 'ext-svc-4515'}, {'name': 'external-service-port-4516', 'port': 4516, 'targetPort': 'ext-svc-4516'}, {'name': 'external-service-port-4517', 'port': 4517, 'targetPort': 'ext-svc-4517'}, {'name': 'external-service-port-4518', 'port': 4518, 'targetPort': 'ext-svc-4518'}, {'name': 'external-service-port-4519', 'port': 4519, 'targetPort': 'ext-svc-4519'}, {'name': 'external-service-port-4520', 'port': 4520, 'targetPort': 'ext-svc-4520'}, {'name': 'external-service-port-4521', 'port': 4521, 'targetPort': 'ext-svc-4521'}, {'name': 'external-service-port-4522', 'port': 4522, 'targetPort': 'ext-svc-4522'}, {'name': 'external-service-port-4523', 'port': 4523, 'targetPort': 'ext-svc-4523'}, {'name': 'external-service-port-4524', 'port': 4524, 'targetPort': 'ext-svc-4524'}, {'name': 'external-service-port-4525', 'port': 4525, 'targetPort': 'ext-svc-4525'}, {'name': 'external-service-port-4526', 'port': 4526, 'targetPort': 'ext-svc-4526'}, {'name': 'external-service-port-4527', 'port': 4527, 'targetPort': 'ext-svc-4527'}, {'name': 'external-service-port-4528', 'port': 4528, 'targetPort': 'ext-svc-4528'}, {'name': 'external-service-port-4529', 'port': 4529, 'targetPort': 'ext-svc-4529'}, {'name': 'external-service-port-4530', 'port': 4530, 'targetPort': 'ext-svc-4530'}, {'name': 'external-service-port-4531', 'port': 4531, 'targetPort': 'ext-svc-4531'}, {'name': 'external-service-port-4532', 'port': 4532, 'targetPort': 'ext-svc-4532'}, {'name': 'external-service-port-4533', 'port': 4533, 'targetPort': 'ext-svc-4533'}, {'name': 'external-service-port-4534', 'port': 4534, 'targetPort': 'ext-svc-4534'}, {'name': 'external-service-port-4535', 'port': 4535, 'targetPort': 'ext-svc-4535'}, {'name': 'external-service-port-4536', 'port': 4536, 'targetPort': 'ext-svc-4536'}, {'name': 'external-service-port-4537', 'port': 4537, 'targetPort': 'ext-svc-4537'}, {'name': 'external-service-port-4538', 'port': 4538, 'targetPort': 'ext-svc-4538'}, {'name': 'external-service-port-4539', 'port': 4539, 'targetPort': 'ext-svc-4539'}, {'name': 'external-service-port-4540', 'port': 4540, 'targetPort': 'ext-svc-4540'}, {'name': 'external-service-port-4541', 'port': 4541, 'targetPort': 'ext-svc-4541'}, {'name': 'external-service-port-4542', 'port': 4542, 'targetPort': 'ext-svc-4542'}, {'name': 'external-service-port-4543', 'port': 4543, 'targetPort': 'ext-svc-4543'}, {'name': 'external-service-port-4544', 'port': 4544, 'targetPort': 'ext-svc-4544'}, {'name': 'external-service-port-4545', 'port': 4545, 'targetPort': 'ext-svc-4545'}, {'name': 'external-service-port-4546', 'port': 4546, 'targetPort': 'ext-svc-4546'}, {'name': 'external-service-port-4547', 'port': 4547, 'targetPort': 'ext-svc-4547'}, {'name': 'external-service-port-4548', 'port': 4548, 'targetPort': 'ext-svc-4548'}, {'name': 'external-service-port-4549', 'port': 4549, 'targetPort': 'ext-svc-4549'}, {'name': 'external-service-port-4550', 'port': 4550, 'targetPort': 'ext-svc-4550'}, {'name': 'external-service-port-4551', 'port': 4551, 'targetPort': 'ext-svc-4551'}, {'name': 'external-service-port-4552', 'port': 4552, 'targetPort': 'ext-svc-4552'}, {'name': 'external-service-port-4553', 'port': 4553, 'targetPort': 'ext-svc-4553'}, {'name': 'external-service-port-4554', 'port': 4554, 'targetPort': 'ext-svc-4554'}, {'name': 'external-service-port-4555', 'port': 4555, 'targetPort': 'ext-svc-4555'}, {'name': 'external-service-port-4556', 'port': 4556, 'targetPort': 'ext-svc-4556'}, {'name': 'external-service-port-4557', 'port': 4557, 'targetPort': 'ext-svc-4557'}, {'name': 'external-service-port-4558', 'port': 4558, 'targetPort': 'ext-svc-4558'}, {'name': 'external-service-port-4559', 'port': 4559, 'targetPort': 'ext-svc-4559'}], 'selector': {'app.kubernetes.io/name': 'localstack', 'app.kubernetes.io/instance': 'localstack'}}}, {'apiVersion': 'apps/v1', 'kind': 'Deployment', 'metadata': {'name': 'localstack'}, 'spec': {'replicas': 1, 'strategy': {'type': 'RollingUpdate'}, 'selector': {'matchLabels': {'app.kubernetes.io/name': 'localstack', 'app.kubernetes.io/instance': 'localstack'}}, 'template': {'metadata': {'labels': {'app': 'localstack-{{ spawner.user.name }}', 'app.kubernetes.io/name': 'localstack', 'app.kubernetes.io/instance': 'localstack'}}, 'spec': {'serviceAccountName': 'localstack', 'securityContext': {}, 'containers': [{'name': 'localstack', 'securityContext': {}, 'image': 'localstack/localstack:latest', 'imagePullPolicy': 'IfNotPresent', 'ports': [{'name': 'edge', 'containerPort': 4566, 'protocol': 'TCP'}, {'name': 'ext-svc-4510', 'containerPort': 4510, 'protocol': 'TCP'}, {'name': 'ext-svc-4511', 'containerPort': 4511, 'protocol': 'TCP'}, {'name': 'ext-svc-4512', 'containerPort': 4512, 'protocol': 'TCP'}, {'name': 'ext-svc-4513', 'containerPort': 4513, 'protocol': 'TCP'}, {'name': 'ext-svc-4514', 'containerPort': 4514, 'protocol': 'TCP'}, {'name': 'ext-svc-4515', 'containerPort': 4515, 'protocol': 'TCP'}, {'name': 'ext-svc-4516', 'containerPort': 4516, 'protocol': 'TCP'}, {'name': 'ext-svc-4517', 'containerPort': 4517, 'protocol': 'TCP'}, {'name': 'ext-svc-4518', 'containerPort': 4518, 'protocol': 'TCP'}, {'name': 'ext-svc-4519', 'containerPort': 4519, 'protocol': 'TCP'}, {'name': 'ext-svc-4520', 'containerPort': 4520, 'protocol': 'TCP'}, {'name': 'ext-svc-4521', 'containerPort': 4521, 'protocol': 'TCP'}, {'name': 'ext-svc-4522', 'containerPort': 4522, 'protocol': 'TCP'}, {'name': 'ext-svc-4523', 'containerPort': 4523, 'protocol': 'TCP'}, {'name': 'ext-svc-4524', 'containerPort': 4524, 'protocol': 'TCP'}, {'name': 'ext-svc-4525', 'containerPort': 4525, 'protocol': 'TCP'}, {'name': 'ext-svc-4526', 'containerPort': 4526, 'protocol': 'TCP'}, {'name': 'ext-svc-4527', 'containerPort': 4527, 'protocol': 'TCP'}, {'name': 'ext-svc-4528', 'containerPort': 4528, 'protocol': 'TCP'}, {'name': 'ext-svc-4529', 'containerPort': 4529, 'protocol': 'TCP'}, {'name': 'ext-svc-4530', 'containerPort': 4530, 'protocol': 'TCP'}, {'name': 'ext-svc-4531', 'containerPort': 4531, 'protocol': 'TCP'}, {'name': 'ext-svc-4532', 'containerPort': 4532, 'protocol': 'TCP'}, {'name': 'ext-svc-4533', 'containerPort': 4533, 'protocol': 'TCP'}, {'name': 'ext-svc-4534', 'containerPort': 4534, 'protocol': 'TCP'}, {'name': 'ext-svc-4535', 'containerPort': 4535, 'protocol': 'TCP'}, {'name': 'ext-svc-4536', 'containerPort': 4536, 'protocol': 'TCP'}, {'name': 'ext-svc-4537', 'containerPort': 4537, 'protocol': 'TCP'}, {'name': 'ext-svc-4538', 'containerPort': 4538, 'protocol': 'TCP'}, {'name': 'ext-svc-4539', 'containerPort': 4539, 'protocol': 'TCP'}, {'name': 'ext-svc-4540', 'containerPort': 4540, 'protocol': 'TCP'}, {'name': 'ext-svc-4541', 'containerPort': 4541, 'protocol': 'TCP'}, {'name': 'ext-svc-4542', 'containerPort': 4542, 'protocol': 'TCP'}, {'name': 'ext-svc-4543', 'containerPort': 4543, 'protocol': 'TCP'}, {'name': 'ext-svc-4544', 'containerPort': 4544, 'protocol': 'TCP'}, {'name': 'ext-svc-4545', 'containerPort': 4545, 'protocol': 'TCP'}, {'name': 'ext-svc-4546', 'containerPort': 4546, 'protocol': 'TCP'}, {'name': 'ext-svc-4547', 'containerPort': 4547, 'protocol': 'TCP'}, {'name': 'ext-svc-4548', 'containerPort': 4548, 'protocol': 'TCP'}, {'name': 'ext-svc-4549', 'containerPort': 4549, 'protocol': 'TCP'}, {'name': 'ext-svc-4550', 'containerPort': 4550, 'protocol': 'TCP'}, {'name': 'ext-svc-4551', 'containerPort': 4551, 'protocol': 'TCP'}, {'name': 'ext-svc-4552', 'containerPort': 4552, 'protocol': 'TCP'}, {'name': 'ext-svc-4553', 'containerPort': 4553, 'protocol': 'TCP'}, {'name': 'ext-svc-4554', 'containerPort': 4554, 'protocol': 'TCP'}, {'name': 'ext-svc-4555', 'containerPort': 4555, 'protocol': 'TCP'}, {'name': 'ext-svc-4556', 'containerPort': 4556, 'protocol': 'TCP'}, {'name': 'ext-svc-4557', 'containerPort': 4557, 'protocol': 'TCP'}, {'name': 'ext-svc-4558', 'containerPort': 4558, 'protocol': 'TCP'}, {'name': 'ext-svc-4559', 'containerPort': 4559, 'protocol': 'TCP'}], 'livenessProbe': {'failureThreshold': 3, 'initialDelaySeconds': 0, 'periodSeconds': 10, 'successThreshold': 1, 'timeoutSeconds': 1, 'httpGet': {'path': '/_localstack/health', 'port': 'edge'}}, 'readinessProbe': {'failureThreshold': 3, 'initialDelaySeconds': 0, 'periodSeconds': 10, 'successThreshold': 1, 'timeoutSeconds': 1, 'httpGet': {'path': '/_localstack/health', 'port': 'edge'}}, 'resources': {}, 'env': [{'name': 'DEBUG', 'value': '0'}, {'name': 'EXTERNAL_SERVICE_PORTS_START', 'value': '4510'}, {'name': 'EXTERNAL_SERVICE_PORTS_END', 'value': '4560'}, {'name': 'LOCALSTACK_K8S_SERVICE_NAME', 'value': 'localstack'}, {'name': 'LOCALSTACK_K8S_NAMESPACE', 'valueFrom': {'fieldRef': {'fieldPath': 'metadata.namespace'}}}, {'name': 'LAMBDA_RUNTIME_EXECUTOR', 'value': 'docker'}, {'name': 'LAMBDA_K8S_IMAGE_PREFIX', 'value': 'localstack/lambda-'}, {'name': 'LAMBDA_RUNTIME_ENVIRONMENT_TIMEOUT', 'value': '60'}, {'name': 'OVERRIDE_IN_DOCKER', 'value': '1'}]}], 'volumes': []}}}}, {'apiVersion': 'v1', 'kind': 'ConfigMap', 'metadata': {'name': 'my-config'}, 'data': {'ENV_VAR1': 'value1', 'ENV_VAR2': 'value2'}}, {'apiVersion': 'v1', 'kind': 'Secret', 'metadata': {'name': 'my-secret'}, 'type': 'Opaque', 'data': {'SECRET_KEY1': 'dmFsdWUx', 'SECRET_KEY2': 'dmFsdWUy'}}, {'apiVersion': 'v1', 'kind': 'Secret', 'metadata': {'name': 'aws-credentials-{{ spawner.user.name }}'}, 'type': 'Opaque', 'data': {'credentials': 'W2RlZmF1bHRdCmF3c19hY2Nlc3Nfa2V5X2lkPUFTSUFJT1NGT0ROTjdFWEFNUExFCmF3c19zZWNyZXRfYWNjZXNzX2tleT13SmFsclhVdG5GRU1JL0s3TURFTkcvYlB4UmZpQ1lFWEFNUExFS0VZCmF3c19zZXNzaW9uX3Rva2VuPUlRb0piM2pySmdCV05FTE5Hb2xHSkxFT3RTVEFOR1k0TFlPNUk0SzVOUlZFS1pPTkNTTk1HRlNUS1FNSUxXUjJPUzAwRklDRTExSlg='}}, {'apiVersion': 'external-secrets.io/v1beta1', 'kind': 'ExternalSecret', 'metadata': {'name': 'data-by-name', 'namespace': 'jupyter-{{ spawner.user.name }}'}, 'spec': {'refreshInterval': '15s', 'secretStoreRef': {'kind': 'ClusterSecretStore', 'name': 'k8s-secret-store'}, 'target': {'name': 'data-by-name', 'creationPolicy': 'Owner'}, 'data': [{'secretKey': 'secret-value', 'remoteRef': {'key': 'secret-one', 'property': 'the-key'}}]}}, {'apiVersion': 'external-secrets.io/v1beta1', 'kind': 'ExternalSecret', 'metadata': {'name': 'eoepca-plus-secret-ro', 'namespace': 'jupyter-{{ spawner.user.name }}'}, 'spec': {'refreshInterval': '15s', 'secretStoreRef': {'kind': 'ClusterSecretStore', 'name': 'k8s-secret-store'}, 'target': {'name': 'eoepca-plus-secret-ro', 'creationPolicy': 'Owner'}, 'data': [{'secretKey': '.dockerconfigjson', 'remoteRef': {'key': 'eoepca-plus-secret-ro', 'property': '.dockerconfigjson'}}]}}], persist=False)], env_from_config_maps=None, env_from_secrets=None, secret_mounts=None),\n Profile(id='profile_studio_desktop_qgis', groups=['group-a', 'group-b'], definition=ProfileDefinition(display_name='QGIS on a Remote Desktop', description='Spatial visualization and decision-making tools for everyone', slug='eoepca_desktop_qgis', default=False, kubespawner_override=KubespawnerOverride(cpu_limit=2, cpu_guarantee=None, mem_limit='2G', mem_guarantee=None, image='eoepca/iga-remote-desktop-qgis:1.1.3', extra_resource_limits={}, extra_resource_guarantees={})), config_maps=[ConfigMap(name='bash-rc', key='bash-rc', mount_path='/workspace/.bashrc', default_mode=None, readonly=True, content='alias ll=\"ls -l\"\\nalias calrissian=\"/opt/conda/bin/calrissian --pod-nodeselectors /etc/calrissian/pod-node-selector.yml --stdout /calrissian/results.json --max-ram 16G --max-cores \"8\" --tmp-outdir-prefix /calrissian/tmp/ --outdir /calrissian/\"\\nalias cwltool=\"/opt/conda/bin/cwltool --podman\"\\n. /home/jovyan/.bashrc\\n\\n#alias aws=\"aws --endpoint-url=http://localstack:4566\"\\n\\n# &gt;&gt;&gt; conda initialize &gt;&gt;&gt;\\n# !! Contents within this block are managed by \\'conda init\\' !!\\n__conda_setup=\"$(\\'/opt/conda/bin/conda\\' \\'shell.bash\\' \\'hook\\' 2&gt; /dev/null)\"\\nif [ $? -eq 0 ]; then\\n    eval \"$__conda_setup\"\\nelse\\n    if [ -f \"/opt/conda/etc/profile.d/conda.sh\" ]; then\\n        . \"/opt/conda/etc/profile.d/conda.sh\"\\n    else\\n        export PATH=\"/srv/conda/bin:$PATH\"\\n    fi\\nfi\\nunset __conda_setup\\n\\nif [ -f \"/opt/conda/etc/profile.d/mamba.sh\" ]; then\\n    . \"/opt/conda/etc/profile.d/mamba.sh\"\\nfi\\n# &lt;&lt;&lt; conda initialize &lt;&lt;&lt;\\n\\na={{spawner.user.name}}\\n\\nalias aws=\"aws --endpoint-url=http://localstack-jupyter-{{spawner.user.name}}:4566\"', persist=False), ConfigMap(name='bash-login', key='bash-login', mount_path='/workspace/.bash_login', default_mode=None, readonly=True, content='source /workspace/.bashrc\\n', persist=False)], volumes=[Volume(name='workspace-volume', claim_name='workspace-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteOnce'], volume_mount=VolumeMount(name='workspace-volume', mount_path='/workspace'), persist=True)], pod_env_vars={'HOME': '/workspace'}, default_url='desktop', node_selector={}, role_bindings=None, image_pull_secrets=[], init_containers=[], manifests=None, env_from_config_maps=None, env_from_secrets=None, secret_mounts=None)]</pre> In\u00a0[17]: Copied! <pre>pprint(profiles)\nconfig = Config(profiles=profiles) # type: ignore\npprint(f'config: {config}')\neoepca_demo_config_path = str(Path(current_dir).parent.parent / 'eoepca-demo' / 'config.yml')\nwith open(eoepca_demo_config_path, \"w\") as file:\n    yaml.dump(config.model_dump(), file)\n</pre> pprint(profiles) config = Config(profiles=profiles) # type: ignore pprint(f'config: {config}') eoepca_demo_config_path = str(Path(current_dir).parent.parent / 'eoepca-demo' / 'config.yml') with open(eoepca_demo_config_path, \"w\") as file:     yaml.dump(config.model_dump(), file) <pre>[Profile(id='profile_studio_coder1', groups=['group-a', 'group-b'], definition=ProfileDefinition(display_name='Code Server Small', description=None, slug='ellip_studio_coder_slug_s', default=False, kubespawner_override=KubespawnerOverride(cpu_limit=2, cpu_guarantee=None, mem_limit='8G', mem_guarantee=None, image='eoepca/pde-code-server:develop', extra_resource_limits={}, extra_resource_guarantees={})), config_maps=[ConfigMap(name='bash-rc', key='bash-rc', mount_path='/workspace/.bashrc', default_mode=None, readonly=True, content='alias ll=\"ls -l\"\\nalias calrissian=\"/opt/conda/bin/calrissian --pod-nodeselectors /etc/calrissian/pod-node-selector.yml --stdout /calrissian/results.json --max-ram 16G --max-cores \"8\" --tmp-outdir-prefix /calrissian/tmp/ --outdir /calrissian/\"\\nalias cwltool=\"/opt/conda/bin/cwltool --podman\"\\n. /home/jovyan/.bashrc\\n\\n#alias aws=\"aws --endpoint-url=http://localstack:4566\"\\n\\n# &gt;&gt;&gt; conda initialize &gt;&gt;&gt;\\n# !! Contents within this block are managed by \\'conda init\\' !!\\n__conda_setup=\"$(\\'/opt/conda/bin/conda\\' \\'shell.bash\\' \\'hook\\' 2&gt; /dev/null)\"\\nif [ $? -eq 0 ]; then\\n    eval \"$__conda_setup\"\\nelse\\n    if [ -f \"/opt/conda/etc/profile.d/conda.sh\" ]; then\\n        . \"/opt/conda/etc/profile.d/conda.sh\"\\n    else\\n        export PATH=\"/srv/conda/bin:$PATH\"\\n    fi\\nfi\\nunset __conda_setup\\n\\nif [ -f \"/opt/conda/etc/profile.d/mamba.sh\" ]; then\\n    . \"/opt/conda/etc/profile.d/mamba.sh\"\\nfi\\n# &lt;&lt;&lt; conda initialize &lt;&lt;&lt;\\n\\na={{spawner.user.name}}\\n\\nalias aws=\"aws --endpoint-url=http://localstack-jupyter-{{spawner.user.name}}:4566\"', persist=False)], volumes=[Volume(name='calrissian-volume', claim_name='calrissian-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteMany'], volume_mount=VolumeMount(name='calrissian-volume', mount_path='/calrissian'), persist=False), Volume(name='workspace-volume', claim_name='workspace-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteOnce'], volume_mount=VolumeMount(name='workspace-volume', mount_path='/workspace'), persist=True)], pod_env_vars={'HOME': '/workspace', 'CONDA_ENVS_PATH': '/workspace/.envs'}, default_url=None, node_selector={}, role_bindings=None, image_pull_secrets=[], init_containers=[], manifests=None, env_from_config_maps=None, env_from_secrets=None, secret_mounts=None),\n Profile(id='profile_studio_coder2', groups=['group-a', 'group-b'], definition=ProfileDefinition(display_name='Code Server Medium', description=None, slug='ellip_studio_coder_slug_m', default=False, kubespawner_override=KubespawnerOverride(cpu_limit=4, cpu_guarantee=None, mem_limit='12G', mem_guarantee=None, image='eoepca/pde-code-server:develop', extra_resource_limits={}, extra_resource_guarantees={})), config_maps=[ConfigMap(name='bash-rc', key='bash-rc', mount_path='/workspace/.bashrc', default_mode=None, readonly=True, content='alias ll=\"ls -l\"\\nalias calrissian=\"/opt/conda/bin/calrissian --pod-nodeselectors /etc/calrissian/pod-node-selector.yml --stdout /calrissian/results.json --max-ram 16G --max-cores \"8\" --tmp-outdir-prefix /calrissian/tmp/ --outdir /calrissian/\"\\nalias cwltool=\"/opt/conda/bin/cwltool --podman\"\\n. /home/jovyan/.bashrc\\n\\n#alias aws=\"aws --endpoint-url=http://localstack:4566\"\\n\\n# &gt;&gt;&gt; conda initialize &gt;&gt;&gt;\\n# !! Contents within this block are managed by \\'conda init\\' !!\\n__conda_setup=\"$(\\'/opt/conda/bin/conda\\' \\'shell.bash\\' \\'hook\\' 2&gt; /dev/null)\"\\nif [ $? -eq 0 ]; then\\n    eval \"$__conda_setup\"\\nelse\\n    if [ -f \"/opt/conda/etc/profile.d/conda.sh\" ]; then\\n        . \"/opt/conda/etc/profile.d/conda.sh\"\\n    else\\n        export PATH=\"/srv/conda/bin:$PATH\"\\n    fi\\nfi\\nunset __conda_setup\\n\\nif [ -f \"/opt/conda/etc/profile.d/mamba.sh\" ]; then\\n    . \"/opt/conda/etc/profile.d/mamba.sh\"\\nfi\\n# &lt;&lt;&lt; conda initialize &lt;&lt;&lt;\\n\\na={{spawner.user.name}}\\n\\nalias aws=\"aws --endpoint-url=http://localstack-jupyter-{{spawner.user.name}}:4566\"', persist=False)], volumes=[Volume(name='calrissian-volume', claim_name='calrissian-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteMany'], volume_mount=VolumeMount(name='calrissian-volume', mount_path='/calrissian'), persist=False), Volume(name='workspace-volume', claim_name='workspace-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteOnce'], volume_mount=VolumeMount(name='workspace-volume', mount_path='/workspace'), persist=True)], pod_env_vars={'HOME': '/workspace', 'CONDA_ENVS_PATH': '/workspace/.envs'}, default_url=None, node_selector={}, role_bindings=None, image_pull_secrets=[], init_containers=[], manifests=None, env_from_config_maps=None, env_from_secrets=None, secret_mounts=None),\n Profile(id='profile_demo_init_script', groups=['group-a', 'group-b'], definition=ProfileDefinition(display_name='Coder demo init script', description='This profile is used to demonstrate the use of an init script', slug='eoepca_demo_init_script', default=False, kubespawner_override=KubespawnerOverride(cpu_limit=2, cpu_guarantee=1, mem_limit='6G', mem_guarantee='4G', image='eoepca/pde-code-server:develop', extra_resource_limits={}, extra_resource_guarantees={})), config_maps=[ConfigMap(name='init', key='init', mount_path='/opt/init/.init.sh', default_mode='0660', readonly=True, content=\"set -x\\n\\ncd /workspace\\n\\ngit clone 'https://github.com/eoap/mastering-app-package.git'\\n\\ncode-server --install-extension ms-python.python\\ncode-server --install-extension redhat.vscode-yaml\\ncode-server --install-extension sbg-rabix.benten-cwl\\ncode-server --install-extension ms-toolsai.jupyter\\n\\nln -s /workspace/.local/share/code-server/extensions /workspace/extensions\\n\\nexit 0\\n\", persist=False)], volumes=[Volume(name='calrissian-volume', claim_name='calrissian-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteMany'], volume_mount=VolumeMount(name='calrissian-volume', mount_path='/calrissian'), persist=False), Volume(name='workspace-volume', claim_name='workspace-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteOnce'], volume_mount=VolumeMount(name='workspace-volume', mount_path='/workspace'), persist=True)], pod_env_vars={'HOME': '/workspace', 'CONDA_ENVS_PATH': '/workspace/.envs', 'CONDARC': '/workspace/.condarc', 'XDG_RUNTIME_DIR': '/workspace/.local', 'CODE_SERVER_WS': '/workspace/mastering-app-package'}, default_url=None, node_selector={}, role_bindings=None, image_pull_secrets=[], init_containers=[InitContainer(name='init-file-on-volume', image='eoepca/pde-code-server:develop', command=['sh', '-c', 'sh /opt/init/.init.sh'], volume_mounts=[VolumeMount(name='workspace-volume', mount_path='/workspace'), InitContainerVolumeMount(name='init', mount_path='/opt/init/.init.sh', sub_path='init')])], manifests=None, env_from_config_maps=None, env_from_secrets=None, secret_mounts=None),\n Profile(id='profile_jupyter_lab', groups=['group-c'], definition=ProfileDefinition(display_name='Jupyter Lab', description='Jupyter Lab with Python 3.11', slug='eoepca_jupyter_lab', default=False, kubespawner_override=KubespawnerOverride(cpu_limit=2, cpu_guarantee=1, mem_limit='6G', mem_guarantee='4G', image='jupyter/scipy-notebook', extra_resource_limits={}, extra_resource_guarantees={})), config_maps=[], volumes=[Volume(name='workspace-volume', claim_name='workspace-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteOnce'], volume_mount=VolumeMount(name='workspace-volume', mount_path='/workspace'), persist=True)], pod_env_vars={'HOME': '/workspace', 'XDG_RUNTIME_DIR': '/workspace/.local', 'XDG_CONFIG_HOME': '/workspace/.config'}, default_url=None, node_selector={}, role_bindings=None, image_pull_secrets=[], init_containers=[], manifests=None, env_from_config_maps=None, env_from_secrets=None, secret_mounts=None),\n Profile(id='profile_jupyter_lab_2', groups=['group-c'], definition=ProfileDefinition(display_name='Jupyter Lab - profile 2', description='Jupyter Lab with Python 3.11 private image - demoes the use of an image pull secret', slug='eoepca_jupyter_lab_2', default=False, kubespawner_override=KubespawnerOverride(cpu_limit=2, cpu_guarantee=1, mem_limit='6G', mem_guarantee='4G', image='eoepca/iat-jupyterlab:develop', extra_resource_limits={}, extra_resource_guarantees={})), config_maps=[], volumes=[Volume(name='workspace-volume', claim_name='workspace-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteOnce'], volume_mount=VolumeMount(name='workspace-volume', mount_path='/workspace'), persist=True)], pod_env_vars={'HOME': '/workspace', 'XDG_RUNTIME_DIR': '/workspace/.local', 'XDG_CONFIG_HOME': '/workspace/.config'}, default_url=None, node_selector={}, role_bindings=None, image_pull_secrets=[ImagePullSecret(name='cr-config', persist=False, data='ewogICAgImF1dGhzIjogewogICAgICAgICJjci50ZXJyYWR1ZS5jb20iOiB7CiAgICAgICAgICAgICJ1c2VybmFtZSI6ICJyb2JvdCRlb2VwY2EtcGx1cy1ybyIsCiAgICAgICAgICAgICJwYXNzd29yZCI6ICJQMlE4TnkyZ0lHODhkZkxveXlLN05QVUZVbHJOekFZSiIsCiAgICAgICAgICAgICJlbWFpbCI6ICJlb2VwY2EtcGx1c0B0ZXJyYWR1ZS5jb20iLAogICAgICAgICAgICAiYXV0aCI6ICJjbTlpYjNRa1pXOWxjR05oTFhCc2RYTXRjbTg2VURKUk9FNTVNbWRKUnpnNFpHWk1iM2w1U3pkT1VGVkdWV3h5VG5wQldVbz0iCiAgICAgICAgfQogICAgfQp9')], init_containers=[], manifests=None, env_from_config_maps=None, env_from_secrets=None, secret_mounts=None),\n Profile(id='profile_studio_coder_stac', groups=['group-a', 'group-b'], definition=ProfileDefinition(display_name='Understanding STAC for input/output data modelling', description='Understand the role of STAC in input/output data manifests in EO data processing workflows', slug='eoepca_coder_slug_stac', default=False, kubespawner_override=KubespawnerOverride(cpu_limit=2, cpu_guarantee=1, mem_limit='6G', mem_guarantee='4G', image='docker.io/eoepca/pde-code-server@sha256:f57a3d5eabcae667e0db6e84a57b0c07c692c88f0fb5c8f6900ab8d5e38fcd40', extra_resource_limits={}, extra_resource_guarantees={})), config_maps=[ConfigMap(name='init', key='init', mount_path='/opt/init/.init.sh', default_mode=None, readonly=True, content='set -x \\n\\ncd /workspace\\n\\ngit clone \\'https://github.com/eoap/stac-eoap.git\\'\\n\\ncode-server --install-extension ms-python.python \\ncode-server --install-extension redhat.vscode-yaml\\ncode-server --install-extension sbg-rabix.benten-cwl\\ncode-server --install-extension ms-toolsai.jupyter\\n\\nln -s /workspace/.local/share/code-server/extensions /workspace/extensions\\n\\nmkdir -p /workspace/User/\\n\\necho \\'{\"workbench.colorTheme\": \"Visual Studio Dark\"}\\' &gt; /workspace/User/settings.json\\n\\npython -m venv /workspace/.venv\\nsource /workspace/.venv/bin/activate\\n/workspace/.venv/bin/python -m pip install --no-cache-dir stactools rasterio requests stac-asset click-logging tabulate tqdm pystac-client ipykernel loguru scikit-image rio_stac boto3==1.35.23\\n\\n/workspace/.venv/bin/python -m pip install --index-url https://test.pypi.org/simple cwl-wrapper\\n\\n/workspace/.venv/bin/python -m ipykernel install --user --name stac_env --display-name \"Python (STAC)\"\\n\\nexport AWS_DEFAULT_REGION=\"us-east-1\"\\nexport AWS_ACCESS_KEY_ID=\"test\"\\nexport AWS_SECRET_ACCESS_KEY=\"test\"\\naws s3 mb s3://results --endpoint-url=http://localstack:4566\\n\\nexit 0', persist=False), ConfigMap(name='bash-rc', key='bash-rc', mount_path='/workspace/.bashrc', default_mode=None, readonly=True, content='alias ll=\"ls -l\"\\nalias calrissian=\"/opt/conda/bin/calrissian --pod-nodeselectors /etc/calrissian/pod-node-selector.yml --stdout /calrissian/results.json --max-ram 16G --max-cores \"8\" --tmp-outdir-prefix /calrissian/tmp/ --outdir /calrissian/\"\\nalias cwltool=\"/opt/conda/bin/cwltool --podman\"\\n. /home/jovyan/.bashrc\\n\\n#alias aws=\"aws --endpoint-url=http://localstack:4566\"\\n\\n# &gt;&gt;&gt; conda initialize &gt;&gt;&gt;\\n# !! Contents within this block are managed by \\'conda init\\' !!\\n__conda_setup=\"$(\\'/opt/conda/bin/conda\\' \\'shell.bash\\' \\'hook\\' 2&gt; /dev/null)\"\\nif [ $? -eq 0 ]; then\\n    eval \"$__conda_setup\"\\nelse\\n    if [ -f \"/opt/conda/etc/profile.d/conda.sh\" ]; then\\n        . \"/opt/conda/etc/profile.d/conda.sh\"\\n    else\\n        export PATH=\"/srv/conda/bin:$PATH\"\\n    fi\\nfi\\nunset __conda_setup\\n\\nif [ -f \"/opt/conda/etc/profile.d/mamba.sh\" ]; then\\n    . \"/opt/conda/etc/profile.d/mamba.sh\"\\nfi\\n# &lt;&lt;&lt; conda initialize &lt;&lt;&lt;\\n\\na={{spawner.user.name}}\\n\\nalias aws=\"aws --endpoint-url=http://localstack-jupyter-{{spawner.user.name}}:4566\"', persist=False), ConfigMap(name='bash-login', key='bash-login', mount_path='/workspace/.bash_login', default_mode=None, readonly=True, content='source /workspace/.bashrc\\n', persist=False)], volumes=[Volume(name='workspace-volume', claim_name='workspace-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteOnce'], volume_mount=VolumeMount(name='workspace-volume', mount_path='/workspace'), persist=True)], pod_env_vars={'HOME': '/workspace', 'CONDA_ENVS_PATH': '/workspace/.envs', 'CONDARC': '/workspace/.condarc', 'XDG_RUNTIME_DIR': '/workspace/.local', 'XDG_CONFIG_HOME': '/workspace/.local', 'XDG_DATA_HOME': '/workspace/.local/share/', 'CWLTOOL_OPTIONS': '--podman', 'CODE_SERVER_WS': '/workspace/stac-eoap', 'AWS_DEFAULT_REGION': 'us-east-1', 'AWS_ACCESS_KEY_ID': 'test', 'AWS_SECRET_ACCESS_KEY': 'test'}, default_url=None, node_selector={}, role_bindings=[], image_pull_secrets=[ImagePullSecret(name='cr-config', persist=False, data='ewogICAgImF1dGhzIjogewogICAgICAgICJjci50ZXJyYWR1ZS5jb20iOiB7CiAgICAgICAgICAgICJ1c2VybmFtZSI6ICJyb2JvdCRlb2VwY2EtcGx1cy1ybyIsCiAgICAgICAgICAgICJwYXNzd29yZCI6ICJQMlE4TnkyZ0lHODhkZkxveXlLN05QVUZVbHJOekFZSiIsCiAgICAgICAgICAgICJlbWFpbCI6ICJlb2VwY2EtcGx1c0B0ZXJyYWR1ZS5jb20iLAogICAgICAgICAgICAiYXV0aCI6ICJjbTlpYjNRa1pXOWxjR05oTFhCc2RYTXRjbTg2VURKUk9FNTVNbWRKUnpnNFpHWk1iM2w1U3pkT1VGVkdWV3h5VG5wQldVbz0iCiAgICAgICAgfQogICAgfQp9')], init_containers=[InitContainer(name='init-file-on-volume', image='eoepca/pde-code-server:develop', command=['sh', '-c', 'sh /opt/init/.init.sh'], volume_mounts=[VolumeMount(name='workspace-volume', mount_path='/workspace'), InitContainerVolumeMount(name='init', mount_path='/opt/init/.init.sh', sub_path='init')])], manifests=[Manifest(name='manifests', key='manifests', content=[{'apiVersion': 'v1', 'kind': 'ServiceAccount', 'metadata': {'name': 'localstack'}}, {'apiVersion': 'rbac.authorization.k8s.io/v1', 'kind': 'Role', 'metadata': {'name': 'localstack'}, 'rules': [{'apiGroups': [''], 'resources': ['pods'], 'verbs': ['*']}, {'apiGroups': [''], 'resources': ['pods/log'], 'verbs': ['get']}, {'apiGroups': [''], 'resources': ['pods/exec'], 'verbs': ['get', 'create']}, {'apiGroups': [''], 'resources': ['services'], 'verbs': ['get', 'list']}]}, {'apiVersion': 'rbac.authorization.k8s.io/v1', 'kind': 'RoleBinding', 'metadata': {'name': 'localstack'}, 'subjects': [{'kind': 'ServiceAccount', 'name': 'localstack'}], 'roleRef': {'kind': 'Role', 'name': 'localstack', 'apiGroup': 'rbac.authorization.k8s.io'}}, {'apiVersion': 'v1', 'kind': 'Service', 'metadata': {'name': 'localstack'}, 'spec': {'type': 'ClusterIP', 'ports': [{'name': 'edge', 'port': 4566, 'targetPort': 4566}, {'name': 'external-service-port-4510', 'port': 4510, 'targetPort': 'ext-svc-4510'}, {'name': 'external-service-port-4511', 'port': 4511, 'targetPort': 'ext-svc-4511'}, {'name': 'external-service-port-4512', 'port': 4512, 'targetPort': 'ext-svc-4512'}, {'name': 'external-service-port-4513', 'port': 4513, 'targetPort': 'ext-svc-4513'}, {'name': 'external-service-port-4514', 'port': 4514, 'targetPort': 'ext-svc-4514'}, {'name': 'external-service-port-4515', 'port': 4515, 'targetPort': 'ext-svc-4515'}, {'name': 'external-service-port-4516', 'port': 4516, 'targetPort': 'ext-svc-4516'}, {'name': 'external-service-port-4517', 'port': 4517, 'targetPort': 'ext-svc-4517'}, {'name': 'external-service-port-4518', 'port': 4518, 'targetPort': 'ext-svc-4518'}, {'name': 'external-service-port-4519', 'port': 4519, 'targetPort': 'ext-svc-4519'}, {'name': 'external-service-port-4520', 'port': 4520, 'targetPort': 'ext-svc-4520'}, {'name': 'external-service-port-4521', 'port': 4521, 'targetPort': 'ext-svc-4521'}, {'name': 'external-service-port-4522', 'port': 4522, 'targetPort': 'ext-svc-4522'}, {'name': 'external-service-port-4523', 'port': 4523, 'targetPort': 'ext-svc-4523'}, {'name': 'external-service-port-4524', 'port': 4524, 'targetPort': 'ext-svc-4524'}, {'name': 'external-service-port-4525', 'port': 4525, 'targetPort': 'ext-svc-4525'}, {'name': 'external-service-port-4526', 'port': 4526, 'targetPort': 'ext-svc-4526'}, {'name': 'external-service-port-4527', 'port': 4527, 'targetPort': 'ext-svc-4527'}, {'name': 'external-service-port-4528', 'port': 4528, 'targetPort': 'ext-svc-4528'}, {'name': 'external-service-port-4529', 'port': 4529, 'targetPort': 'ext-svc-4529'}, {'name': 'external-service-port-4530', 'port': 4530, 'targetPort': 'ext-svc-4530'}, {'name': 'external-service-port-4531', 'port': 4531, 'targetPort': 'ext-svc-4531'}, {'name': 'external-service-port-4532', 'port': 4532, 'targetPort': 'ext-svc-4532'}, {'name': 'external-service-port-4533', 'port': 4533, 'targetPort': 'ext-svc-4533'}, {'name': 'external-service-port-4534', 'port': 4534, 'targetPort': 'ext-svc-4534'}, {'name': 'external-service-port-4535', 'port': 4535, 'targetPort': 'ext-svc-4535'}, {'name': 'external-service-port-4536', 'port': 4536, 'targetPort': 'ext-svc-4536'}, {'name': 'external-service-port-4537', 'port': 4537, 'targetPort': 'ext-svc-4537'}, {'name': 'external-service-port-4538', 'port': 4538, 'targetPort': 'ext-svc-4538'}, {'name': 'external-service-port-4539', 'port': 4539, 'targetPort': 'ext-svc-4539'}, {'name': 'external-service-port-4540', 'port': 4540, 'targetPort': 'ext-svc-4540'}, {'name': 'external-service-port-4541', 'port': 4541, 'targetPort': 'ext-svc-4541'}, {'name': 'external-service-port-4542', 'port': 4542, 'targetPort': 'ext-svc-4542'}, {'name': 'external-service-port-4543', 'port': 4543, 'targetPort': 'ext-svc-4543'}, {'name': 'external-service-port-4544', 'port': 4544, 'targetPort': 'ext-svc-4544'}, {'name': 'external-service-port-4545', 'port': 4545, 'targetPort': 'ext-svc-4545'}, {'name': 'external-service-port-4546', 'port': 4546, 'targetPort': 'ext-svc-4546'}, {'name': 'external-service-port-4547', 'port': 4547, 'targetPort': 'ext-svc-4547'}, {'name': 'external-service-port-4548', 'port': 4548, 'targetPort': 'ext-svc-4548'}, {'name': 'external-service-port-4549', 'port': 4549, 'targetPort': 'ext-svc-4549'}, {'name': 'external-service-port-4550', 'port': 4550, 'targetPort': 'ext-svc-4550'}, {'name': 'external-service-port-4551', 'port': 4551, 'targetPort': 'ext-svc-4551'}, {'name': 'external-service-port-4552', 'port': 4552, 'targetPort': 'ext-svc-4552'}, {'name': 'external-service-port-4553', 'port': 4553, 'targetPort': 'ext-svc-4553'}, {'name': 'external-service-port-4554', 'port': 4554, 'targetPort': 'ext-svc-4554'}, {'name': 'external-service-port-4555', 'port': 4555, 'targetPort': 'ext-svc-4555'}, {'name': 'external-service-port-4556', 'port': 4556, 'targetPort': 'ext-svc-4556'}, {'name': 'external-service-port-4557', 'port': 4557, 'targetPort': 'ext-svc-4557'}, {'name': 'external-service-port-4558', 'port': 4558, 'targetPort': 'ext-svc-4558'}, {'name': 'external-service-port-4559', 'port': 4559, 'targetPort': 'ext-svc-4559'}], 'selector': {'app.kubernetes.io/name': 'localstack', 'app.kubernetes.io/instance': 'localstack'}}}, {'apiVersion': 'apps/v1', 'kind': 'Deployment', 'metadata': {'name': 'localstack'}, 'spec': {'replicas': 1, 'strategy': {'type': 'RollingUpdate'}, 'selector': {'matchLabels': {'app.kubernetes.io/name': 'localstack', 'app.kubernetes.io/instance': 'localstack'}}, 'template': {'metadata': {'labels': {'app': 'localstack-{{ spawner.user.name }}', 'app.kubernetes.io/name': 'localstack', 'app.kubernetes.io/instance': 'localstack'}}, 'spec': {'serviceAccountName': 'localstack', 'securityContext': {}, 'containers': [{'name': 'localstack', 'securityContext': {}, 'image': 'localstack/localstack:latest', 'imagePullPolicy': 'IfNotPresent', 'ports': [{'name': 'edge', 'containerPort': 4566, 'protocol': 'TCP'}, {'name': 'ext-svc-4510', 'containerPort': 4510, 'protocol': 'TCP'}, {'name': 'ext-svc-4511', 'containerPort': 4511, 'protocol': 'TCP'}, {'name': 'ext-svc-4512', 'containerPort': 4512, 'protocol': 'TCP'}, {'name': 'ext-svc-4513', 'containerPort': 4513, 'protocol': 'TCP'}, {'name': 'ext-svc-4514', 'containerPort': 4514, 'protocol': 'TCP'}, {'name': 'ext-svc-4515', 'containerPort': 4515, 'protocol': 'TCP'}, {'name': 'ext-svc-4516', 'containerPort': 4516, 'protocol': 'TCP'}, {'name': 'ext-svc-4517', 'containerPort': 4517, 'protocol': 'TCP'}, {'name': 'ext-svc-4518', 'containerPort': 4518, 'protocol': 'TCP'}, {'name': 'ext-svc-4519', 'containerPort': 4519, 'protocol': 'TCP'}, {'name': 'ext-svc-4520', 'containerPort': 4520, 'protocol': 'TCP'}, {'name': 'ext-svc-4521', 'containerPort': 4521, 'protocol': 'TCP'}, {'name': 'ext-svc-4522', 'containerPort': 4522, 'protocol': 'TCP'}, {'name': 'ext-svc-4523', 'containerPort': 4523, 'protocol': 'TCP'}, {'name': 'ext-svc-4524', 'containerPort': 4524, 'protocol': 'TCP'}, {'name': 'ext-svc-4525', 'containerPort': 4525, 'protocol': 'TCP'}, {'name': 'ext-svc-4526', 'containerPort': 4526, 'protocol': 'TCP'}, {'name': 'ext-svc-4527', 'containerPort': 4527, 'protocol': 'TCP'}, {'name': 'ext-svc-4528', 'containerPort': 4528, 'protocol': 'TCP'}, {'name': 'ext-svc-4529', 'containerPort': 4529, 'protocol': 'TCP'}, {'name': 'ext-svc-4530', 'containerPort': 4530, 'protocol': 'TCP'}, {'name': 'ext-svc-4531', 'containerPort': 4531, 'protocol': 'TCP'}, {'name': 'ext-svc-4532', 'containerPort': 4532, 'protocol': 'TCP'}, {'name': 'ext-svc-4533', 'containerPort': 4533, 'protocol': 'TCP'}, {'name': 'ext-svc-4534', 'containerPort': 4534, 'protocol': 'TCP'}, {'name': 'ext-svc-4535', 'containerPort': 4535, 'protocol': 'TCP'}, {'name': 'ext-svc-4536', 'containerPort': 4536, 'protocol': 'TCP'}, {'name': 'ext-svc-4537', 'containerPort': 4537, 'protocol': 'TCP'}, {'name': 'ext-svc-4538', 'containerPort': 4538, 'protocol': 'TCP'}, {'name': 'ext-svc-4539', 'containerPort': 4539, 'protocol': 'TCP'}, {'name': 'ext-svc-4540', 'containerPort': 4540, 'protocol': 'TCP'}, {'name': 'ext-svc-4541', 'containerPort': 4541, 'protocol': 'TCP'}, {'name': 'ext-svc-4542', 'containerPort': 4542, 'protocol': 'TCP'}, {'name': 'ext-svc-4543', 'containerPort': 4543, 'protocol': 'TCP'}, {'name': 'ext-svc-4544', 'containerPort': 4544, 'protocol': 'TCP'}, {'name': 'ext-svc-4545', 'containerPort': 4545, 'protocol': 'TCP'}, {'name': 'ext-svc-4546', 'containerPort': 4546, 'protocol': 'TCP'}, {'name': 'ext-svc-4547', 'containerPort': 4547, 'protocol': 'TCP'}, {'name': 'ext-svc-4548', 'containerPort': 4548, 'protocol': 'TCP'}, {'name': 'ext-svc-4549', 'containerPort': 4549, 'protocol': 'TCP'}, {'name': 'ext-svc-4550', 'containerPort': 4550, 'protocol': 'TCP'}, {'name': 'ext-svc-4551', 'containerPort': 4551, 'protocol': 'TCP'}, {'name': 'ext-svc-4552', 'containerPort': 4552, 'protocol': 'TCP'}, {'name': 'ext-svc-4553', 'containerPort': 4553, 'protocol': 'TCP'}, {'name': 'ext-svc-4554', 'containerPort': 4554, 'protocol': 'TCP'}, {'name': 'ext-svc-4555', 'containerPort': 4555, 'protocol': 'TCP'}, {'name': 'ext-svc-4556', 'containerPort': 4556, 'protocol': 'TCP'}, {'name': 'ext-svc-4557', 'containerPort': 4557, 'protocol': 'TCP'}, {'name': 'ext-svc-4558', 'containerPort': 4558, 'protocol': 'TCP'}, {'name': 'ext-svc-4559', 'containerPort': 4559, 'protocol': 'TCP'}], 'livenessProbe': {'failureThreshold': 3, 'initialDelaySeconds': 0, 'periodSeconds': 10, 'successThreshold': 1, 'timeoutSeconds': 1, 'httpGet': {'path': '/_localstack/health', 'port': 'edge'}}, 'readinessProbe': {'failureThreshold': 3, 'initialDelaySeconds': 0, 'periodSeconds': 10, 'successThreshold': 1, 'timeoutSeconds': 1, 'httpGet': {'path': '/_localstack/health', 'port': 'edge'}}, 'resources': {}, 'env': [{'name': 'DEBUG', 'value': '0'}, {'name': 'EXTERNAL_SERVICE_PORTS_START', 'value': '4510'}, {'name': 'EXTERNAL_SERVICE_PORTS_END', 'value': '4560'}, {'name': 'LOCALSTACK_K8S_SERVICE_NAME', 'value': 'localstack'}, {'name': 'LOCALSTACK_K8S_NAMESPACE', 'valueFrom': {'fieldRef': {'fieldPath': 'metadata.namespace'}}}, {'name': 'LAMBDA_RUNTIME_EXECUTOR', 'value': 'docker'}, {'name': 'LAMBDA_K8S_IMAGE_PREFIX', 'value': 'localstack/lambda-'}, {'name': 'LAMBDA_RUNTIME_ENVIRONMENT_TIMEOUT', 'value': '60'}, {'name': 'OVERRIDE_IN_DOCKER', 'value': '1'}]}], 'volumes': []}}}}, {'apiVersion': 'v1', 'kind': 'ConfigMap', 'metadata': {'name': 'my-config'}, 'data': {'ENV_VAR1': 'value1', 'ENV_VAR2': 'value2'}}, {'apiVersion': 'v1', 'kind': 'Secret', 'metadata': {'name': 'my-secret'}, 'type': 'Opaque', 'data': {'SECRET_KEY1': 'dmFsdWUx', 'SECRET_KEY2': 'dmFsdWUy'}}, {'apiVersion': 'v1', 'kind': 'Secret', 'metadata': {'name': 'aws-credentials-{{ spawner.user.name }}'}, 'type': 'Opaque', 'data': {'credentials': 'W2RlZmF1bHRdCmF3c19hY2Nlc3Nfa2V5X2lkPUFTSUFJT1NGT0ROTjdFWEFNUExFCmF3c19zZWNyZXRfYWNjZXNzX2tleT13SmFsclhVdG5GRU1JL0s3TURFTkcvYlB4UmZpQ1lFWEFNUExFS0VZCmF3c19zZXNzaW9uX3Rva2VuPUlRb0piM2pySmdCV05FTE5Hb2xHSkxFT3RTVEFOR1k0TFlPNUk0SzVOUlZFS1pPTkNTTk1HRlNUS1FNSUxXUjJPUzAwRklDRTExSlg='}}, {'apiVersion': 'external-secrets.io/v1beta1', 'kind': 'ExternalSecret', 'metadata': {'name': 'data-by-name', 'namespace': 'jupyter-{{ spawner.user.name }}'}, 'spec': {'refreshInterval': '15s', 'secretStoreRef': {'kind': 'ClusterSecretStore', 'name': 'k8s-secret-store'}, 'target': {'name': 'data-by-name', 'creationPolicy': 'Owner'}, 'data': [{'secretKey': 'secret-value', 'remoteRef': {'key': 'secret-one', 'property': 'the-key'}}]}}, {'apiVersion': 'external-secrets.io/v1beta1', 'kind': 'ExternalSecret', 'metadata': {'name': 'eoepca-plus-secret-ro', 'namespace': 'jupyter-{{ spawner.user.name }}'}, 'spec': {'refreshInterval': '15s', 'secretStoreRef': {'kind': 'ClusterSecretStore', 'name': 'k8s-secret-store'}, 'target': {'name': 'eoepca-plus-secret-ro', 'creationPolicy': 'Owner'}, 'data': [{'secretKey': '.dockerconfigjson', 'remoteRef': {'key': 'eoepca-plus-secret-ro', 'property': '.dockerconfigjson'}}]}}], persist=False)], env_from_config_maps=None, env_from_secrets=None, secret_mounts=None),\n Profile(id='profile_studio_desktop_qgis', groups=['group-a', 'group-b'], definition=ProfileDefinition(display_name='QGIS on a Remote Desktop', description='Spatial visualization and decision-making tools for everyone', slug='eoepca_desktop_qgis', default=False, kubespawner_override=KubespawnerOverride(cpu_limit=2, cpu_guarantee=None, mem_limit='2G', mem_guarantee=None, image='eoepca/iga-remote-desktop-qgis:1.1.3', extra_resource_limits={}, extra_resource_guarantees={})), config_maps=[ConfigMap(name='bash-rc', key='bash-rc', mount_path='/workspace/.bashrc', default_mode=None, readonly=True, content='alias ll=\"ls -l\"\\nalias calrissian=\"/opt/conda/bin/calrissian --pod-nodeselectors /etc/calrissian/pod-node-selector.yml --stdout /calrissian/results.json --max-ram 16G --max-cores \"8\" --tmp-outdir-prefix /calrissian/tmp/ --outdir /calrissian/\"\\nalias cwltool=\"/opt/conda/bin/cwltool --podman\"\\n. /home/jovyan/.bashrc\\n\\n#alias aws=\"aws --endpoint-url=http://localstack:4566\"\\n\\n# &gt;&gt;&gt; conda initialize &gt;&gt;&gt;\\n# !! Contents within this block are managed by \\'conda init\\' !!\\n__conda_setup=\"$(\\'/opt/conda/bin/conda\\' \\'shell.bash\\' \\'hook\\' 2&gt; /dev/null)\"\\nif [ $? -eq 0 ]; then\\n    eval \"$__conda_setup\"\\nelse\\n    if [ -f \"/opt/conda/etc/profile.d/conda.sh\" ]; then\\n        . \"/opt/conda/etc/profile.d/conda.sh\"\\n    else\\n        export PATH=\"/srv/conda/bin:$PATH\"\\n    fi\\nfi\\nunset __conda_setup\\n\\nif [ -f \"/opt/conda/etc/profile.d/mamba.sh\" ]; then\\n    . \"/opt/conda/etc/profile.d/mamba.sh\"\\nfi\\n# &lt;&lt;&lt; conda initialize &lt;&lt;&lt;\\n\\na={{spawner.user.name}}\\n\\nalias aws=\"aws --endpoint-url=http://localstack-jupyter-{{spawner.user.name}}:4566\"', persist=False), ConfigMap(name='bash-login', key='bash-login', mount_path='/workspace/.bash_login', default_mode=None, readonly=True, content='source /workspace/.bashrc\\n', persist=False)], volumes=[Volume(name='workspace-volume', claim_name='workspace-claim', size='50Gi', storage_class='managed-nfs-storage', access_modes=['ReadWriteOnce'], volume_mount=VolumeMount(name='workspace-volume', mount_path='/workspace'), persist=True)], pod_env_vars={'HOME': '/workspace'}, default_url='desktop', node_selector={}, role_bindings=None, image_pull_secrets=[], init_containers=[], manifests=None, env_from_config_maps=None, env_from_secrets=None, secret_mounts=None)]\n(\"config: profiles=[Profile(id='profile_studio_coder1', groups=['group-a', \"\n \"'group-b'], definition=ProfileDefinition(display_name='Code Server Small', \"\n \"description=None, slug='ellip_studio_coder_slug_s', default=False, \"\n 'kubespawner_override=KubespawnerOverride(cpu_limit=2, cpu_guarantee=None, '\n \"mem_limit='8G', mem_guarantee=None, image='eoepca/pde-code-server:develop', \"\n 'extra_resource_limits={}, extra_resource_guarantees={})), '\n \"config_maps=[ConfigMap(name='bash-rc', key='bash-rc', \"\n \"mount_path='/workspace/.bashrc', default_mode=None, readonly=True, \"\n 'content=\\'alias ll=\"ls -l\"\\\\nalias calrissian=\"/opt/conda/bin/calrissian '\n '--pod-nodeselectors /etc/calrissian/pod-node-selector.yml --stdout '\n '/calrissian/results.json --max-ram 16G --max-cores \"8\" --tmp-outdir-prefix '\n '/calrissian/tmp/ --outdir /calrissian/\"\\\\nalias '\n 'cwltool=\"/opt/conda/bin/cwltool --podman\"\\\\n. '\n '/home/jovyan/.bashrc\\\\n\\\\n#alias aws=\"aws '\n '--endpoint-url=http://localstack:4566\"\\\\n\\\\n# &gt;&gt;&gt; conda initialize &gt;&gt;&gt;\\\\n# '\n \"!! Contents within this block are managed by \\\\'conda init\\\\' \"\n '!!\\\\n__conda_setup=\"$(\\\\\\'/opt/conda/bin/conda\\\\\\' \\\\\\'shell.bash\\\\\\' '\n '\\\\\\'hook\\\\\\' 2&gt; /dev/null)\"\\\\nif [ $? -eq 0 ]; then\\\\n    eval '\n '\"$__conda_setup\"\\\\nelse\\\\n    if [ -f \"/opt/conda/etc/profile.d/conda.sh\" ]; '\n 'then\\\\n        . \"/opt/conda/etc/profile.d/conda.sh\"\\\\n    else\\\\n        '\n 'export PATH=\"/srv/conda/bin:$PATH\"\\\\n    fi\\\\nfi\\\\nunset '\n '__conda_setup\\\\n\\\\nif [ -f \"/opt/conda/etc/profile.d/mamba.sh\" ]; then\\\\n    '\n '. \"/opt/conda/etc/profile.d/mamba.sh\"\\\\nfi\\\\n# &lt;&lt;&lt; conda initialize '\n '&lt;&lt;&lt;\\\\n\\\\na={{spawner.user.name}}\\\\n\\\\nalias aws=\"aws '\n '--endpoint-url=http://localstack-jupyter-{{spawner.user.name}}:4566\"\\', '\n \"persist=False)], volumes=[Volume(name='calrissian-volume', \"\n \"claim_name='calrissian-claim', size='50Gi', \"\n \"storage_class='managed-nfs-storage', access_modes=['ReadWriteMany'], \"\n \"volume_mount=VolumeMount(name='calrissian-volume', \"\n \"mount_path='/calrissian'), persist=False), Volume(name='workspace-volume', \"\n \"claim_name='workspace-claim', size='50Gi', \"\n \"storage_class='managed-nfs-storage', access_modes=['ReadWriteOnce'], \"\n \"volume_mount=VolumeMount(name='workspace-volume', mount_path='/workspace'), \"\n \"persist=True)], pod_env_vars={'HOME': '/workspace', 'CONDA_ENVS_PATH': \"\n \"'/workspace/.envs'}, default_url=None, node_selector={}, role_bindings=None, \"\n 'image_pull_secrets=[], init_containers=[], manifests=None, '\n 'env_from_config_maps=None, env_from_secrets=None, secret_mounts=None), '\n \"Profile(id='profile_studio_coder2', groups=['group-a', 'group-b'], \"\n \"definition=ProfileDefinition(display_name='Code Server Medium', \"\n \"description=None, slug='ellip_studio_coder_slug_m', default=False, \"\n 'kubespawner_override=KubespawnerOverride(cpu_limit=4, cpu_guarantee=None, '\n \"mem_limit='12G', mem_guarantee=None, image='eoepca/pde-code-server:develop', \"\n 'extra_resource_limits={}, extra_resource_guarantees={})), '\n \"config_maps=[ConfigMap(name='bash-rc', key='bash-rc', \"\n \"mount_path='/workspace/.bashrc', default_mode=None, readonly=True, \"\n 'content=\\'alias ll=\"ls -l\"\\\\nalias calrissian=\"/opt/conda/bin/calrissian '\n '--pod-nodeselectors /etc/calrissian/pod-node-selector.yml --stdout '\n '/calrissian/results.json --max-ram 16G --max-cores \"8\" --tmp-outdir-prefix '\n '/calrissian/tmp/ --outdir /calrissian/\"\\\\nalias '\n 'cwltool=\"/opt/conda/bin/cwltool --podman\"\\\\n. '\n '/home/jovyan/.bashrc\\\\n\\\\n#alias aws=\"aws '\n '--endpoint-url=http://localstack:4566\"\\\\n\\\\n# &gt;&gt;&gt; conda initialize &gt;&gt;&gt;\\\\n# '\n \"!! Contents within this block are managed by \\\\'conda init\\\\' \"\n '!!\\\\n__conda_setup=\"$(\\\\\\'/opt/conda/bin/conda\\\\\\' \\\\\\'shell.bash\\\\\\' '\n '\\\\\\'hook\\\\\\' 2&gt; /dev/null)\"\\\\nif [ $? -eq 0 ]; then\\\\n    eval '\n '\"$__conda_setup\"\\\\nelse\\\\n    if [ -f \"/opt/conda/etc/profile.d/conda.sh\" ]; '\n 'then\\\\n        . \"/opt/conda/etc/profile.d/conda.sh\"\\\\n    else\\\\n        '\n 'export PATH=\"/srv/conda/bin:$PATH\"\\\\n    fi\\\\nfi\\\\nunset '\n '__conda_setup\\\\n\\\\nif [ -f \"/opt/conda/etc/profile.d/mamba.sh\" ]; then\\\\n    '\n '. \"/opt/conda/etc/profile.d/mamba.sh\"\\\\nfi\\\\n# &lt;&lt;&lt; conda initialize '\n '&lt;&lt;&lt;\\\\n\\\\na={{spawner.user.name}}\\\\n\\\\nalias aws=\"aws '\n '--endpoint-url=http://localstack-jupyter-{{spawner.user.name}}:4566\"\\', '\n \"persist=False)], volumes=[Volume(name='calrissian-volume', \"\n \"claim_name='calrissian-claim', size='50Gi', \"\n \"storage_class='managed-nfs-storage', access_modes=['ReadWriteMany'], \"\n \"volume_mount=VolumeMount(name='calrissian-volume', \"\n \"mount_path='/calrissian'), persist=False), Volume(name='workspace-volume', \"\n \"claim_name='workspace-claim', size='50Gi', \"\n \"storage_class='managed-nfs-storage', access_modes=['ReadWriteOnce'], \"\n \"volume_mount=VolumeMount(name='workspace-volume', mount_path='/workspace'), \"\n \"persist=True)], pod_env_vars={'HOME': '/workspace', 'CONDA_ENVS_PATH': \"\n \"'/workspace/.envs'}, default_url=None, node_selector={}, role_bindings=None, \"\n 'image_pull_secrets=[], init_containers=[], manifests=None, '\n 'env_from_config_maps=None, env_from_secrets=None, secret_mounts=None), '\n \"Profile(id='profile_demo_init_script', groups=['group-a', 'group-b'], \"\n \"definition=ProfileDefinition(display_name='Coder demo init script', \"\n \"description='This profile is used to demonstrate the use of an init script', \"\n \"slug='eoepca_demo_init_script', default=False, \"\n 'kubespawner_override=KubespawnerOverride(cpu_limit=2, cpu_guarantee=1, '\n \"mem_limit='6G', mem_guarantee='4G', image='eoepca/pde-code-server:develop', \"\n 'extra_resource_limits={}, extra_resource_guarantees={})), '\n \"config_maps=[ConfigMap(name='init', key='init', \"\n \"mount_path='/opt/init/.init.sh', default_mode='0660', readonly=True, \"\n 'content=\"set -x\\\\n\\\\ncd /workspace\\\\n\\\\ngit clone '\n \"'https://github.com/eoap/mastering-app-package.git'\\\\n\\\\ncode-server \"\n '--install-extension ms-python.python\\\\ncode-server --install-extension '\n 'redhat.vscode-yaml\\\\ncode-server --install-extension '\n 'sbg-rabix.benten-cwl\\\\ncode-server --install-extension '\n 'ms-toolsai.jupyter\\\\n\\\\nln -s /workspace/.local/share/code-server/extensions '\n '/workspace/extensions\\\\n\\\\nexit 0\\\\n\", persist=False)], '\n \"volumes=[Volume(name='calrissian-volume', claim_name='calrissian-claim', \"\n \"size='50Gi', storage_class='managed-nfs-storage', \"\n \"access_modes=['ReadWriteMany'], \"\n \"volume_mount=VolumeMount(name='calrissian-volume', \"\n \"mount_path='/calrissian'), persist=False), Volume(name='workspace-volume', \"\n \"claim_name='workspace-claim', size='50Gi', \"\n \"storage_class='managed-nfs-storage', access_modes=['ReadWriteOnce'], \"\n \"volume_mount=VolumeMount(name='workspace-volume', mount_path='/workspace'), \"\n \"persist=True)], pod_env_vars={'HOME': '/workspace', 'CONDA_ENVS_PATH': \"\n \"'/workspace/.envs', 'CONDARC': '/workspace/.condarc', 'XDG_RUNTIME_DIR': \"\n \"'/workspace/.local', 'CODE_SERVER_WS': '/workspace/mastering-app-package'}, \"\n 'default_url=None, node_selector={}, role_bindings=None, '\n 'image_pull_secrets=[], '\n \"init_containers=[InitContainer(name='init-file-on-volume', \"\n \"image='eoepca/pde-code-server:develop', command=['sh', '-c', 'sh \"\n \"/opt/init/.init.sh'], volume_mounts=[VolumeMount(name='workspace-volume', \"\n \"mount_path='/workspace'), InitContainerVolumeMount(name='init', \"\n \"mount_path='/opt/init/.init.sh', sub_path='init')])], manifests=None, \"\n 'env_from_config_maps=None, env_from_secrets=None, secret_mounts=None), '\n \"Profile(id='profile_jupyter_lab', groups=['group-c'], \"\n \"definition=ProfileDefinition(display_name='Jupyter Lab', \"\n \"description='Jupyter Lab with Python 3.11', slug='eoepca_jupyter_lab', \"\n 'default=False, kubespawner_override=KubespawnerOverride(cpu_limit=2, '\n \"cpu_guarantee=1, mem_limit='6G', mem_guarantee='4G', \"\n \"image='jupyter/scipy-notebook', extra_resource_limits={}, \"\n 'extra_resource_guarantees={})), config_maps=[], '\n \"volumes=[Volume(name='workspace-volume', claim_name='workspace-claim', \"\n \"size='50Gi', storage_class='managed-nfs-storage', \"\n \"access_modes=['ReadWriteOnce'], \"\n \"volume_mount=VolumeMount(name='workspace-volume', mount_path='/workspace'), \"\n \"persist=True)], pod_env_vars={'HOME': '/workspace', 'XDG_RUNTIME_DIR': \"\n \"'/workspace/.local', 'XDG_CONFIG_HOME': '/workspace/.config'}, \"\n 'default_url=None, node_selector={}, role_bindings=None, '\n 'image_pull_secrets=[], init_containers=[], manifests=None, '\n 'env_from_config_maps=None, env_from_secrets=None, secret_mounts=None), '\n \"Profile(id='profile_jupyter_lab_2', groups=['group-c'], \"\n \"definition=ProfileDefinition(display_name='Jupyter Lab - profile 2', \"\n \"description='Jupyter Lab with Python 3.11 private image - demoes the use of \"\n \"an image pull secret', slug='eoepca_jupyter_lab_2', default=False, \"\n 'kubespawner_override=KubespawnerOverride(cpu_limit=2, cpu_guarantee=1, '\n \"mem_limit='6G', mem_guarantee='4G', image='eoepca/iat-jupyterlab:develop', \"\n 'extra_resource_limits={}, extra_resource_guarantees={})), config_maps=[], '\n \"volumes=[Volume(name='workspace-volume', claim_name='workspace-claim', \"\n \"size='50Gi', storage_class='managed-nfs-storage', \"\n \"access_modes=['ReadWriteOnce'], \"\n \"volume_mount=VolumeMount(name='workspace-volume', mount_path='/workspace'), \"\n \"persist=True)], pod_env_vars={'HOME': '/workspace', 'XDG_RUNTIME_DIR': \"\n \"'/workspace/.local', 'XDG_CONFIG_HOME': '/workspace/.config'}, \"\n 'default_url=None, node_selector={}, role_bindings=None, '\n \"image_pull_secrets=[ImagePullSecret(name='cr-config', persist=False, \"\n \"data='ewogICAgImF1dGhzIjogewogICAgICAgICJjci50ZXJyYWR1ZS5jb20iOiB7CiAgICAgICAgICAgICJ1c2VybmFtZSI6ICJyb2JvdCRlb2VwY2EtcGx1cy1ybyIsCiAgICAgICAgICAgICJwYXNzd29yZCI6ICJQMlE4TnkyZ0lHODhkZkxveXlLN05QVUZVbHJOekFZSiIsCiAgICAgICAgICAgICJlbWFpbCI6ICJlb2VwY2EtcGx1c0B0ZXJyYWR1ZS5jb20iLAogICAgICAgICAgICAiYXV0aCI6ICJjbTlpYjNRa1pXOWxjR05oTFhCc2RYTXRjbTg2VURKUk9FNTVNbWRKUnpnNFpHWk1iM2w1U3pkT1VGVkdWV3h5VG5wQldVbz0iCiAgICAgICAgfQogICAgfQp9')], \"\n 'init_containers=[], manifests=None, env_from_config_maps=None, '\n 'env_from_secrets=None, secret_mounts=None), '\n \"Profile(id='profile_studio_coder_stac', groups=['group-a', 'group-b'], \"\n \"definition=ProfileDefinition(display_name='Understanding STAC for \"\n \"input/output data modelling', description='Understand the role of STAC in \"\n \"input/output data manifests in EO data processing workflows', \"\n \"slug='eoepca_coder_slug_stac', default=False, \"\n 'kubespawner_override=KubespawnerOverride(cpu_limit=2, cpu_guarantee=1, '\n \"mem_limit='6G', mem_guarantee='4G', \"\n \"image='docker.io/eoepca/pde-code-server@sha256:f57a3d5eabcae667e0db6e84a57b0c07c692c88f0fb5c8f6900ab8d5e38fcd40', \"\n 'extra_resource_limits={}, extra_resource_guarantees={})), '\n \"config_maps=[ConfigMap(name='init', key='init', \"\n \"mount_path='/opt/init/.init.sh', default_mode=None, readonly=True, \"\n \"content='set -x \\\\n\\\\ncd /workspace\\\\n\\\\ngit clone \"\n \"\\\\'https://github.com/eoap/stac-eoap.git\\\\'\\\\n\\\\ncode-server \"\n '--install-extension ms-python.python \\\\ncode-server --install-extension '\n 'redhat.vscode-yaml\\\\ncode-server --install-extension '\n 'sbg-rabix.benten-cwl\\\\ncode-server --install-extension '\n 'ms-toolsai.jupyter\\\\n\\\\nln -s /workspace/.local/share/code-server/extensions '\n '/workspace/extensions\\\\n\\\\nmkdir -p /workspace/User/\\\\n\\\\necho '\n '\\\\\\'{\"workbench.colorTheme\": \"Visual Studio Dark\"}\\\\\\' &gt; '\n '/workspace/User/settings.json\\\\n\\\\npython -m venv /workspace/.venv\\\\nsource '\n '/workspace/.venv/bin/activate\\\\n/workspace/.venv/bin/python -m pip install '\n '--no-cache-dir stactools rasterio requests stac-asset click-logging tabulate '\n 'tqdm pystac-client ipykernel loguru scikit-image rio_stac '\n 'boto3==1.35.23\\\\n\\\\n/workspace/.venv/bin/python -m pip install --index-url '\n 'https://test.pypi.org/simple cwl-wrapper\\\\n\\\\n/workspace/.venv/bin/python -m '\n 'ipykernel install --user --name stac_env --display-name \"Python '\n '(STAC)\"\\\\n\\\\nexport AWS_DEFAULT_REGION=\"us-east-1\"\\\\nexport '\n 'AWS_ACCESS_KEY_ID=\"test\"\\\\nexport AWS_SECRET_ACCESS_KEY=\"test\"\\\\naws s3 mb '\n \"s3://results --endpoint-url=http://localstack:4566\\\\n\\\\nexit 0', \"\n \"persist=False), ConfigMap(name='bash-rc', key='bash-rc', \"\n \"mount_path='/workspace/.bashrc', default_mode=None, readonly=True, \"\n 'content=\\'alias ll=\"ls -l\"\\\\nalias calrissian=\"/opt/conda/bin/calrissian '\n '--pod-nodeselectors /etc/calrissian/pod-node-selector.yml --stdout '\n '/calrissian/results.json --max-ram 16G --max-cores \"8\" --tmp-outdir-prefix '\n '/calrissian/tmp/ --outdir /calrissian/\"\\\\nalias '\n 'cwltool=\"/opt/conda/bin/cwltool --podman\"\\\\n. '\n '/home/jovyan/.bashrc\\\\n\\\\n#alias aws=\"aws '\n '--endpoint-url=http://localstack:4566\"\\\\n\\\\n# &gt;&gt;&gt; conda initialize &gt;&gt;&gt;\\\\n# '\n \"!! Contents within this block are managed by \\\\'conda init\\\\' \"\n '!!\\\\n__conda_setup=\"$(\\\\\\'/opt/conda/bin/conda\\\\\\' \\\\\\'shell.bash\\\\\\' '\n '\\\\\\'hook\\\\\\' 2&gt; /dev/null)\"\\\\nif [ $? -eq 0 ]; then\\\\n    eval '\n '\"$__conda_setup\"\\\\nelse\\\\n    if [ -f \"/opt/conda/etc/profile.d/conda.sh\" ]; '\n 'then\\\\n        . \"/opt/conda/etc/profile.d/conda.sh\"\\\\n    else\\\\n        '\n 'export PATH=\"/srv/conda/bin:$PATH\"\\\\n    fi\\\\nfi\\\\nunset '\n '__conda_setup\\\\n\\\\nif [ -f \"/opt/conda/etc/profile.d/mamba.sh\" ]; then\\\\n    '\n '. \"/opt/conda/etc/profile.d/mamba.sh\"\\\\nfi\\\\n# &lt;&lt;&lt; conda initialize '\n '&lt;&lt;&lt;\\\\n\\\\na={{spawner.user.name}}\\\\n\\\\nalias aws=\"aws '\n '--endpoint-url=http://localstack-jupyter-{{spawner.user.name}}:4566\"\\', '\n \"persist=False), ConfigMap(name='bash-login', key='bash-login', \"\n \"mount_path='/workspace/.bash_login', default_mode=None, readonly=True, \"\n \"content='source /workspace/.bashrc\\\\n', persist=False)], \"\n \"volumes=[Volume(name='workspace-volume', claim_name='workspace-claim', \"\n \"size='50Gi', storage_class='managed-nfs-storage', \"\n \"access_modes=['ReadWriteOnce'], \"\n \"volume_mount=VolumeMount(name='workspace-volume', mount_path='/workspace'), \"\n \"persist=True)], pod_env_vars={'HOME': '/workspace', 'CONDA_ENVS_PATH': \"\n \"'/workspace/.envs', 'CONDARC': '/workspace/.condarc', 'XDG_RUNTIME_DIR': \"\n \"'/workspace/.local', 'XDG_CONFIG_HOME': '/workspace/.local', \"\n \"'XDG_DATA_HOME': '/workspace/.local/share/', 'CWLTOOL_OPTIONS': '--podman', \"\n \"'CODE_SERVER_WS': '/workspace/stac-eoap', 'AWS_DEFAULT_REGION': 'us-east-1', \"\n \"'AWS_ACCESS_KEY_ID': 'test', 'AWS_SECRET_ACCESS_KEY': 'test'}, \"\n 'default_url=None, node_selector={}, role_bindings=[], '\n \"image_pull_secrets=[ImagePullSecret(name='cr-config', persist=False, \"\n \"data='ewogICAgImF1dGhzIjogewogICAgICAgICJjci50ZXJyYWR1ZS5jb20iOiB7CiAgICAgICAgICAgICJ1c2VybmFtZSI6ICJyb2JvdCRlb2VwY2EtcGx1cy1ybyIsCiAgICAgICAgICAgICJwYXNzd29yZCI6ICJQMlE4TnkyZ0lHODhkZkxveXlLN05QVUZVbHJOekFZSiIsCiAgICAgICAgICAgICJlbWFpbCI6ICJlb2VwY2EtcGx1c0B0ZXJyYWR1ZS5jb20iLAogICAgICAgICAgICAiYXV0aCI6ICJjbTlpYjNRa1pXOWxjR05oTFhCc2RYTXRjbTg2VURKUk9FNTVNbWRKUnpnNFpHWk1iM2w1U3pkT1VGVkdWV3h5VG5wQldVbz0iCiAgICAgICAgfQogICAgfQp9')], \"\n \"init_containers=[InitContainer(name='init-file-on-volume', \"\n \"image='eoepca/pde-code-server:develop', command=['sh', '-c', 'sh \"\n \"/opt/init/.init.sh'], volume_mounts=[VolumeMount(name='workspace-volume', \"\n \"mount_path='/workspace'), InitContainerVolumeMount(name='init', \"\n \"mount_path='/opt/init/.init.sh', sub_path='init')])], \"\n \"manifests=[Manifest(name='manifests', key='manifests', \"\n \"content=[{'apiVersion': 'v1', 'kind': 'ServiceAccount', 'metadata': {'name': \"\n \"'localstack'}}, {'apiVersion': 'rbac.authorization.k8s.io/v1', 'kind': \"\n \"'Role', 'metadata': {'name': 'localstack'}, 'rules': [{'apiGroups': [''], \"\n \"'resources': ['pods'], 'verbs': ['*']}, {'apiGroups': [''], 'resources': \"\n \"['pods/log'], 'verbs': ['get']}, {'apiGroups': [''], 'resources': \"\n \"['pods/exec'], 'verbs': ['get', 'create']}, {'apiGroups': [''], 'resources': \"\n \"['services'], 'verbs': ['get', 'list']}]}, {'apiVersion': \"\n \"'rbac.authorization.k8s.io/v1', 'kind': 'RoleBinding', 'metadata': {'name': \"\n \"'localstack'}, 'subjects': [{'kind': 'ServiceAccount', 'name': \"\n \"'localstack'}], 'roleRef': {'kind': 'Role', 'name': 'localstack', \"\n \"'apiGroup': 'rbac.authorization.k8s.io'}}, {'apiVersion': 'v1', 'kind': \"\n \"'Service', 'metadata': {'name': 'localstack'}, 'spec': {'type': 'ClusterIP', \"\n \"'ports': [{'name': 'edge', 'port': 4566, 'targetPort': 4566}, {'name': \"\n \"'external-service-port-4510', 'port': 4510, 'targetPort': 'ext-svc-4510'}, \"\n \"{'name': 'external-service-port-4511', 'port': 4511, 'targetPort': \"\n \"'ext-svc-4511'}, {'name': 'external-service-port-4512', 'port': 4512, \"\n \"'targetPort': 'ext-svc-4512'}, {'name': 'external-service-port-4513', \"\n \"'port': 4513, 'targetPort': 'ext-svc-4513'}, {'name': \"\n \"'external-service-port-4514', 'port': 4514, 'targetPort': 'ext-svc-4514'}, \"\n \"{'name': 'external-service-port-4515', 'port': 4515, 'targetPort': \"\n \"'ext-svc-4515'}, {'name': 'external-service-port-4516', 'port': 4516, \"\n \"'targetPort': 'ext-svc-4516'}, {'name': 'external-service-port-4517', \"\n \"'port': 4517, 'targetPort': 'ext-svc-4517'}, {'name': \"\n \"'external-service-port-4518', 'port': 4518, 'targetPort': 'ext-svc-4518'}, \"\n \"{'name': 'external-service-port-4519', 'port': 4519, 'targetPort': \"\n \"'ext-svc-4519'}, {'name': 'external-service-port-4520', 'port': 4520, \"\n \"'targetPort': 'ext-svc-4520'}, {'name': 'external-service-port-4521', \"\n \"'port': 4521, 'targetPort': 'ext-svc-4521'}, {'name': \"\n \"'external-service-port-4522', 'port': 4522, 'targetPort': 'ext-svc-4522'}, \"\n \"{'name': 'external-service-port-4523', 'port': 4523, 'targetPort': \"\n \"'ext-svc-4523'}, {'name': 'external-service-port-4524', 'port': 4524, \"\n \"'targetPort': 'ext-svc-4524'}, {'name': 'external-service-port-4525', \"\n \"'port': 4525, 'targetPort': 'ext-svc-4525'}, {'name': \"\n \"'external-service-port-4526', 'port': 4526, 'targetPort': 'ext-svc-4526'}, \"\n \"{'name': 'external-service-port-4527', 'port': 4527, 'targetPort': \"\n \"'ext-svc-4527'}, {'name': 'external-service-port-4528', 'port': 4528, \"\n \"'targetPort': 'ext-svc-4528'}, {'name': 'external-service-port-4529', \"\n \"'port': 4529, 'targetPort': 'ext-svc-4529'}, {'name': \"\n \"'external-service-port-4530', 'port': 4530, 'targetPort': 'ext-svc-4530'}, \"\n \"{'name': 'external-service-port-4531', 'port': 4531, 'targetPort': \"\n \"'ext-svc-4531'}, {'name': 'external-service-port-4532', 'port': 4532, \"\n \"'targetPort': 'ext-svc-4532'}, {'name': 'external-service-port-4533', \"\n \"'port': 4533, 'targetPort': 'ext-svc-4533'}, {'name': \"\n \"'external-service-port-4534', 'port': 4534, 'targetPort': 'ext-svc-4534'}, \"\n \"{'name': 'external-service-port-4535', 'port': 4535, 'targetPort': \"\n \"'ext-svc-4535'}, {'name': 'external-service-port-4536', 'port': 4536, \"\n \"'targetPort': 'ext-svc-4536'}, {'name': 'external-service-port-4537', \"\n \"'port': 4537, 'targetPort': 'ext-svc-4537'}, {'name': \"\n \"'external-service-port-4538', 'port': 4538, 'targetPort': 'ext-svc-4538'}, \"\n \"{'name': 'external-service-port-4539', 'port': 4539, 'targetPort': \"\n \"'ext-svc-4539'}, {'name': 'external-service-port-4540', 'port': 4540, \"\n \"'targetPort': 'ext-svc-4540'}, {'name': 'external-service-port-4541', \"\n \"'port': 4541, 'targetPort': 'ext-svc-4541'}, {'name': \"\n \"'external-service-port-4542', 'port': 4542, 'targetPort': 'ext-svc-4542'}, \"\n \"{'name': 'external-service-port-4543', 'port': 4543, 'targetPort': \"\n \"'ext-svc-4543'}, {'name': 'external-service-port-4544', 'port': 4544, \"\n \"'targetPort': 'ext-svc-4544'}, {'name': 'external-service-port-4545', \"\n \"'port': 4545, 'targetPort': 'ext-svc-4545'}, {'name': \"\n \"'external-service-port-4546', 'port': 4546, 'targetPort': 'ext-svc-4546'}, \"\n \"{'name': 'external-service-port-4547', 'port': 4547, 'targetPort': \"\n \"'ext-svc-4547'}, {'name': 'external-service-port-4548', 'port': 4548, \"\n \"'targetPort': 'ext-svc-4548'}, {'name': 'external-service-port-4549', \"\n \"'port': 4549, 'targetPort': 'ext-svc-4549'}, {'name': \"\n \"'external-service-port-4550', 'port': 4550, 'targetPort': 'ext-svc-4550'}, \"\n \"{'name': 'external-service-port-4551', 'port': 4551, 'targetPort': \"\n \"'ext-svc-4551'}, {'name': 'external-service-port-4552', 'port': 4552, \"\n \"'targetPort': 'ext-svc-4552'}, {'name': 'external-service-port-4553', \"\n \"'port': 4553, 'targetPort': 'ext-svc-4553'}, {'name': \"\n \"'external-service-port-4554', 'port': 4554, 'targetPort': 'ext-svc-4554'}, \"\n \"{'name': 'external-service-port-4555', 'port': 4555, 'targetPort': \"\n \"'ext-svc-4555'}, {'name': 'external-service-port-4556', 'port': 4556, \"\n \"'targetPort': 'ext-svc-4556'}, {'name': 'external-service-port-4557', \"\n \"'port': 4557, 'targetPort': 'ext-svc-4557'}, {'name': \"\n \"'external-service-port-4558', 'port': 4558, 'targetPort': 'ext-svc-4558'}, \"\n \"{'name': 'external-service-port-4559', 'port': 4559, 'targetPort': \"\n \"'ext-svc-4559'}], 'selector': {'app.kubernetes.io/name': 'localstack', \"\n \"'app.kubernetes.io/instance': 'localstack'}}}, {'apiVersion': 'apps/v1', \"\n \"'kind': 'Deployment', 'metadata': {'name': 'localstack'}, 'spec': \"\n \"{'replicas': 1, 'strategy': {'type': 'RollingUpdate'}, 'selector': \"\n \"{'matchLabels': {'app.kubernetes.io/name': 'localstack', \"\n \"'app.kubernetes.io/instance': 'localstack'}}, 'template': {'metadata': \"\n \"{'labels': {'app': 'localstack-{{ spawner.user.name }}', \"\n \"'app.kubernetes.io/name': 'localstack', 'app.kubernetes.io/instance': \"\n \"'localstack'}}, 'spec': {'serviceAccountName': 'localstack', \"\n \"'securityContext': {}, 'containers': [{'name': 'localstack', \"\n \"'securityContext': {}, 'image': 'localstack/localstack:latest', \"\n \"'imagePullPolicy': 'IfNotPresent', 'ports': [{'name': 'edge', \"\n \"'containerPort': 4566, 'protocol': 'TCP'}, {'name': 'ext-svc-4510', \"\n \"'containerPort': 4510, 'protocol': 'TCP'}, {'name': 'ext-svc-4511', \"\n \"'containerPort': 4511, 'protocol': 'TCP'}, {'name': 'ext-svc-4512', \"\n \"'containerPort': 4512, 'protocol': 'TCP'}, {'name': 'ext-svc-4513', \"\n \"'containerPort': 4513, 'protocol': 'TCP'}, {'name': 'ext-svc-4514', \"\n \"'containerPort': 4514, 'protocol': 'TCP'}, {'name': 'ext-svc-4515', \"\n \"'containerPort': 4515, 'protocol': 'TCP'}, {'name': 'ext-svc-4516', \"\n \"'containerPort': 4516, 'protocol': 'TCP'}, {'name': 'ext-svc-4517', \"\n \"'containerPort': 4517, 'protocol': 'TCP'}, {'name': 'ext-svc-4518', \"\n \"'containerPort': 4518, 'protocol': 'TCP'}, {'name': 'ext-svc-4519', \"\n \"'containerPort': 4519, 'protocol': 'TCP'}, {'name': 'ext-svc-4520', \"\n \"'containerPort': 4520, 'protocol': 'TCP'}, {'name': 'ext-svc-4521', \"\n \"'containerPort': 4521, 'protocol': 'TCP'}, {'name': 'ext-svc-4522', \"\n \"'containerPort': 4522, 'protocol': 'TCP'}, {'name': 'ext-svc-4523', \"\n \"'containerPort': 4523, 'protocol': 'TCP'}, {'name': 'ext-svc-4524', \"\n \"'containerPort': 4524, 'protocol': 'TCP'}, {'name': 'ext-svc-4525', \"\n \"'containerPort': 4525, 'protocol': 'TCP'}, {'name': 'ext-svc-4526', \"\n \"'containerPort': 4526, 'protocol': 'TCP'}, {'name': 'ext-svc-4527', \"\n \"'containerPort': 4527, 'protocol': 'TCP'}, {'name': 'ext-svc-4528', \"\n \"'containerPort': 4528, 'protocol': 'TCP'}, {'name': 'ext-svc-4529', \"\n \"'containerPort': 4529, 'protocol': 'TCP'}, {'name': 'ext-svc-4530', \"\n \"'containerPort': 4530, 'protocol': 'TCP'}, {'name': 'ext-svc-4531', \"\n \"'containerPort': 4531, 'protocol': 'TCP'}, {'name': 'ext-svc-4532', \"\n \"'containerPort': 4532, 'protocol': 'TCP'}, {'name': 'ext-svc-4533', \"\n \"'containerPort': 4533, 'protocol': 'TCP'}, {'name': 'ext-svc-4534', \"\n \"'containerPort': 4534, 'protocol': 'TCP'}, {'name': 'ext-svc-4535', \"\n \"'containerPort': 4535, 'protocol': 'TCP'}, {'name': 'ext-svc-4536', \"\n \"'containerPort': 4536, 'protocol': 'TCP'}, {'name': 'ext-svc-4537', \"\n \"'containerPort': 4537, 'protocol': 'TCP'}, {'name': 'ext-svc-4538', \"\n \"'containerPort': 4538, 'protocol': 'TCP'}, {'name': 'ext-svc-4539', \"\n \"'containerPort': 4539, 'protocol': 'TCP'}, {'name': 'ext-svc-4540', \"\n \"'containerPort': 4540, 'protocol': 'TCP'}, {'name': 'ext-svc-4541', \"\n \"'containerPort': 4541, 'protocol': 'TCP'}, {'name': 'ext-svc-4542', \"\n \"'containerPort': 4542, 'protocol': 'TCP'}, {'name': 'ext-svc-4543', \"\n \"'containerPort': 4543, 'protocol': 'TCP'}, {'name': 'ext-svc-4544', \"\n \"'containerPort': 4544, 'protocol': 'TCP'}, {'name': 'ext-svc-4545', \"\n \"'containerPort': 4545, 'protocol': 'TCP'}, {'name': 'ext-svc-4546', \"\n \"'containerPort': 4546, 'protocol': 'TCP'}, {'name': 'ext-svc-4547', \"\n \"'containerPort': 4547, 'protocol': 'TCP'}, {'name': 'ext-svc-4548', \"\n \"'containerPort': 4548, 'protocol': 'TCP'}, {'name': 'ext-svc-4549', \"\n \"'containerPort': 4549, 'protocol': 'TCP'}, {'name': 'ext-svc-4550', \"\n \"'containerPort': 4550, 'protocol': 'TCP'}, {'name': 'ext-svc-4551', \"\n \"'containerPort': 4551, 'protocol': 'TCP'}, {'name': 'ext-svc-4552', \"\n \"'containerPort': 4552, 'protocol': 'TCP'}, {'name': 'ext-svc-4553', \"\n \"'containerPort': 4553, 'protocol': 'TCP'}, {'name': 'ext-svc-4554', \"\n \"'containerPort': 4554, 'protocol': 'TCP'}, {'name': 'ext-svc-4555', \"\n \"'containerPort': 4555, 'protocol': 'TCP'}, {'name': 'ext-svc-4556', \"\n \"'containerPort': 4556, 'protocol': 'TCP'}, {'name': 'ext-svc-4557', \"\n \"'containerPort': 4557, 'protocol': 'TCP'}, {'name': 'ext-svc-4558', \"\n \"'containerPort': 4558, 'protocol': 'TCP'}, {'name': 'ext-svc-4559', \"\n \"'containerPort': 4559, 'protocol': 'TCP'}], 'livenessProbe': \"\n \"{'failureThreshold': 3, 'initialDelaySeconds': 0, 'periodSeconds': 10, \"\n \"'successThreshold': 1, 'timeoutSeconds': 1, 'httpGet': {'path': \"\n \"'/_localstack/health', 'port': 'edge'}}, 'readinessProbe': \"\n \"{'failureThreshold': 3, 'initialDelaySeconds': 0, 'periodSeconds': 10, \"\n \"'successThreshold': 1, 'timeoutSeconds': 1, 'httpGet': {'path': \"\n \"'/_localstack/health', 'port': 'edge'}}, 'resources': {}, 'env': [{'name': \"\n \"'DEBUG', 'value': '0'}, {'name': 'EXTERNAL_SERVICE_PORTS_START', 'value': \"\n \"'4510'}, {'name': 'EXTERNAL_SERVICE_PORTS_END', 'value': '4560'}, {'name': \"\n \"'LOCALSTACK_K8S_SERVICE_NAME', 'value': 'localstack'}, {'name': \"\n \"'LOCALSTACK_K8S_NAMESPACE', 'valueFrom': {'fieldRef': {'fieldPath': \"\n \"'metadata.namespace'}}}, {'name': 'LAMBDA_RUNTIME_EXECUTOR', 'value': \"\n \"'docker'}, {'name': 'LAMBDA_K8S_IMAGE_PREFIX', 'value': \"\n \"'localstack/lambda-'}, {'name': 'LAMBDA_RUNTIME_ENVIRONMENT_TIMEOUT', \"\n \"'value': '60'}, {'name': 'OVERRIDE_IN_DOCKER', 'value': '1'}]}], 'volumes': \"\n \"[]}}}}, {'apiVersion': 'v1', 'kind': 'ConfigMap', 'metadata': {'name': \"\n \"'my-config'}, 'data': {'ENV_VAR1': 'value1', 'ENV_VAR2': 'value2'}}, \"\n \"{'apiVersion': 'v1', 'kind': 'Secret', 'metadata': {'name': 'my-secret'}, \"\n \"'type': 'Opaque', 'data': {'SECRET_KEY1': 'dmFsdWUx', 'SECRET_KEY2': \"\n \"'dmFsdWUy'}}, {'apiVersion': 'v1', 'kind': 'Secret', 'metadata': {'name': \"\n \"'aws-credentials-{{ spawner.user.name }}'}, 'type': 'Opaque', 'data': \"\n \"{'credentials': \"\n \"'W2RlZmF1bHRdCmF3c19hY2Nlc3Nfa2V5X2lkPUFTSUFJT1NGT0ROTjdFWEFNUExFCmF3c19zZWNyZXRfYWNjZXNzX2tleT13SmFsclhVdG5GRU1JL0s3TURFTkcvYlB4UmZpQ1lFWEFNUExFS0VZCmF3c19zZXNzaW9uX3Rva2VuPUlRb0piM2pySmdCV05FTE5Hb2xHSkxFT3RTVEFOR1k0TFlPNUk0SzVOUlZFS1pPTkNTTk1HRlNUS1FNSUxXUjJPUzAwRklDRTExSlg='}}, \"\n \"{'apiVersion': 'external-secrets.io/v1beta1', 'kind': 'ExternalSecret', \"\n \"'metadata': {'name': 'data-by-name', 'namespace': 'jupyter-{{ \"\n \"spawner.user.name }}'}, 'spec': {'refreshInterval': '15s', 'secretStoreRef': \"\n \"{'kind': 'ClusterSecretStore', 'name': 'k8s-secret-store'}, 'target': \"\n \"{'name': 'data-by-name', 'creationPolicy': 'Owner'}, 'data': [{'secretKey': \"\n \"'secret-value', 'remoteRef': {'key': 'secret-one', 'property': \"\n \"'the-key'}}]}}, {'apiVersion': 'external-secrets.io/v1beta1', 'kind': \"\n \"'ExternalSecret', 'metadata': {'name': 'eoepca-plus-secret-ro', 'namespace': \"\n \"'jupyter-{{ spawner.user.name }}'}, 'spec': {'refreshInterval': '15s', \"\n \"'secretStoreRef': {'kind': 'ClusterSecretStore', 'name': \"\n \"'k8s-secret-store'}, 'target': {'name': 'eoepca-plus-secret-ro', \"\n \"'creationPolicy': 'Owner'}, 'data': [{'secretKey': '.dockerconfigjson', \"\n \"'remoteRef': {'key': 'eoepca-plus-secret-ro', 'property': \"\n \"'.dockerconfigjson'}}]}}], persist=False)], env_from_config_maps=None, \"\n 'env_from_secrets=None, secret_mounts=None), '\n \"Profile(id='profile_studio_desktop_qgis', groups=['group-a', 'group-b'], \"\n \"definition=ProfileDefinition(display_name='QGIS on a Remote Desktop', \"\n \"description='Spatial visualization and decision-making tools for everyone', \"\n \"slug='eoepca_desktop_qgis', default=False, \"\n 'kubespawner_override=KubespawnerOverride(cpu_limit=2, cpu_guarantee=None, '\n \"mem_limit='2G', mem_guarantee=None, \"\n \"image='eoepca/iga-remote-desktop-qgis:1.1.3', extra_resource_limits={}, \"\n \"extra_resource_guarantees={})), config_maps=[ConfigMap(name='bash-rc', \"\n \"key='bash-rc', mount_path='/workspace/.bashrc', default_mode=None, \"\n 'readonly=True, content=\\'alias ll=\"ls -l\"\\\\nalias '\n 'calrissian=\"/opt/conda/bin/calrissian --pod-nodeselectors '\n '/etc/calrissian/pod-node-selector.yml --stdout /calrissian/results.json '\n '--max-ram 16G --max-cores \"8\" --tmp-outdir-prefix /calrissian/tmp/ --outdir '\n '/calrissian/\"\\\\nalias cwltool=\"/opt/conda/bin/cwltool --podman\"\\\\n. '\n '/home/jovyan/.bashrc\\\\n\\\\n#alias aws=\"aws '\n '--endpoint-url=http://localstack:4566\"\\\\n\\\\n# &gt;&gt;&gt; conda initialize &gt;&gt;&gt;\\\\n# '\n \"!! Contents within this block are managed by \\\\'conda init\\\\' \"\n '!!\\\\n__conda_setup=\"$(\\\\\\'/opt/conda/bin/conda\\\\\\' \\\\\\'shell.bash\\\\\\' '\n '\\\\\\'hook\\\\\\' 2&gt; /dev/null)\"\\\\nif [ $? -eq 0 ]; then\\\\n    eval '\n '\"$__conda_setup\"\\\\nelse\\\\n    if [ -f \"/opt/conda/etc/profile.d/conda.sh\" ]; '\n 'then\\\\n        . \"/opt/conda/etc/profile.d/conda.sh\"\\\\n    else\\\\n        '\n 'export PATH=\"/srv/conda/bin:$PATH\"\\\\n    fi\\\\nfi\\\\nunset '\n '__conda_setup\\\\n\\\\nif [ -f \"/opt/conda/etc/profile.d/mamba.sh\" ]; then\\\\n    '\n '. \"/opt/conda/etc/profile.d/mamba.sh\"\\\\nfi\\\\n# &lt;&lt;&lt; conda initialize '\n '&lt;&lt;&lt;\\\\n\\\\na={{spawner.user.name}}\\\\n\\\\nalias aws=\"aws '\n '--endpoint-url=http://localstack-jupyter-{{spawner.user.name}}:4566\"\\', '\n \"persist=False), ConfigMap(name='bash-login', key='bash-login', \"\n \"mount_path='/workspace/.bash_login', default_mode=None, readonly=True, \"\n \"content='source /workspace/.bashrc\\\\n', persist=False)], \"\n \"volumes=[Volume(name='workspace-volume', claim_name='workspace-claim', \"\n \"size='50Gi', storage_class='managed-nfs-storage', \"\n \"access_modes=['ReadWriteOnce'], \"\n \"volume_mount=VolumeMount(name='workspace-volume', mount_path='/workspace'), \"\n \"persist=True)], pod_env_vars={'HOME': '/workspace'}, default_url='desktop', \"\n 'node_selector={}, role_bindings=None, image_pull_secrets=[], '\n 'init_containers=[], manifests=None, env_from_config_maps=None, '\n 'env_from_secrets=None, secret_mounts=None)]')\n</pre>"},{"location":"config-generator/#generate-app-hubs-configuration","title":"Generate App Hub's configuration\u00b6","text":"<p>This notebook aim to produce a <code>config.yml</code> file to generate all the configuration needs to be set for deployment of App Hub on a remote cluster using Devops tools.</p> <p>This Notebook can be used for the following requirements:</p> <ul> <li>Initial dependencies</li> <li>Create the configuration for kubernetes' <code>PV</code>s, and <code>PVC</code>s(e.g. workspace volume, and calrissian volume)</li> <li>Generate the configuration for kubernetes' config maps</li> <li>Creation of different Profiles</li> </ul> <p>Table of Content:</p> <ul> <li>Initial dependencies<ul> <li>Configuration</li> </ul> </li> <li>Volumes<ul> <li>Workspace volume</li> <li>Calrissian volume</li> </ul> </li> <li>Configmaps<ul> <li>bash login Configmap</li> <li>bash rc Configmap</li> <li>QGIS Configmap</li> <li>Stage-in/out Configmap</li> </ul> </li> <li>Profiles<ul> <li>Coder</li> <li>Coder with init.sh</li> <li>JupyterLab</li> <li>JupyterLab Plus</li> <li>E-Learning</li> <li>QGIS</li> </ul> </li> <li>Write Configuration</li> </ul>"},{"location":"config-generator/#initial-dependencies","title":"Initial dependencies\u00b6","text":""},{"location":"config-generator/#configuration","title":"Configuration\u00b6","text":""},{"location":"config-generator/#volumes","title":"Volumes\u00b6","text":"<p>In this section, the user will provide the data class objects for creation of volume:</p> <ul> <li>Volume for workspace</li> <li>Volume for calrissian These two configuration will be use</li> </ul>"},{"location":"config-generator/#workspace-volume","title":"Workspace Volume\u00b6","text":"<p>In this section, the user will providing the configuration of a kubernetes Volume for development environment (i.e workspace). It is important to mention that this volume must keep data persistently. therefore, the user set <code>persist=True</code></p>"},{"location":"config-generator/#calrissian-volume","title":"Calrissian Volume\u00b6","text":"<p>In this section, the user will configure a Kubernetes Volume for Calrissian jobs. Since the job runs within Calrissian and does not require data retention on the Calrissian pod, therefore the user should set <code>persist=False</code>.</p>"},{"location":"config-generator/#configmaps","title":"ConfigMaps\u00b6","text":"<p>In this section, the user will provide the configuration for some kubernetes configmaps that is commonly used in this notebook including:</p> <ul> <li>bash login Configmap</li> <li>bash rc Configmap</li> <li>QGIS Configmap</li> <li>Stage-in/out Configmap These configmaps will be mounted as files on different pods.</li> </ul>"},{"location":"config-generator/#bash-login-configmap","title":"bash login Configmap\u00b6","text":"<p>This configmap file aims to configure the Terminal across different profiles.</p>"},{"location":"config-generator/#bash-rc-configmap","title":"bash-rc Configmap\u00b6","text":"<p>This section explains how we configure a Kubernetes ConfigMap to manage the <code>.bashrc</code> file inside a pod. This config map will:</p> <ul> <li>It provides useful aliases and environment settings for users.</li> <li>It ensures a consistent environment across different pods.</li> </ul>"},{"location":"config-generator/#qgis-configmap","title":"QGIS Configmap\u00b6","text":"<p>The cell below will provide a Configmap configuration for QGIS setup.</p>"},{"location":"config-generator/#stage-inout-configmap","title":"Stage-in/out Configmap\u00b6","text":"<p>The cell below will provide a Configmap configuration for stage-in/out for e-learning profile.</p>"},{"location":"config-generator/#coder-init-configmap","title":"Coder init Configmap\u00b6","text":"<p>The cell below will provide a Configmap configuration for stage-in/out for coder profile.</p>"},{"location":"config-generator/#profiles","title":"Profiles\u00b6","text":"<p>In the following section, the user will generate the configuration for different profiles on a remote cluster including:</p> <ul> <li>Coder</li> <li>Coder with init.sh</li> <li>Jupyter Lab</li> <li>JupyterLab Plus</li> <li>E-learning</li> <li>QGIS</li> </ul>"},{"location":"config-generator/#coder","title":"Coder\u00b6","text":"<p>In the cell below, the user configures two code-server profiles to be deployed on a remote cluster. One profile (medium) has more resources than the other (small). Two Kubernetes Volumes, discussed in the Volume section, are assigned, and a ConfigMap is mounted.</p>"},{"location":"config-generator/#coder-with-initsh","title":"Coder with init.sh\u00b6","text":"<p>In the cell below, the user configures the code-server with a new profile, which extends the existing coder profile. The init container is responsible for executing a Bash script to initialize the code-server pod. In this case, the script <code>init.sh</code> runs during pod initialization to clone a Git repository and install extensions on the deployed code-server.</p>"},{"location":"config-generator/#jupyterlab","title":"JupyterLab\u00b6","text":"<p>In the cell below, the user adds a JupyterLab profile to the stack of profiles.  The workspace volume is mounted to persist user files, and necessary environment variables are set to ensure a smooth user experience.</p>"},{"location":"config-generator/#jupyterlab-plus","title":"JupyterLab Plus\u00b6","text":"<p>JupyterLab Plus is an extended version of the JupyterLab profile with additional features and capabilities. The Docker image for this profile is hosted on a private Docker registry, requiring the user to configure a pull secret to authenticate and successfully pull the JupyterLab Plus image on the remote cluster.</p>"},{"location":"config-generator/#e-learning","title":"E-Learning\u00b6","text":"<p>This profile is an extended version of code-server, configured to initialize with an init container using init.sh. It also mounts several ConfigMaps, including bash-rc, bash-login, and stage-in/out. Additionally, key Kubernetes objects such as Role, RoleBinding, and Service are defined using a Kubernetes manifest. This manifest ultimately exposes LocalStack as a Service, allowing users to emulate AWS locally.</p>"},{"location":"config-generator/#qgis","title":"QGIS\u00b6","text":"<p>This profile is configured to deploy the QGIS application on the App Hub, enabling users to visualize and analyze Earth observation data directly within the platform. The deployment ensures that QGIS is configured with the necessary resources, storage, and dependencies to support geospatial analysis, map rendering, and data processing. By integrating QGIS into the App Hub, users can seamlessly interact with satellite imagery, vector layers, and raster data for advanced geospatial analysis.</p>"},{"location":"config-generator/#write-configuration","title":"Write Configuration\u00b6","text":"<p>In the code below, the user inspects all the configurations made in the previous section and then generates a config.yaml file. This file contains the complete configuration of the App Hub, including the different profiles defined for deployment. The <code>config.yaml</code> serves as the configuration blueprint, allowing the user to easily apply and share the profiles across different environments or clusters.</p>"},{"location":"configuration/","title":"Configuration","text":""},{"location":"configuration/#overview","title":"Overview","text":"<p>In the Application Hub, configuration is vital for defining Kubernetes objects through YAML files, ensuring consistent and scalable deployments. This approach allows users to specify the desired state of resources, with Kubernetes managing the necessary adjustments to align with this state.</p> <p>Developing Kubernetes manifests or configuring the cluster using YAML files can be challenging and prone to errors. To simplify this process, a Python-based configuration generator can be used to produce clean, well-structured YAML files. This reduces the risk of misconfiguration and improves maintainability. Users can programmatically define and customize various Kubernetes resources(e.g.Pods, Volumes, and ConfigMaps), well as handling the External Secrets Operator, define profiles, and manage Helm releases. This approach offers flexibility and empowers users to tailor deployments to their specific requirements.</p>"},{"location":"configuration/#apphub-configurator","title":"Apphub-configurator","text":"<p>The Configuration Generator is a Python module designed to facilitate the creation of configuration files for Application Hub deployments. It offers various utilities to streamline the configuration process.</p>"},{"location":"configuration/#python-utilities","title":"Python utilities:","text":"<ul> <li> <p><code>load_config_map(name, key, file_name, mount_path)</code>: Reads a specified file and returns a <code>ConfigMap</code> object with the file's content, intended for use within Kubernetes configurations.</p> </li> <li> <p><code>load_manifests(name, key, file_path)</code>: Loads a YAML file containing Kubernetes manifests and returns a <code>Manifest</code> object. This is useful for deploying one or multiple Kubernetes objects, such as Roles, RoleBindings, ServiceAccounts, and Releases.</p> </li> <li> <p><code>create_init_container(image, volume, mount_path)</code>: Sets up an init container that executes specified commands during pod initialization. </p> </li> <li> <p><code>load_init_script(file_name)</code>: Loads a bash script intended for pod initialization and returns a <code>ConfigMap</code> object.</p> </li> </ul> <p>By utilizing these utilities, users can efficiently generate and manage configuration files, ensuring consistent and scalable deployments within the Application Hub environment.</p>"},{"location":"configuration/#kubernetes-object-data-classes","title":"Kubernetes Object Data Classes","text":"<p>The module defines several Pydantic-based data classes representing Kubernetes objects, facilitating structured and validated configuration management:</p> <ul> <li> <p><code>ConfigMapKeyRef</code>: Represents a reference to a specific key within a Kubernetes ConfigMap, including the <code>name</code> of the ConfigMap and the <code>key</code> within it.</p> </li> <li> <p><code>ConfigMapEnvVarReference</code>: Encapsulates a reference to a ConfigMap key, used to define environment variables in Kubernetes pods sourced from ConfigMap data.</p> </li> <li> <p><code>SubjectKind</code>: An enumeration specifying the type of subject (e.g., <code>ServiceAccount</code>, <code>User</code>) for role-based access control (RBAC) configurations.</p> </li> <li> <p><code>Verb</code>: An enumeration listing the allowed actions (e.g., <code>get</code>, <code>list</code>, <code>create</code>) for RBAC roles and role bindings.</p> </li> <li> <p><code>Subject</code>: Defines a subject in RBAC, comprising a <code>name</code> and a <code>kind</code> (type).</p> </li> <li> <p><code>Role</code>: Represents a Kubernetes Role, detailing the <code>name</code>, a list of <code>resources</code> it governs, permissible <code>verbs</code> (actions), and optional <code>api_groups</code>.</p> </li> <li> <p><code>RoleBinding</code>: Binds a <code>Role</code> to specific <code>subjects</code>, assigning the defined permissions within a namespace. It includes a <code>name</code>, a list of <code>subjects</code>, the associated <code>role</code>, and a <code>persist</code> flag indicating whether the binding should be saved.</p> </li> <li> <p><code>VolumeMount</code>: Specifies how a volume is mounted into a pod, detailing the <code>name</code> of the volume and the <code>mount_path</code> within the container's filesystem.</p> </li> <li> <p><code>InitContainerVolumeMount</code>: Extends <code>VolumeMount</code> by adding a <code>sub_path</code>, allowing a specific file or directory within the volume to be mounted at the desired path.</p> </li> <li> <p><code>Volume</code>: Describes a Kubernetes volume, including its <code>name</code>, <code>claim_name</code> for persistent volumes, <code>size</code>, <code>storage_class</code>, <code>access_modes</code>, an associated <code>volume_mount</code>, and a <code>persist</code> flag.</p> </li> <li> <p><code>Manifest</code>: Represents a collection of Kubernetes objects, encompassing a <code>name</code>, a <code>key</code>, optional <code>content</code> (a list of dictionaries representing Kubernetes resources), and a <code>persist</code> flag.</p> </li> <li> <p><code>ConfigMap</code>: Defines a Kubernetes ConfigMap, including a <code>name</code>, <code>key</code>, optional <code>mount_path</code> for mounting the ConfigMap as a file, an optional <code>default_mode</code> for file permissions, a <code>readonly</code> flag, optional <code>content</code>, and a <code>persist</code> flag.</p> </li> <li> <p><code>KubespawnerOverride</code>: Allows customization of Kubernetes spawner settings for JupyterHub, specifying resource limits and guarantees such as <code>cpu_limit</code>, optional <code>cpu_guarantee</code>, <code>mem_limit</code>, optional <code>mem_guarantee</code>, <code>image</code>, and dictionaries for <code>extra_resource_limits</code> and <code>extra_resource_guarantees</code>.</p> </li> <li> <p><code>InitContainer</code>: Details an initialization container within a pod, specifying its <code>name</code>, <code>image</code>, a list of <code>command</code> arguments to execute, and a list of <code>volume_mounts</code> (which can be either <code>VolumeMount</code> or <code>InitContainerVolumeMount</code>).</p> </li> <li> <p><code>ProfileDefinition</code>: Describes a user profile within the Application-Hub, including a <code>display_name</code>, an optional <code>description</code>, a <code>slug</code> for identification, a <code>default</code> flag, and <code>kubespawner_override</code> settings.</p> </li> <li> <p><code>ImagePullSecret</code>: Represents a secret used for pulling container images, including a <code>name</code>, a <code>persist</code> flag, and optional <code>data</code> (e.g., authentication credentials).</p> </li> <li> <p><code>SecretMount</code>: Specifies a secret to be mounted into a pod, detailing the <code>name</code> of the secret, the <code>mount_path</code> within the container, an optional <code>sub_path</code> to a specific file within the secret, and a <code>default_mode</code> for file permissions.</p> </li> <li> <p><code>Profile</code>: Encapsulates a user profile, including an <code>id</code>, a list of <code>groups</code> the user belongs to, a <code>definition</code> (of type <code>ProfileDefinition</code>), optional lists of <code>config_maps</code> and <code>volumes</code>, optional environment variable settings (<code>pod_env_vars</code>), optional <code>default_url</code>, <code>node_selector</code> for pod scheduling, optional <code>role_bindings</code>, <code>image_pull_secrets</code>, <code>init_containers</code>, <code>manifests</code>, environment variables sourced from ConfigMaps and Secrets, and optional <code>secret_mounts</code>.</p> </li> <li> <p><code>Config</code>: Serves as the root configuration object, containing a list of <code>profiles</code> (of type <code>Profile</code>).</p> </li> </ul> <p>These data classes provide a structured approach to defining Kubernetes resources.</p>"},{"location":"configuration/#examples","title":"Examples:","text":"<p>The user can follow the examples provided to setup different profiles on Application Hub through the provided notebook under example folder. In the notebook, the user is able to configure different profile including:</p> <ul> <li> <p>Coder</p> </li> <li> <p>Coder with a init.sh</p> </li> <li> <p>Jupyter Lab</p> </li> <li> <p>JupyterLab Plus</p> </li> <li> <p>E-learning</p> </li> <li> <p>QGIS</p> </li> </ul>"},{"location":"configuration/#output-format","title":"Output format:","text":"<p>The <code>apphub-configurator</code> package generates a <code>config.yaml</code> file to define various profiles for your application deployment. Each profile includes several key attributes that need to be configured:</p> <ul> <li>id: the profile identifier of your app </li> <li>groups: the group list containing the users groups that can use the declared app </li> <li>definition: display name, reference slug identifying the app, cpu/ram requirements alloted for it, reference docker image for the app-level</li> <li>config-maps: definition of env variables expressed as ':' or config/secret files together with their mount_path, access, default_mode  <li>volumes: handle the volumes, their persistency, their kubernetes access type (e.g. ReadWriteOnce, ReadWriteMany, ...), their size claim and their mount_path</li> <li>pod_env_vars: Handle the environment variables for the pod.</li> <li>default_url: default uri where to find the app </li> <li>node_selector: identifies on which node pool the app is executed </li> <li>role_bindings: A list of <code>RoleBinding</code> objects that associate users or groups with specific roles within the Kubernetes cluster, controlling access to resources.</li> <li>image_pull_secrets: A list of <code>ImagePullSecret</code> objects containing credentials for pulling private Docker images required by the application.</li> <li>init_containers: A list of <code>InitContainer</code> objects specifying containers that run before the main application containers, typically used for initialization tasks.</li> <li>manifests: A list of <code>Manifest</code> objects representing Kubernetes manifests to be applied during deployment, allowing for the creation and management of various Kubernetes resources.</li> <li>env_from_config_maps: A list of strings specifying the names of ConfigMaps whose data should be exposed as environment variables to the application pods.</li> <li>env_from_secrets: A list of strings specifying the names of Secrets whose data should be exposed as environment variables to the application pods.</li> <li>secret_mounts: A list of <code>SecretMount</code> objects defining Secrets to be mounted as files within the application pods, providing secure storage for sensitive data.</li>"},{"location":"hands-on/","title":"Hands-on","text":"<ul> <li>Config generator: Open the example notebook to generate a <code>config.yaml</code> with your desired profile configuration</li> <li>Add <code>eoepca/application-hub</code> from helm repositories.</li> <li>Deploy the ApplicationHub on a remote cluster using skaffold.</li> </ul>"},{"location":"jupyterhub-api/","title":"Using JupyterHub API","text":"<p>The JupyterHub REST API provides programmatic access to many of JupyterHub\u2019s core functions \u2014 including user and group management, server control, and more. This allows administrators and automation tools to manage JupyterHub instances efficiently.</p> <p>This section outlines how to interact with the JupyterHub API using Python and the <code>requests</code> library, with practical examples to handle tasks such as:</p> <ul> <li>Authenticating and retrieving an API token</li> <li>Managing user groups (create, list, add/remove users)</li> <li>Starting named servers for specific users</li> </ul>"},{"location":"jupyterhub-api/#overview","title":"Overview","text":"<p>The following Python snippets demonstrate how to interact with key features of the JupyterHub API:</p> <ul> <li>API Token Retrieval : Authenticate using a username/password and receive a token for further use </li> <li>Group Management: Create, list, and modify user groups                                        |</li> <li>Named Server Control: Launch Jupyter environments tied to specific users and profiles            |</li> </ul>"},{"location":"jupyterhub-api/#1-api-token-retrieval","title":"1. API Token Retrieval","text":"<p>Before accessing the API, you must obtain an access token by authenticating with valid credentials. This token is required for all subsequent requests.</p> <pre><code>r = requests.get(f\"{endpoint}/authorizations/token\", headers=headers, json=data)\n</code></pre> <p>\u26a0\ufe0f This method may depends on your JupyterHub authenticator setup (e.g., OAuth, native password, etc.).</p>"},{"location":"jupyterhub-api/#2-group-management","title":"2. Group Management","text":"<p>The group API allows administrators to organize users into logical groups for resource or permission control.</p>"},{"location":"jupyterhub-api/#a-list-existing-groups","title":"a. List Existing Groups","text":"<pre><code>r = requests.get(f\"{endpoint}/groups\", headers=headers)\n</code></pre>"},{"location":"jupyterhub-api/#b-create-a-new-group","title":"b. Create a New Group","text":"<pre><code>r = requests.post(f\"{endpoint}/groups/{group}\", headers=headers)\n</code></pre>"},{"location":"jupyterhub-api/#c-add-users-to-a-group","title":"c. Add Users to a Group","text":"<pre><code>r = requests.post(f\"{endpoint}/groups/{group}/users\", headers=headers, json=data)\n</code></pre>"},{"location":"jupyterhub-api/#d-remove-users-from-a-group","title":"d. Remove Users from a Group","text":"<pre><code>r = requests.delete(f\"{endpoint}/groups/{group}/users\", headers=headers, json=data)\n</code></pre>"},{"location":"jupyterhub-api/#3-named-server-management","title":"3. Named Server Management","text":"<p>You can create named servers tied to specific profiles. This is useful for launching custom environments under user control.</p>"},{"location":"jupyterhub-api/#create-a-named-server-for-a-user","title":"Create a Named Server for a User","text":"<pre><code>r = requests.post(f\"{endpoint}/users/{user}/servers/{server_name}\", headers=headers, json=data)\n</code></pre>"},{"location":"k8s/","title":"Kubernetes configuration","text":"<p>Kubernetes is an  orchestration platform that automates the deployment, scaling, and management of containerized applications. Through this tutorial kubernetes profiles can be deployed on a remote cluster. The user will configure JupyterHub to run the pods in a dedicated workspace.</p> <p>As such, a ClusterRole is needed with the manifest:</p> <pre><code>apiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRoleBinding\nmetadata:\n  name: jupyter-rbac\nsubjects:\n  - kind: ServiceAccount\n    name: hub\n    namespace: jupyter\nroleRef:\n  apiGroup: rbac.authorization.k8s.io\n  kind: ClusterRole\n  name: cluster-admin\n</code></pre> <p>Download the manifest from:</p> <p>cluster-role-binding.yaml</p> <p>Apply with:</p> <pre><code>kubectl apply -f cluster-role-binding.yaml\n</code></pre> <p>or do:</p> <pre><code>curl https://eoepca.github.io/application-hub-context/cluster-role-binding.yaml | kubectl apply -f -\n</code></pre>"}]}